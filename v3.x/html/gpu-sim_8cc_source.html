<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GPGPU-Sim: v3.x/src/gpgpu-sim/gpu-sim.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_c934b74ccb33d6b9bfd1e576787940d8.html">v3.x</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_da58ad9beee6988f697f1a76e412a52a.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_d956d62670f5e9a38a62eba10b09b5c2.html">gpgpu-sim</a>
  </div>
</div>
<div class="contents">
<h1>gpu-sim.cc</h1><a href="gpu-sim_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (c) 2009-2011, Tor M. Aamodt, Wilson W.L. Fung, George L. Yuan,</span>
<a name="l00002"></a>00002 <span class="comment">// Ali Bakhoda, Andrew Turner, Ivan Sham</span>
<a name="l00003"></a>00003 <span class="comment">// The University of British Columbia</span>
<a name="l00004"></a>00004 <span class="comment">// All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// Redistribution and use in source and binary forms, with or without</span>
<a name="l00007"></a>00007 <span class="comment">// modification, are permitted provided that the following conditions are met:</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">// Redistributions of source code must retain the above copyright notice, this</span>
<a name="l00010"></a>00010 <span class="comment">// list of conditions and the following disclaimer.</span>
<a name="l00011"></a>00011 <span class="comment">// Redistributions in binary form must reproduce the above copyright notice, this</span>
<a name="l00012"></a>00012 <span class="comment">// list of conditions and the following disclaimer in the documentation and/or</span>
<a name="l00013"></a>00013 <span class="comment">// other materials provided with the distribution.</span>
<a name="l00014"></a>00014 <span class="comment">// Neither the name of The University of British Columbia nor the names of its</span>
<a name="l00015"></a>00015 <span class="comment">// contributors may be used to endorse or promote products derived from this</span>
<a name="l00016"></a>00016 <span class="comment">// software without specific prior written permission.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND</span>
<a name="l00019"></a>00019 <span class="comment">// ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</span>
<a name="l00020"></a>00020 <span class="comment">// WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
<a name="l00021"></a>00021 <span class="comment">// DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE</span>
<a name="l00022"></a>00022 <span class="comment">// FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<a name="l00023"></a>00023 <span class="comment">// DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00024"></a>00024 <span class="comment">// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00025"></a>00025 <span class="comment">// CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
<a name="l00026"></a>00026 <span class="comment">// OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00027"></a>00027 <span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="gpu-sim_8h.html">gpu-sim.h</a>&quot;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;zlib.h&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="shader_8h.html">shader.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="dram_8h.html">dram.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="mem__fetch_8h.html">mem_fetch.h</a>&quot;</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;time.h&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="gpu-cache_8h.html">gpu-cache.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="gpu-misc_8h.html">gpu-misc.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="delayqueue_8h.html">delayqueue.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="shader_8h.html">shader.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="icnt__wrapper_8h.html">icnt_wrapper.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="dram_8h.html">dram.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="addrdec_8h.html">addrdec.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="stat-tool_8h.html">stat-tool.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="l2cache_8h.html">l2cache.h</a>&quot;</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;../cuda-sim/ptx-stats.h&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;../statwrapper.h&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;../abstract_hardware_model.h&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;../debug.h&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;../gpgpusim_entrypoint.h&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;../cuda-sim/cuda-sim.h&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;../trace.h&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="mem__latency__stat_8h.html">mem_latency_stat.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="power__stat_8h.html">power_stat.h</a>&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="visualizer_8h.html">visualizer.h</a>&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="stats_8h.html">stats.h</a>&quot;</span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="preprocessor">#ifdef GPGPUSIM_POWER_MODEL</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="power__interface_8h.html">power_interface.h</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#else</span>
<a name="l00068"></a><a class="code" href="classgpgpu__sim__wrapper.html">00068</a> <span class="preprocessor"></span><span class="keyword">class  </span><a class="code" href="classgpgpu__sim__wrapper.html">gpgpu_sim_wrapper</a> {};
<a name="l00069"></a>00069 <span class="preprocessor">#endif</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="preprocessor">#define MAX(a,b) (((a)&gt;(b))?(a):(b))</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>
<a name="l00079"></a>00079 
<a name="l00080"></a><a class="code" href="gpu-sim_8h.html#a75c0324090738b7806b06294fc7671c7">00080</a> <span class="keywordtype">bool</span> <a class="code" href="gpu-sim_8cc.html#a75c0324090738b7806b06294fc7671c7">g_interactive_debugger_enabled</a>=<span class="keyword">false</span>;
<a name="l00081"></a>00081 
<a name="l00082"></a><a class="code" href="trace_8h.html#a659fec271553d05e676c52314c8fcfe1">00082</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>  <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a> = 0;
<a name="l00083"></a><a class="code" href="trace_8h.html#acef6bbfd6ec09fe29e2641cace785058">00083</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>  <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a> = 0;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="comment">// performance counter for stalls due to congestion.</span>
<a name="l00087"></a><a class="code" href="gpu-sim_8cc.html#a972893862ec1562dce0e686e5f6a6478">00087</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gpu-sim_8cc.html#a972893862ec1562dce0e686e5f6a6478">gpu_stall_dramfull</a> = 0; 
<a name="l00088"></a><a class="code" href="gpu-sim_8cc.html#a7dec6fdb323e8a20c72c0a5bdb75666b">00088</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gpu-sim_8cc.html#a7dec6fdb323e8a20c72c0a5bdb75666b">gpu_stall_icnt2sh</a> = 0;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">/* Clock Domains */</span>
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="preprocessor">#define  CORE  0x01</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span><span class="preprocessor">#define  L2    0x02</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span><span class="preprocessor">#define  DRAM  0x04</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span><span class="preprocessor">#define  ICNT  0x08  </span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="preprocessor">#define MEM_LATENCY_STAT_IMPL</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span>
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="preprocessor">#include &quot;<a class="code" href="mem__latency__stat_8h.html">mem_latency_stat.h</a>&quot;</span>
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="structpower__config.html#a2d66f8128f5638374bc7e136c504a0f7">00105</a> <span class="keywordtype">void</span> <a class="code" href="structpower__config.html#a2d66f8128f5638374bc7e136c504a0f7">power_config::reg_options</a>(<span class="keyword">class</span> <a class="code" href="classOptionParser.html">OptionParser</a> * opp)
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 
<a name="l00109"></a>00109       <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpuwattch_xml_file&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>,
<a name="l00110"></a>00110                              &amp;<a class="code" href="structpower__config.html#aef5f663a42429cc6989b38d926cb0c05">g_power_config_name</a>,<span class="stringliteral">&quot;GPUWattch XML file&quot;</span>,
<a name="l00111"></a>00111                        <span class="stringliteral">&quot;gpuwattch.xml&quot;</span>);
<a name="l00112"></a>00112 
<a name="l00113"></a>00113        <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-power_simulation_enabled&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>,
<a name="l00114"></a>00114                               &amp;<a class="code" href="structpower__config.html#a20c0b60d97a7fb9e9dccaec2f64da44b">g_power_simulation_enabled</a>, <span class="stringliteral">&quot;Turn on power simulator (1=On, 0=Off)&quot;</span>,
<a name="l00115"></a>00115                               <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00116"></a>00116 
<a name="l00117"></a>00117        <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-power_per_cycle_dump&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>,
<a name="l00118"></a>00118                               &amp;<a class="code" href="structpower__config.html#ae669aad32eadcac1de2755537bfca1c4">g_power_per_cycle_dump</a>, <span class="stringliteral">&quot;Dump detailed power output each cycle&quot;</span>,
<a name="l00119"></a>00119                               <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121        <span class="comment">// Output Data Formats</span>
<a name="l00122"></a>00122        <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-power_trace_enabled&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>,
<a name="l00123"></a>00123                               &amp;<a class="code" href="structpower__config.html#a927f7bbab32a6f26ab29f12f70d638c9">g_power_trace_enabled</a>, <span class="stringliteral">&quot;produce a file for the power trace (1=On, 0=Off)&quot;</span>,
<a name="l00124"></a>00124                               <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00125"></a>00125 
<a name="l00126"></a>00126        <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-power_trace_zlevel&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>,
<a name="l00127"></a>00127                               &amp;<a class="code" href="structpower__config.html#ac0731cf84921b2ed95ef24ed73077059">g_power_trace_zlevel</a>, <span class="stringliteral">&quot;Compression level of the power trace output log (0=no comp, 9=highest)&quot;</span>,
<a name="l00128"></a>00128                               <span class="stringliteral">&quot;6&quot;</span>);
<a name="l00129"></a>00129 
<a name="l00130"></a>00130        <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-steady_power_levels_enabled&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>,
<a name="l00131"></a>00131                               &amp;<a class="code" href="structpower__config.html#a41376514c289df130236e6b5cb3fac7b">g_steady_power_levels_enabled</a>, <span class="stringliteral">&quot;produce a file for the steady power levels (1=On, 0=Off)&quot;</span>,
<a name="l00132"></a>00132                               <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134        <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-steady_state_definition&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>,
<a name="l00135"></a>00135                   &amp;<a class="code" href="structpower__config.html#adc7b3094f6674c82d2abfed5f5007231">gpu_steady_state_definition</a>, <span class="stringliteral">&quot;allowed deviation:number of samples&quot;</span>,
<a name="l00136"></a>00136                           <span class="stringliteral">&quot;8:4&quot;</span>);
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 
<a name="l00140"></a><a class="code" href="structmemory__config.html#adecbdd4fd1651be7a063e3e98c92a132">00140</a> <span class="keywordtype">void</span> <a class="code" href="structmemory__config.html#adecbdd4fd1651be7a063e3e98c92a132">memory_config::reg_options</a>(<span class="keyword">class</span> <a class="code" href="classOptionParser.html">OptionParser</a> * opp)
<a name="l00141"></a>00141 {
<a name="l00142"></a>00142     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_dram_scheduler&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structmemory__config.html#a421670cf616901c81fb4635b08f95906">scheduler_type</a>, 
<a name="l00143"></a>00143                                 <span class="stringliteral">&quot;0 = fifo, 1 = FR-FCFS (defaul)&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00144"></a>00144     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_dram_partition_queues&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structmemory__config.html#ade7bd81e2d11f12a30d52b5c73b37c7a">gpgpu_L2_queue_config</a>, 
<a name="l00145"></a>00145                            <span class="stringliteral">&quot;i2$:$2d:d2$:$2i&quot;</span>,
<a name="l00146"></a>00146                            <span class="stringliteral">&quot;8:8:8:8&quot;</span>);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-l2_ideal&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structmemory__config.html#a79e326b04204a9778998465968205f35">l2_ideal</a>, 
<a name="l00149"></a>00149                            <span class="stringliteral">&quot;Use a ideal L2 cache that always hit&quot;</span>,
<a name="l00150"></a>00150                            <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00151"></a>00151     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_cache:dl2&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structmemory__config.html#a7fa0daff849c196f6a52f0b5d21c320c">m_L2_config</a>.<a class="code" href="classcache__config.html#ace912487411f31b4d5ea11348e8c0cb9">m_config_string</a>, 
<a name="l00152"></a>00152                    <span class="stringliteral">&quot;unified banked L2 data cache config &quot;</span>
<a name="l00153"></a>00153                    <span class="stringliteral">&quot; {&lt;nsets&gt;:&lt;bsize&gt;:&lt;assoc&gt;,&lt;rep&gt;:&lt;wr&gt;:&lt;alloc&gt;:&lt;wr_alloc&gt;,&lt;mshr&gt;:&lt;N&gt;:&lt;merge&gt;,&lt;mq&gt;}&quot;</span>,
<a name="l00154"></a>00154                    <span class="stringliteral">&quot;64:128:8,L:B:m:N,A:16:4,4&quot;</span>);
<a name="l00155"></a>00155     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_cache:dl2_texture_only&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structmemory__config.html#a487f4c0c9c95f5c8d8657d22b7a372fb">m_L2_texure_only</a>, 
<a name="l00156"></a>00156                            <span class="stringliteral">&quot;L2 cache used for texture only&quot;</span>,
<a name="l00157"></a>00157                            <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00158"></a>00158     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_n_mem&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>, 
<a name="l00159"></a>00159                  <span class="stringliteral">&quot;number of memory modules (e.g. memory controllers) in gpu&quot;</span>,
<a name="l00160"></a>00160                  <span class="stringliteral">&quot;8&quot;</span>);
<a name="l00161"></a>00161     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_n_sub_partition_per_mchannel&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structmemory__config.html#a94d168569ced756bfd18c2d49235e3c0">m_n_sub_partition_per_memory_channel</a>, 
<a name="l00162"></a>00162                  <span class="stringliteral">&quot;number of memory subpartition in each memory module&quot;</span>,
<a name="l00163"></a>00163                  <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00164"></a>00164     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_n_mem_per_ctrlr&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structmemory__config.html#a839e3197109a12f6a3132ead5611f053">gpu_n_mem_per_ctrlr</a>, 
<a name="l00165"></a>00165                  <span class="stringliteral">&quot;number of memory chips per memory controller&quot;</span>,
<a name="l00166"></a>00166                  <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00167"></a>00167     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_memlatency_stat&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structmemory__config.html#a8cd37fd38bc42b2b718e942dce67528a">gpgpu_memlatency_stat</a>, 
<a name="l00168"></a>00168                 <span class="stringliteral">&quot;track and display latency statistics 0x2 enables MC, 0x4 enables queue logs&quot;</span>,
<a name="l00169"></a>00169                 <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00170"></a>00170     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_frfcfs_dram_sched_queue_size&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structmemory__config.html#ac79cf2200f52166c66c75d5a055a84d7">gpgpu_frfcfs_dram_sched_queue_size</a>, 
<a name="l00171"></a>00171                 <span class="stringliteral">&quot;0 = unlimited (default); # entries per chip&quot;</span>,
<a name="l00172"></a>00172                 <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00173"></a>00173     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_dram_return_queue_size&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structmemory__config.html#a7adb7ff206e0a67d9d5a6c37562c3d0b">gpgpu_dram_return_queue_size</a>, 
<a name="l00174"></a>00174                 <span class="stringliteral">&quot;0 = unlimited (default); # entries per chip&quot;</span>,
<a name="l00175"></a>00175                 <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00176"></a>00176     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_dram_buswidth&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structmemory__config.html#a00e57442129fe1ac62079a5f94c325a5">busW</a>, 
<a name="l00177"></a>00177                  <span class="stringliteral">&quot;default = 4 bytes (8 bytes per cycle at DDR)&quot;</span>,
<a name="l00178"></a>00178                  <span class="stringliteral">&quot;4&quot;</span>);
<a name="l00179"></a>00179     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_dram_burst_length&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structmemory__config.html#a1e2790f6b96fbfefc8bbc32617671cf3">BL</a>, 
<a name="l00180"></a>00180                  <span class="stringliteral">&quot;Burst length of each DRAM request (default = 4 data bus cycle)&quot;</span>,
<a name="l00181"></a>00181                  <span class="stringliteral">&quot;4&quot;</span>);
<a name="l00182"></a>00182     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-dram_data_command_freq_ratio&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structmemory__config.html#a8967282309ea18da15a98e32c78688ed">data_command_freq_ratio</a>, 
<a name="l00183"></a>00183                  <span class="stringliteral">&quot;Frequency ratio between DRAM data bus and command bus (default = 2 times, i.e. DDR)&quot;</span>,
<a name="l00184"></a>00184                  <span class="stringliteral">&quot;2&quot;</span>);
<a name="l00185"></a>00185     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_dram_timing_opt&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structmemory__config.html#ad2c1f304143c580be19cd16fed0e46cd">gpgpu_dram_timing_opt</a>, 
<a name="l00186"></a>00186                 <span class="stringliteral">&quot;DRAM timing parameters = {nbk:tCCD:tRRD:tRCD:tRAS:tRP:tRC:CL:WL:tCDLR:tWR:nbkgrp:tCCDL:tRTPL}&quot;</span>,
<a name="l00187"></a>00187                 <span class="stringliteral">&quot;4:2:8:12:21:13:34:9:4:5:13:1:0:0&quot;</span>);
<a name="l00188"></a>00188     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-rop_latency&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structmemory__config.html#a53fd23e3984e09767f74a95bbc24af35">rop_latency</a>,
<a name="l00189"></a>00189                      <span class="stringliteral">&quot;ROP queue latency (default 85)&quot;</span>,
<a name="l00190"></a>00190                      <span class="stringliteral">&quot;85&quot;</span>);
<a name="l00191"></a>00191     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-dram_latency&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structmemory__config.html#a368ef2bd8779b842ca641c4f68398764">dram_latency</a>,
<a name="l00192"></a>00192                      <span class="stringliteral">&quot;DRAM latency (default 30)&quot;</span>,
<a name="l00193"></a>00193                      <span class="stringliteral">&quot;30&quot;</span>);
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     <a class="code" href="structmemory__config.html#ac11158ffeefbb1dca82c812aa3176b5f">m_address_mapping</a>.<a class="code" href="classlinear__to__raw__address__translation.html#a33699102be069bc5a92cc7373ef66551">addrdec_setoption</a>(opp);
<a name="l00196"></a>00196 }
<a name="l00197"></a>00197 
<a name="l00198"></a><a class="code" href="structshader__core__config.html#ac070d1f73af2588c7d597007be66a6f5">00198</a> <span class="keywordtype">void</span> <a class="code" href="structshader__core__config.html#ac070d1f73af2588c7d597007be66a6f5">shader_core_config::reg_options</a>(<span class="keyword">class</span> <a class="code" href="classOptionParser.html">OptionParser</a> * opp)
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_simd_model&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#abd0a32b3d0fec341d656455aff2f66b7">model</a>, 
<a name="l00201"></a>00201                    <span class="stringliteral">&quot;1 = post-dominator&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00202"></a>00202     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shader_core_pipeline&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#ac906e3dfa7a09aea2b4edfe7809c4b54">gpgpu_shader_core_pipeline_opt</a>, 
<a name="l00203"></a>00203                    <span class="stringliteral">&quot;shader core pipeline config, i.e., {&lt;nthread&gt;:&lt;warpsize&gt;}&quot;</span>,
<a name="l00204"></a>00204                    <span class="stringliteral">&quot;1024:32&quot;</span>);
<a name="l00205"></a>00205     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_tex_cache:l1&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#a97e70c22ec0f090203fbd1831d59a968">m_L1T_config</a>.<a class="code" href="classcache__config.html#ace912487411f31b4d5ea11348e8c0cb9">m_config_string</a>, 
<a name="l00206"></a>00206                    <span class="stringliteral">&quot;per-shader L1 texture cache  (READ-ONLY) config &quot;</span>
<a name="l00207"></a>00207                    <span class="stringliteral">&quot; {&lt;nsets&gt;:&lt;bsize&gt;:&lt;assoc&gt;,&lt;rep&gt;:&lt;wr&gt;:&lt;alloc&gt;:&lt;wr_alloc&gt;,&lt;mshr&gt;:&lt;N&gt;:&lt;merge&gt;,&lt;mq&gt;:&lt;rf&gt;}&quot;</span>,
<a name="l00208"></a>00208                    <span class="stringliteral">&quot;8:128:5,L:R:m:N,F:128:4,128:2&quot;</span>);
<a name="l00209"></a>00209     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_const_cache:l1&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#a57349ee5d040d4b532798f0c68710d12">m_L1C_config</a>.<a class="code" href="classcache__config.html#ace912487411f31b4d5ea11348e8c0cb9">m_config_string</a>, 
<a name="l00210"></a>00210                    <span class="stringliteral">&quot;per-shader L1 constant memory cache  (READ-ONLY) config &quot;</span>
<a name="l00211"></a>00211                    <span class="stringliteral">&quot; {&lt;nsets&gt;:&lt;bsize&gt;:&lt;assoc&gt;,&lt;rep&gt;:&lt;wr&gt;:&lt;alloc&gt;:&lt;wr_alloc&gt;,&lt;mshr&gt;:&lt;N&gt;:&lt;merge&gt;,&lt;mq&gt;} &quot;</span>,
<a name="l00212"></a>00212                    <span class="stringliteral">&quot;64:64:2,L:R:f:N,A:2:32,4&quot;</span> );
<a name="l00213"></a>00213     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_cache:il1&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#ae5bc9b8f23f27a0cf437dd3f4bf1a497">m_L1I_config</a>.<a class="code" href="classcache__config.html#ace912487411f31b4d5ea11348e8c0cb9">m_config_string</a>, 
<a name="l00214"></a>00214                    <span class="stringliteral">&quot;shader L1 instruction cache config &quot;</span>
<a name="l00215"></a>00215                    <span class="stringliteral">&quot; {&lt;nsets&gt;:&lt;bsize&gt;:&lt;assoc&gt;,&lt;rep&gt;:&lt;wr&gt;:&lt;alloc&gt;:&lt;wr_alloc&gt;,&lt;mshr&gt;:&lt;N&gt;:&lt;merge&gt;,&lt;mq&gt;} &quot;</span>,
<a name="l00216"></a>00216                    <span class="stringliteral">&quot;4:256:4,L:R:f:N,A:2:32,4&quot;</span> );
<a name="l00217"></a>00217     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_cache:dl1&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ace912487411f31b4d5ea11348e8c0cb9">m_config_string</a>,
<a name="l00218"></a>00218                    <span class="stringliteral">&quot;per-shader L1 data cache config &quot;</span>
<a name="l00219"></a>00219                    <span class="stringliteral">&quot; {&lt;nsets&gt;:&lt;bsize&gt;:&lt;assoc&gt;,&lt;rep&gt;:&lt;wr&gt;:&lt;alloc&gt;:&lt;wr_alloc&gt;,&lt;mshr&gt;:&lt;N&gt;:&lt;merge&gt;,&lt;mq&gt; | none}&quot;</span>,
<a name="l00220"></a>00220                    <span class="stringliteral">&quot;none&quot;</span> );
<a name="l00221"></a>00221     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_cache:dl1PrefL1&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#a3eea8daf1f70edeaba1b1ff63fe5f3ef">m_config_stringPrefL1</a>,
<a name="l00222"></a>00222                    <span class="stringliteral">&quot;per-shader L1 data cache config &quot;</span>
<a name="l00223"></a>00223                    <span class="stringliteral">&quot; {&lt;nsets&gt;:&lt;bsize&gt;:&lt;assoc&gt;,&lt;rep&gt;:&lt;wr&gt;:&lt;alloc&gt;:&lt;wr_alloc&gt;,&lt;mshr&gt;:&lt;N&gt;:&lt;merge&gt;,&lt;mq&gt; | none}&quot;</span>,
<a name="l00224"></a>00224                    <span class="stringliteral">&quot;none&quot;</span> );
<a name="l00225"></a>00225     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_cache:dl1PreShared&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#a92331692f91269ed18a6da132a4301a0">m_config_stringPrefShared</a>,
<a name="l00226"></a>00226                    <span class="stringliteral">&quot;per-shader L1 data cache config &quot;</span>
<a name="l00227"></a>00227                    <span class="stringliteral">&quot; {&lt;nsets&gt;:&lt;bsize&gt;:&lt;assoc&gt;,&lt;rep&gt;:&lt;wr&gt;:&lt;alloc&gt;:&lt;wr_alloc&gt;,&lt;mshr&gt;:&lt;N&gt;:&lt;merge&gt;,&lt;mq&gt; | none}&quot;</span>,
<a name="l00228"></a>00228                    <span class="stringliteral">&quot;none&quot;</span> );
<a name="l00229"></a>00229     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gmem_skip_L1D&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structshader__core__config.html#a0807f53693e797a1195a3a4c70e02b8b">gmem_skip_L1D</a>, 
<a name="l00230"></a>00230                    <span class="stringliteral">&quot;global memory access skip L1D cache (implements -Xptxas -dlcm=cg, default=no skip)&quot;</span>,
<a name="l00231"></a>00231                    <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_perfect_mem&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structshader__core__config.html#abe1f48d1bf3b8b7ec3531f957e15bbe1">gpgpu_perfect_mem</a>, 
<a name="l00234"></a>00234                  <span class="stringliteral">&quot;enable perfect memory mode (no cache miss)&quot;</span>,
<a name="l00235"></a>00235                  <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00236"></a>00236     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-n_regfile_gating_group&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structshader__core__config.html#abd67e4a527a3ca5a722a5cae60189c03">n_regfile_gating_group</a>,
<a name="l00237"></a>00237                  <span class="stringliteral">&quot;group of lanes that should be read/written together)&quot;</span>,
<a name="l00238"></a>00238                  <span class="stringliteral">&quot;4&quot;</span>);
<a name="l00239"></a>00239     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_clock_gated_reg_file&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structshader__core__config.html#adcdf4af92cb25889d1bad10cacbe612d">gpgpu_clock_gated_reg_file</a>,
<a name="l00240"></a>00240                  <span class="stringliteral">&quot;enable clock gated reg file for power calculations&quot;</span>,
<a name="l00241"></a>00241                  <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00242"></a>00242     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_clock_gated_lanes&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structshader__core__config.html#a316436ea9c077115168bdda018b68fa7">gpgpu_clock_gated_lanes</a>,
<a name="l00243"></a>00243                  <span class="stringliteral">&quot;enable clock gated lanes for power calculations&quot;</span>,
<a name="l00244"></a>00244                  <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00245"></a>00245     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shader_registers&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structshader__core__config.html#ae0f353aa55143f981ac3251e374ba66d">gpgpu_shader_registers</a>, 
<a name="l00246"></a>00246                  <span class="stringliteral">&quot;Number of registers per shader core. Limits number of concurrent CTAs. (default 8192)&quot;</span>,
<a name="l00247"></a>00247                  <span class="stringliteral">&quot;8192&quot;</span>);
<a name="l00248"></a>00248     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shader_cta&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structshader__core__config.html#a2479f7601343394209f403231c69378b">max_cta_per_core</a>, 
<a name="l00249"></a>00249                  <span class="stringliteral">&quot;Maximum number of concurrent CTAs in shader (default 8)&quot;</span>,
<a name="l00250"></a>00250                  <span class="stringliteral">&quot;8&quot;</span>);
<a name="l00251"></a>00251     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_n_clusters&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>, 
<a name="l00252"></a>00252                  <span class="stringliteral">&quot;number of processing clusters&quot;</span>,
<a name="l00253"></a>00253                  <span class="stringliteral">&quot;10&quot;</span>);
<a name="l00254"></a>00254     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_n_cores_per_cluster&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structshader__core__config.html#a104c9f8d770de04280e3b2ef3618ea01">n_simt_cores_per_cluster</a>, 
<a name="l00255"></a>00255                  <span class="stringliteral">&quot;number of simd cores per cluster&quot;</span>,
<a name="l00256"></a>00256                  <span class="stringliteral">&quot;3&quot;</span>);
<a name="l00257"></a>00257     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_n_cluster_ejection_buffer_size&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structshader__core__config.html#ac75c25ebdbd6e67d642e2aa3aa387971">n_simt_ejection_buffer_size</a>, 
<a name="l00258"></a>00258                  <span class="stringliteral">&quot;number of packets in ejection buffer&quot;</span>,
<a name="l00259"></a>00259                  <span class="stringliteral">&quot;8&quot;</span>);
<a name="l00260"></a>00260     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_n_ldst_response_buffer_size&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structshader__core__config.html#a843cef2da1d2994b18aeac6db9e612a6">ldst_unit_response_queue_size</a>, 
<a name="l00261"></a>00261                  <span class="stringliteral">&quot;number of response packets in ld/st unit ejection buffer&quot;</span>,
<a name="l00262"></a>00262                  <span class="stringliteral">&quot;2&quot;</span>);
<a name="l00263"></a>00263     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shmem_size&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structcore__config.html#a09a8494f780facd68295a6a869c14bf7">gpgpu_shmem_size</a>,
<a name="l00264"></a>00264                  <span class="stringliteral">&quot;Size of shared memory per shader core (default 16kB)&quot;</span>,
<a name="l00265"></a>00265                  <span class="stringliteral">&quot;16384&quot;</span>);
<a name="l00266"></a>00266     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shmem_size&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structcore__config.html#abba0d3e8b4cb58024da0ef71448053ab">gpgpu_shmem_sizeDefault</a>,
<a name="l00267"></a>00267                  <span class="stringliteral">&quot;Size of shared memory per shader core (default 16kB)&quot;</span>,
<a name="l00268"></a>00268                  <span class="stringliteral">&quot;16384&quot;</span>);
<a name="l00269"></a>00269     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shmem_size_PrefL1&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structcore__config.html#ac05dfc6d3a7ac2f83fbc14c44cbc771b">gpgpu_shmem_sizePrefL1</a>,
<a name="l00270"></a>00270                  <span class="stringliteral">&quot;Size of shared memory per shader core (default 16kB)&quot;</span>,
<a name="l00271"></a>00271                  <span class="stringliteral">&quot;16384&quot;</span>);
<a name="l00272"></a>00272     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shmem_size_PrefShared&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structcore__config.html#a8f5b04edfbc0a6ff2bd4c1400aaca87f">gpgpu_shmem_sizePrefShared</a>,
<a name="l00273"></a>00273                  <span class="stringliteral">&quot;Size of shared memory per shader core (default 16kB)&quot;</span>,
<a name="l00274"></a>00274                  <span class="stringliteral">&quot;16384&quot;</span>);
<a name="l00275"></a>00275     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shmem_num_banks&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae8d32fc7ba0eaac6d07017c2b86c848e">OPT_UINT32</a>, &amp;<a class="code" href="structcore__config.html#ada2fe1020c39b13e72d0db044114fc3d">num_shmem_bank</a>, 
<a name="l00276"></a>00276                  <span class="stringliteral">&quot;Number of banks in the shared memory in each shader core (default 16)&quot;</span>,
<a name="l00277"></a>00277                  <span class="stringliteral">&quot;16&quot;</span>);
<a name="l00278"></a>00278     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shmem_limited_broadcast&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structcore__config.html#a12b4a7342e537763373bb433ec06d172">shmem_limited_broadcast</a>, 
<a name="l00279"></a>00279                  <span class="stringliteral">&quot;Limit shared memory to do one broadcast per cycle (default on)&quot;</span>,
<a name="l00280"></a>00280                  <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00281"></a>00281     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_shmem_warp_parts&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structcore__config.html#a51c9f7f1e6339b28812ea86f46be189e">mem_warp_parts</a>,  
<a name="l00282"></a>00282                  <span class="stringliteral">&quot;Number of portions a warp is divided into for shared memory bank conflict check &quot;</span>,
<a name="l00283"></a>00283                  <span class="stringliteral">&quot;2&quot;</span>);
<a name="l00284"></a>00284     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_warpdistro_shader&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#aef865ffa389adf962002a2fa46630d46">gpgpu_warpdistro_shader</a>, 
<a name="l00285"></a>00285                 <span class="stringliteral">&quot;Specify which shader core to collect the warp size distribution from&quot;</span>, 
<a name="l00286"></a>00286                 <span class="stringliteral">&quot;-1&quot;</span>);
<a name="l00287"></a>00287     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_warp_issue_shader&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#ad129f33cb35aea68b2f9b3b846aaee6d">gpgpu_warp_issue_shader</a>, 
<a name="l00288"></a>00288                 <span class="stringliteral">&quot;Specify which shader core to collect the warp issue distribution from&quot;</span>, 
<a name="l00289"></a>00289                 <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00290"></a>00290     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_local_mem_map&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structshader__core__config.html#a7efed49664bb50e62ee0991c698bee31">gpgpu_local_mem_map</a>, 
<a name="l00291"></a>00291                 <span class="stringliteral">&quot;Mapping from local memory space address to simulated GPU physical address space (default = enabled)&quot;</span>, 
<a name="l00292"></a>00292                 <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00293"></a>00293     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_num_reg_banks&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#a4f97efa5a84b7173f2f874f702a0c347">gpgpu_num_reg_banks</a>, 
<a name="l00294"></a>00294                 <span class="stringliteral">&quot;Number of register banks (default = 8)&quot;</span>, 
<a name="l00295"></a>00295                 <span class="stringliteral">&quot;8&quot;</span>);
<a name="l00296"></a>00296     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_reg_bank_use_warp_id&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="structshader__core__config.html#a33569e317ee4e3016c548b372bace02f">gpgpu_reg_bank_use_warp_id</a>,
<a name="l00297"></a>00297              <span class="stringliteral">&quot;Use warp ID in mapping registers to banks (default = off)&quot;</span>,
<a name="l00298"></a>00298              <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00299"></a>00299     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_units_sp&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#a53457a08bf2d19dda737cc132b16989a">gpgpu_operand_collector_num_units_sp</a>,
<a name="l00300"></a>00300                 <span class="stringliteral">&quot;number of collector units (default = 4)&quot;</span>, 
<a name="l00301"></a>00301                 <span class="stringliteral">&quot;4&quot;</span>);
<a name="l00302"></a>00302     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_units_sfu&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#ae78d4c05cc4f98ed9acaa864921d272d">gpgpu_operand_collector_num_units_sfu</a>,
<a name="l00303"></a>00303                 <span class="stringliteral">&quot;number of collector units (default = 4)&quot;</span>, 
<a name="l00304"></a>00304                 <span class="stringliteral">&quot;4&quot;</span>);
<a name="l00305"></a>00305     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_units_mem&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#ab73488ba6bb1eb6601311c2a975a92de">gpgpu_operand_collector_num_units_mem</a>,
<a name="l00306"></a>00306                 <span class="stringliteral">&quot;number of collector units (default = 2)&quot;</span>, 
<a name="l00307"></a>00307                 <span class="stringliteral">&quot;2&quot;</span>);
<a name="l00308"></a>00308     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_units_gen&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#a3567c407a7fe1d65209cde36a0a3513c">gpgpu_operand_collector_num_units_gen</a>,
<a name="l00309"></a>00309                 <span class="stringliteral">&quot;number of collector units (default = 0)&quot;</span>, 
<a name="l00310"></a>00310                 <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00311"></a>00311     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_in_ports_sp&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#aec92aa2c172b0c53cf29d94888a3a047">gpgpu_operand_collector_num_in_ports_sp</a>,
<a name="l00312"></a>00312                            <span class="stringliteral">&quot;number of collector unit in ports (default = 1)&quot;</span>, 
<a name="l00313"></a>00313                            <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00314"></a>00314     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_in_ports_sfu&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#aa42ebc13df02a25e1aef0f95b187cdd2">gpgpu_operand_collector_num_in_ports_sfu</a>,
<a name="l00315"></a>00315                            <span class="stringliteral">&quot;number of collector unit in ports (default = 1)&quot;</span>, 
<a name="l00316"></a>00316                            <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00317"></a>00317     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_in_ports_mem&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#a533bc5530c6742ae62987b8f9cd5a2f9">gpgpu_operand_collector_num_in_ports_mem</a>,
<a name="l00318"></a>00318                            <span class="stringliteral">&quot;number of collector unit in ports (default = 1)&quot;</span>, 
<a name="l00319"></a>00319                            <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00320"></a>00320     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_in_ports_gen&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#aec2ad572d5aebad6afba51606e88cc28">gpgpu_operand_collector_num_in_ports_gen</a>,
<a name="l00321"></a>00321                            <span class="stringliteral">&quot;number of collector unit in ports (default = 0)&quot;</span>, 
<a name="l00322"></a>00322                            <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00323"></a>00323     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_out_ports_sp&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#afa67a7971a48b15395f854853ccc93cf">gpgpu_operand_collector_num_out_ports_sp</a>,
<a name="l00324"></a>00324                            <span class="stringliteral">&quot;number of collector unit in ports (default = 1)&quot;</span>, 
<a name="l00325"></a>00325                            <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00326"></a>00326     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_out_ports_sfu&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#a84464911d1ece073c41b0c858df82e3b">gpgpu_operand_collector_num_out_ports_sfu</a>,
<a name="l00327"></a>00327                            <span class="stringliteral">&quot;number of collector unit in ports (default = 1)&quot;</span>, 
<a name="l00328"></a>00328                            <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00329"></a>00329     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_out_ports_mem&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#a5a8d763354f5678054b8aff24a490e88">gpgpu_operand_collector_num_out_ports_mem</a>,
<a name="l00330"></a>00330                            <span class="stringliteral">&quot;number of collector unit in ports (default = 1)&quot;</span>, 
<a name="l00331"></a>00331                            <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00332"></a>00332     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_operand_collector_num_out_ports_gen&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#aeee25df8ecc890ef089528c704588594">gpgpu_operand_collector_num_out_ports_gen</a>,
<a name="l00333"></a>00333                            <span class="stringliteral">&quot;number of collector unit in ports (default = 0)&quot;</span>, 
<a name="l00334"></a>00334                            <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00335"></a>00335     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_coalesce_arch&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structcore__config.html#a5cafd27aa1736962554e4b78b7a00e48">gpgpu_coalesce_arch</a>, 
<a name="l00336"></a>00336                             <span class="stringliteral">&quot;Coalescing arch (default = 13, anything else is off for now)&quot;</span>, 
<a name="l00337"></a>00337                             <span class="stringliteral">&quot;13&quot;</span>);
<a name="l00338"></a>00338     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_num_sched_per_core&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#acbc9904a0cd126e165f258b7750b8262">gpgpu_num_sched_per_core</a>, 
<a name="l00339"></a>00339                             <span class="stringliteral">&quot;Number of warp schedulers per core&quot;</span>, 
<a name="l00340"></a>00340                             <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00341"></a>00341     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_max_insn_issue_per_warp&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#aa5e09854f08316f4f2e4bf45f8c6579b">gpgpu_max_insn_issue_per_warp</a>,
<a name="l00342"></a>00342                             <span class="stringliteral">&quot;Max number of instructions that can be issued per warp in one cycle by scheduler&quot;</span>,
<a name="l00343"></a>00343                             <span class="stringliteral">&quot;2&quot;</span>);
<a name="l00344"></a>00344     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_simt_core_sim_order&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#a7938abb814fd509de144aa80199730a1">simt_core_sim_order</a>,
<a name="l00345"></a>00345                             <span class="stringliteral">&quot;Select the simulation order of cores in a cluster (0=Fix, 1=Round-Robin)&quot;</span>,
<a name="l00346"></a>00346                             <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00347"></a>00347     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_pipeline_widths&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#a7d4982f9bdd9675c16365acda16ab040">pipeline_widths_string</a>,
<a name="l00348"></a>00348                             <span class="stringliteral">&quot;Pipeline widths &quot;</span>
<a name="l00349"></a>00349                             <span class="stringliteral">&quot;ID_OC_SP,ID_OC_SFU,ID_OC_MEM,OC_EX_SP,OC_EX_SFU,OC_EX_MEM,EX_WB&quot;</span>,
<a name="l00350"></a>00350                             <span class="stringliteral">&quot;1,1,1,1,1,1,1&quot;</span> );
<a name="l00351"></a>00351     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_num_sp_units&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#a3cc41472a119df508e1bb3ca0ee46a33">gpgpu_num_sp_units</a>,
<a name="l00352"></a>00352                             <span class="stringliteral">&quot;Number of SP units (default=1)&quot;</span>,
<a name="l00353"></a>00353                             <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00354"></a>00354     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_num_sfu_units&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#aab7e81974275b87773f7defdcfc551d5">gpgpu_num_sfu_units</a>,
<a name="l00355"></a>00355                             <span class="stringliteral">&quot;Number of SF units (default=1)&quot;</span>,
<a name="l00356"></a>00356                             <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00357"></a>00357     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_num_mem_units&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="structshader__core__config.html#ac50bc2d16a07738168a4a800f4f1a8a0">gpgpu_num_mem_units</a>,
<a name="l00358"></a>00358                             <span class="stringliteral">&quot;Number if ldst units (default=1) WARNING: not hooked up to anything&quot;</span>,
<a name="l00359"></a>00359                              <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00360"></a>00360     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_scheduler&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="structshader__core__config.html#a54e1d00c133d667243fd74c450e26d00">gpgpu_scheduler_string</a>,
<a name="l00361"></a>00361                                 <span class="stringliteral">&quot;Scheduler configuration: &lt; lrr | gto | two_level_active &gt; &quot;</span>
<a name="l00362"></a>00362                                 <span class="stringliteral">&quot;If two_level_active:&lt;num_active_warps&gt;:&lt;inner_prioritization&gt;:&lt;outer_prioritization&gt;&quot;</span>
<a name="l00363"></a>00363                                 <span class="stringliteral">&quot;For complete list of prioritization values see shader.h enum scheduler_prioritization_type&quot;</span>
<a name="l00364"></a>00364                                 <span class="stringliteral">&quot;Default: gto&quot;</span>,
<a name="l00365"></a>00365                                  <span class="stringliteral">&quot;gto&quot;</span>);
<a name="l00366"></a>00366 }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim__config.html#ac6b32e2c82913fe52e9825f6f444b71d">gpgpu_sim_config::reg_options</a>(<a class="code" href="option__parser_8h.html#a05de72a9056d9bcb26f0b07bcebae49b">option_parser_t</a> opp)
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370     <a class="code" href="classgpgpu__sim__config.html#ac6b32e2c82913fe52e9825f6f444b71d">gpgpu_functional_sim_config::reg_options</a>(opp);
<a name="l00371"></a>00371     <a class="code" href="classgpgpu__sim__config.html#ada6175f566cc3e707470ff3a672ff8f1">m_shader_config</a>.<a class="code" href="structshader__core__config.html#ac070d1f73af2588c7d597007be66a6f5">reg_options</a>(opp);
<a name="l00372"></a>00372     <a class="code" href="classgpgpu__sim__config.html#af7326b2b4f34bf91f7c77845d17c60f5">m_memory_config</a>.<a class="code" href="structmemory__config.html#adecbdd4fd1651be7a063e3e98c92a132">reg_options</a>(opp);
<a name="l00373"></a>00373     <a class="code" href="classgpgpu__sim__config.html#ac6b32e2c82913fe52e9825f6f444b71d">power_config::reg_options</a>(opp);
<a name="l00374"></a>00374    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_max_cycle&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#abf31c7933a98dc2b807a141b49d27c67">gpu_max_cycle_opt</a>, 
<a name="l00375"></a>00375                <span class="stringliteral">&quot;terminates gpu simulation early (0 = no limit)&quot;</span>,
<a name="l00376"></a>00376                <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00377"></a>00377    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_max_insn&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#a3d4018b7d49bf987e5f2b9f688089d3b">gpu_max_insn_opt</a>, 
<a name="l00378"></a>00378                <span class="stringliteral">&quot;terminates gpu simulation early (0 = no limit)&quot;</span>,
<a name="l00379"></a>00379                <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00380"></a>00380    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_max_cta&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#aa64d93e5e8e18ca93ecf1e97c8c18dc7">gpu_max_cta_opt</a>, 
<a name="l00381"></a>00381                <span class="stringliteral">&quot;terminates gpu simulation early (0 = no limit)&quot;</span>,
<a name="l00382"></a>00382                <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00383"></a>00383    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_runtime_stat&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#a2da856acc5bdbe958d4a524876353899">gpgpu_runtime_stat</a>, 
<a name="l00384"></a>00384                   <span class="stringliteral">&quot;display runtime statistics such as dram utilization {&lt;freq&gt;:&lt;flag&gt;}&quot;</span>,
<a name="l00385"></a>00385                   <span class="stringliteral">&quot;10000:0&quot;</span>);
<a name="l00386"></a>00386    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-liveness_message_freq&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca1a54093642a5509e5931a2635cdfdcb5">OPT_INT64</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#a760c7c5962ec1744c05d1c9cd840a4e9">liveness_message_freq</a>, 
<a name="l00387"></a>00387                <span class="stringliteral">&quot;Minimum number of seconds between simulation liveness messages (0 = always print)&quot;</span>,
<a name="l00388"></a>00388                <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00389"></a>00389    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_flush_l1_cache&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#a66cfb0ba782ce61bef5c164dd1aa51ae">gpgpu_flush_l1_cache</a>,
<a name="l00390"></a>00390                 <span class="stringliteral">&quot;Flush L1 cache at the end of each kernel call&quot;</span>,
<a name="l00391"></a>00391                 <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00392"></a>00392    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_flush_l2_cache&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#a4decb22d9f326ecbe25d58b5290e46a9">gpgpu_flush_l2_cache</a>,
<a name="l00393"></a>00393                    <span class="stringliteral">&quot;Flush L2 cache at the end of each kernel call&quot;</span>,
<a name="l00394"></a>00394                    <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00395"></a>00395 
<a name="l00396"></a>00396    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_deadlock_detect&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#af4ac590abdbee73ea5852e9c2b8c0be9">gpu_deadlock_detect</a>, 
<a name="l00397"></a>00397                 <span class="stringliteral">&quot;Stop the simulation at deadlock (1=on (default), 0=off)&quot;</span>, 
<a name="l00398"></a>00398                 <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00399"></a>00399    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_ptx_instruction_classification&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, 
<a name="l00400"></a>00400                &amp;<a class="code" href="cuda-sim_8cc.html#a83c3cb2c869f2175b50647efbea208b7">gpgpu_ptx_instruction_classification</a>, 
<a name="l00401"></a>00401                <span class="stringliteral">&quot;if enabled will classify ptx instruction types per kernel (Max 255 kernels now)&quot;</span>, 
<a name="l00402"></a>00402                <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00403"></a>00403    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_ptx_sim_mode&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="cuda-sim_8cc.html#a6159b587777bb85f99ddc2659decc699">g_ptx_sim_mode</a>, 
<a name="l00404"></a>00404                <span class="stringliteral">&quot;Select between Performance (default) or Functional simulation (1)&quot;</span>, 
<a name="l00405"></a>00405                <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00406"></a>00406    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_clock_domains&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#acb25ce82b374830bb10c066c9895bf50">gpgpu_clock_domains</a>, 
<a name="l00407"></a>00407                   <span class="stringliteral">&quot;Clock Domain Frequencies in MhZ {&lt;Core Clock&gt;:&lt;ICNT Clock&gt;:&lt;L2 Clock&gt;:&lt;DRAM Clock&gt;}&quot;</span>,
<a name="l00408"></a>00408                   <span class="stringliteral">&quot;500.0:2000.0:2000.0:2000.0&quot;</span>);
<a name="l00409"></a>00409    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_max_concurrent_kernel&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#a55c89cb8a90cce8d779fb4d4ffbeca18">max_concurrent_kernel</a>,
<a name="l00410"></a>00410                           <span class="stringliteral">&quot;maximum kernels that can run concurrently on GPU&quot;</span>, <span class="stringliteral">&quot;8&quot;</span> );
<a name="l00411"></a>00411    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-gpgpu_cflog_interval&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a>, 
<a name="l00412"></a>00412                <span class="stringliteral">&quot;Interval between each snapshot in control flow logger&quot;</span>, 
<a name="l00413"></a>00413                <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00414"></a>00414    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-visualizer_enabled&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>,
<a name="l00415"></a>00415                           &amp;<a class="code" href="classgpgpu__sim__config.html#a66c3a28fc21786c229ceabe69ce3d2bc">g_visualizer_enabled</a>, <span class="stringliteral">&quot;Turn on visualizer output (1=On, 0=Off)&quot;</span>,
<a name="l00416"></a>00416                           <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00417"></a>00417    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-visualizer_outputfile&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, 
<a name="l00418"></a>00418                           &amp;<a class="code" href="classgpgpu__sim__config.html#a6781359d1fb7a97ff693e2a43cc94641">g_visualizer_filename</a>, <span class="stringliteral">&quot;Specifies the output log file for visualizer&quot;</span>,
<a name="l00419"></a>00419                           NULL);
<a name="l00420"></a>00420    <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-visualizer_zlevel&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>,
<a name="l00421"></a>00421                           &amp;<a class="code" href="classgpgpu__sim__config.html#a0f98a631789f9346c29ff3965d3b217d">g_visualizer_zlevel</a>, <span class="stringliteral">&quot;Compression level of the visualizer output log (0=no comp, 9=highest)&quot;</span>,
<a name="l00422"></a>00422                           <span class="stringliteral">&quot;6&quot;</span>);
<a name="l00423"></a>00423     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-trace_enabled&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca773b4ddf8aceffb51ad9d12d4fe06124">OPT_BOOL</a>, 
<a name="l00424"></a>00424                           &amp;<a class="code" href="namespaceTrace.html#a7eceed02e84cba66f80ba6e5fc184ebc">Trace::enabled</a>, <span class="stringliteral">&quot;Turn on traces&quot;</span>,
<a name="l00425"></a>00425                           <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00426"></a>00426     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-trace_components&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fcae79bed903a3b2e8da41bee1c12e62fd6">OPT_CSTR</a>, 
<a name="l00427"></a>00427                           &amp;<a class="code" href="namespaceTrace.html#ac535aea7b6428c4fb0d3b2ff4ac211d5">Trace::config_str</a>, <span class="stringliteral">&quot;comma seperated list of traces to enable. &quot;</span>
<a name="l00428"></a>00428                           <span class="stringliteral">&quot;Complete list found in trace_streams.tup. &quot;</span>
<a name="l00429"></a>00429                           <span class="stringliteral">&quot;Default none&quot;</span>,
<a name="l00430"></a>00430                           <span class="stringliteral">&quot;none&quot;</span>);
<a name="l00431"></a>00431     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-trace_sampling_core&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, 
<a name="l00432"></a>00432                           &amp;<a class="code" href="namespaceTrace.html#a3abdc0e88b4dc00af34920f541c50916">Trace::sampling_core</a>, <span class="stringliteral">&quot;The core which is printed using CORE_DPRINTF. Default 0&quot;</span>,
<a name="l00433"></a>00433                           <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00434"></a>00434     <a class="code" href="option__parser_8cc.html#abe0bcd5e591c5664dcd98e4d291519e0">option_parser_register</a>(opp, <span class="stringliteral">&quot;-trace_sampling_memory_partition&quot;</span>, <a class="code" href="option__parser_8h.html#a1ea719a508955d0748f03bada1ecc8fca861641876064cd7ea69b84e7ee744600">OPT_INT32</a>, 
<a name="l00435"></a>00435                           &amp;<a class="code" href="namespaceTrace.html#a0a1f74dbc00fe61e728897b19de52107">Trace::sampling_memory_partition</a>, <span class="stringliteral">&quot;The memory partition which is printed using MEMPART_DPRINTF. Default -1 (i.e. all)&quot;</span>,
<a name="l00436"></a>00436                           <span class="stringliteral">&quot;-1&quot;</span>);
<a name="l00437"></a>00437    <a class="code" href="ptx-stats_8cc.html#a9c4182d0c3b2cd4461427eaeaa72328d">ptx_file_line_stats_options</a>(opp);
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00441"></a>00441 
<a name="l00442"></a><a class="code" href="gpu-sim_8cc.html#a95a2f24dfc60072d3cb1e4e01a840c01">00442</a> <span class="keywordtype">void</span> <a class="code" href="abstract__hardware__model_8h.html#a95a2f24dfc60072d3cb1e4e01a840c01">increment_x_then_y_then_z</a>( <a class="code" href="structdim3.html">dim3</a> &amp;i, <span class="keyword">const</span> <a class="code" href="structdim3.html">dim3</a> &amp;bound)
<a name="l00443"></a>00443 {
<a name="l00444"></a>00444    i.<a class="code" href="structdim3.html#ac94584074d5c15f67c66656859bb24e9">x</a>++;
<a name="l00445"></a>00445    <span class="keywordflow">if</span> ( i.<a class="code" href="structdim3.html#ac94584074d5c15f67c66656859bb24e9">x</a> &gt;= bound.<a class="code" href="structdim3.html#ac94584074d5c15f67c66656859bb24e9">x</a> ) {
<a name="l00446"></a>00446       i.<a class="code" href="structdim3.html#ac94584074d5c15f67c66656859bb24e9">x</a> = 0;
<a name="l00447"></a>00447       i.<a class="code" href="structdim3.html#ae87d6f5fc0cc038be953f78f36ba873f">y</a>++;
<a name="l00448"></a>00448       <span class="keywordflow">if</span> ( i.<a class="code" href="structdim3.html#ae87d6f5fc0cc038be953f78f36ba873f">y</a> &gt;= bound.<a class="code" href="structdim3.html#ae87d6f5fc0cc038be953f78f36ba873f">y</a> ) {
<a name="l00449"></a>00449          i.<a class="code" href="structdim3.html#ae87d6f5fc0cc038be953f78f36ba873f">y</a> = 0;
<a name="l00450"></a>00450          <span class="keywordflow">if</span>( i.<a class="code" href="structdim3.html#a4856dbf9372e82eb478bf14ec1d2e294">z</a> &lt; bound.<a class="code" href="structdim3.html#a4856dbf9372e82eb478bf14ec1d2e294">z</a> ) 
<a name="l00451"></a>00451             i.<a class="code" href="structdim3.html#a4856dbf9372e82eb478bf14ec1d2e294">z</a>++;
<a name="l00452"></a>00452       }
<a name="l00453"></a>00453    }
<a name="l00454"></a>00454 }
<a name="l00455"></a>00455 
<a name="l00456"></a><a class="code" href="classgpgpu__sim.html#a6a55f579a83afe6dcf2135368ea7c809">00456</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a6a55f579a83afe6dcf2135368ea7c809">gpgpu_sim::launch</a>( <a class="code" href="classkernel__info__t.html">kernel_info_t</a> *kinfo )
<a name="l00457"></a>00457 {
<a name="l00458"></a>00458    <span class="keywordtype">unsigned</span> cta_size = kinfo-&gt;<a class="code" href="classkernel__info__t.html#a7764459a63b3dd279dfb07576a1dc718">threads_per_cta</a>();
<a name="l00459"></a>00459    <span class="keywordflow">if</span> ( cta_size &gt; <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a559092b8eaeffafe04a61f83cefe74d2">n_thread_per_shader</a> ) {
<a name="l00460"></a>00460       printf(<span class="stringliteral">&quot;Execution error: Shader kernel CTA (block) size is too large for microarch config.\n&quot;</span>);
<a name="l00461"></a>00461       printf(<span class="stringliteral">&quot;                 CTA size (x*y*z) = %u, max supported = %u\n&quot;</span>, cta_size, 
<a name="l00462"></a>00462              <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a559092b8eaeffafe04a61f83cefe74d2">n_thread_per_shader</a> );
<a name="l00463"></a>00463       printf(<span class="stringliteral">&quot;                 =&gt; either change -gpgpu_shader argument in gpgpusim.config file or\n&quot;</span>);
<a name="l00464"></a>00464       printf(<span class="stringliteral">&quot;                 modify the CUDA source to decrease the kernel block size.\n&quot;</span>);
<a name="l00465"></a>00465       abort();
<a name="l00466"></a>00466    }
<a name="l00467"></a>00467    <span class="keywordtype">unsigned</span> <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>=0;
<a name="l00468"></a>00468    <span class="keywordflow">for</span>(n=0; n &lt; <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.size(); n++ ) {
<a name="l00469"></a>00469        <span class="keywordflow">if</span>( (NULL==<a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[n]) || <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[n]-&gt;done() ) {
<a name="l00470"></a>00470            <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[n] = kinfo;
<a name="l00471"></a>00471            <span class="keywordflow">break</span>;
<a name="l00472"></a>00472        }
<a name="l00473"></a>00473    }
<a name="l00474"></a>00474    assert(n &lt; <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.size());
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="classgpgpu__sim.html#a47fb8de4282171f61d171e4a6ea92677">00477</a> <span class="keywordtype">bool</span> <a class="code" href="classgpgpu__sim.html#a47fb8de4282171f61d171e4a6ea92677">gpgpu_sim::can_start_kernel</a>()
<a name="l00478"></a>00478 {
<a name="l00479"></a>00479    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>=0; <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> &lt; <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.size(); <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>++ ) {
<a name="l00480"></a>00480        <span class="keywordflow">if</span>( (NULL==<a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[<a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>]) || <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[n]-&gt;done() ) 
<a name="l00481"></a>00481            <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00482"></a>00482    }
<a name="l00483"></a>00483    <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00484"></a>00484 }
<a name="l00485"></a>00485 
<a name="l00486"></a><a class="code" href="classgpgpu__sim.html#a401cfb3303dd888aa4600a3975065c5d">00486</a> <span class="keywordtype">bool</span> <a class="code" href="classgpgpu__sim.html#a401cfb3303dd888aa4600a3975065c5d">gpgpu_sim::get_more_cta_left</a>()<span class="keyword"> const</span>
<a name="l00487"></a>00487 <span class="keyword"></span>{ 
<a name="l00488"></a>00488    <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#aa64d93e5e8e18ca93ecf1e97c8c18dc7">gpu_max_cta_opt</a> != 0) {
<a name="l00489"></a>00489       <span class="keywordflow">if</span>( <a class="code" href="classgpgpu__sim.html#a887770f78c3bf47e43b79479b52ab72a">m_total_cta_launched</a> &gt;= <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#aa64d93e5e8e18ca93ecf1e97c8c18dc7">gpu_max_cta_opt</a> )
<a name="l00490"></a>00490           <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00491"></a>00491    }
<a name="l00492"></a>00492    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>=0; <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> &lt; <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.size(); <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>++ ) {
<a name="l00493"></a>00493        <span class="keywordflow">if</span>( <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[<a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>] &amp;&amp; !<a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[<a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>]-&gt;no_more_ctas_to_run() ) 
<a name="l00494"></a>00494            <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00495"></a>00495    }
<a name="l00496"></a>00496    <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00497"></a>00497 }
<a name="l00498"></a>00498 
<a name="l00499"></a><a class="code" href="classgpgpu__sim.html#a1553293edb404940fd9a43a5f4de91cd">00499</a> <a class="code" href="classkernel__info__t.html">kernel_info_t</a> *<a class="code" href="classgpgpu__sim.html#a1553293edb404940fd9a43a5f4de91cd">gpgpu_sim::select_kernel</a>()
<a name="l00500"></a>00500 {
<a name="l00501"></a>00501     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>=0; <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> &lt; <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.size(); <a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>++ ) {
<a name="l00502"></a>00502         <span class="keywordtype">unsigned</span> idx = (<a class="code" href="rng_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>+<a class="code" href="classgpgpu__sim.html#a3005d1a5650d7e1c77e5972869bba265">m_last_issued_kernel</a>+1)%<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a55c89cb8a90cce8d779fb4d4ffbeca18">max_concurrent_kernel</a>;
<a name="l00503"></a>00503         <span class="keywordflow">if</span>( <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[idx] &amp;&amp; !<a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[idx]-&gt;no_more_ctas_to_run() ) {
<a name="l00504"></a>00504             <a class="code" href="classgpgpu__sim.html#a3005d1a5650d7e1c77e5972869bba265">m_last_issued_kernel</a>=idx;
<a name="l00505"></a>00505             <span class="comment">// record this kernel for stat print if it is the first time this kernel is selected for execution  </span>
<a name="l00506"></a>00506             <span class="keywordtype">unsigned</span> launch_uid = <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[idx]-&gt;get_uid(); 
<a name="l00507"></a>00507             <span class="keywordflow">if</span> (std::find(<a class="code" href="classgpgpu__sim.html#a9a867fa7fa9cf65f514115251f195a80">m_executed_kernel_uids</a>.begin(), <a class="code" href="classgpgpu__sim.html#a9a867fa7fa9cf65f514115251f195a80">m_executed_kernel_uids</a>.end(), launch_uid) == <a class="code" href="classgpgpu__sim.html#a9a867fa7fa9cf65f514115251f195a80">m_executed_kernel_uids</a>.end()) {
<a name="l00508"></a>00508                <a class="code" href="classgpgpu__sim.html#a9a867fa7fa9cf65f514115251f195a80">m_executed_kernel_uids</a>.push_back(launch_uid); 
<a name="l00509"></a>00509                <a class="code" href="classgpgpu__sim.html#afc1b71662338443ba13284c02cdfa01c">m_executed_kernel_names</a>.push_back(<a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[idx]-&gt;name()); 
<a name="l00510"></a>00510             }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512             <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>[idx];
<a name="l00513"></a>00513         }
<a name="l00514"></a>00514     }
<a name="l00515"></a>00515     <span class="keywordflow">return</span> NULL;
<a name="l00516"></a>00516 }
<a name="l00517"></a>00517 
<a name="l00518"></a><a class="code" href="classgpgpu__sim.html#a0924b4264f1c4b074c340cdd16c709d8">00518</a> <span class="keywordtype">unsigned</span> <a class="code" href="classgpgpu__sim.html#a0924b4264f1c4b074c340cdd16c709d8">gpgpu_sim::finished_kernel</a>()
<a name="l00519"></a>00519 {
<a name="l00520"></a>00520     <span class="keywordflow">if</span>( <a class="code" href="classgpgpu__sim.html#a28b5fa6d972207eb18089cfe4b2e6d21">m_finished_kernel</a>.empty() ) 
<a name="l00521"></a>00521         <span class="keywordflow">return</span> 0;
<a name="l00522"></a>00522     <span class="keywordtype">unsigned</span> result = <a class="code" href="classgpgpu__sim.html#a28b5fa6d972207eb18089cfe4b2e6d21">m_finished_kernel</a>.front();
<a name="l00523"></a>00523     <a class="code" href="classgpgpu__sim.html#a28b5fa6d972207eb18089cfe4b2e6d21">m_finished_kernel</a>.pop_front();
<a name="l00524"></a>00524     <span class="keywordflow">return</span> result;
<a name="l00525"></a>00525 }
<a name="l00526"></a>00526 
<a name="l00527"></a><a class="code" href="classgpgpu__sim.html#a6b6204e113964723b581bde478966358">00527</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a6b6204e113964723b581bde478966358">gpgpu_sim::set_kernel_done</a>( <a class="code" href="classkernel__info__t.html">kernel_info_t</a> *kernel ) 
<a name="l00528"></a>00528 { 
<a name="l00529"></a>00529     <span class="keywordtype">unsigned</span> uid = kernel-&gt;<a class="code" href="classkernel__info__t.html#a3ad6a7212d90fa5650eae466002b5607">get_uid</a>();
<a name="l00530"></a>00530     <a class="code" href="classgpgpu__sim.html#a28b5fa6d972207eb18089cfe4b2e6d21">m_finished_kernel</a>.push_back(uid);
<a name="l00531"></a>00531     std::vector&lt;kernel_info_t*&gt;::iterator k;
<a name="l00532"></a>00532     <span class="keywordflow">for</span>( k=<a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.begin(); k!=<a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.end(); k++ ) {
<a name="l00533"></a>00533         <span class="keywordflow">if</span>( *k == kernel ) {
<a name="l00534"></a>00534             *k = NULL;
<a name="l00535"></a>00535             <span class="keywordflow">break</span>;
<a name="l00536"></a>00536         }
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538     assert( k != <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.end() ); 
<a name="l00539"></a>00539 }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 <span class="keywordtype">void</span> <a class="code" href="ptx__parser_8cc.html#adf535d8fe68e89347f67b88097ca9925">set_ptx_warp_size</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structcore__config.html">core_config</a> * warp_size);
<a name="l00542"></a>00542 
<a name="l00543"></a><a class="code" href="classgpgpu__sim.html#a039d8c9b33bdbc0b848a3fdaa03e17c4">00543</a> <a class="code" href="classgpgpu__sim.html#a039d8c9b33bdbc0b848a3fdaa03e17c4">gpgpu_sim::gpgpu_sim</a>( <span class="keyword">const</span> <a class="code" href="classgpgpu__sim__config.html">gpgpu_sim_config</a> &amp;config ) 
<a name="l00544"></a>00544     : <a class="code" href="classgpgpu__t.html">gpgpu_t</a>(config), m_config(config)
<a name="l00545"></a>00545 { 
<a name="l00546"></a>00546     <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a> = &amp;<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#ada6175f566cc3e707470ff3a672ff8f1">m_shader_config</a>;
<a name="l00547"></a>00547     <a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a> = &amp;<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#af7326b2b4f34bf91f7c77845d17c60f5">m_memory_config</a>;
<a name="l00548"></a>00548     <a class="code" href="ptx__parser_8cc.html#adf535d8fe68e89347f67b88097ca9925">set_ptx_warp_size</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>);
<a name="l00549"></a>00549     <a class="code" href="ptx-stats_8cc.html#a56718f59924cbfb40e2f7f78b2d11570">ptx_file_line_stats_create_exposed_latency_tracker</a>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>());
<a name="l00550"></a>00550 
<a name="l00551"></a>00551 <span class="preprocessor">#ifdef GPGPUSIM_POWER_MODEL</span>
<a name="l00552"></a>00552 <span class="preprocessor"></span>        <a class="code" href="classgpgpu__sim.html#a4eb5326d580ef502b72072c094d4a5a1">m_gpgpusim_wrapper</a> = <span class="keyword">new</span> <a class="code" href="classgpgpu__sim__wrapper.html">gpgpu_sim_wrapper</a>(config.<a class="code" href="structpower__config.html#a20c0b60d97a7fb9e9dccaec2f64da44b">g_power_simulation_enabled</a>,config.<a class="code" href="structpower__config.html#aef5f663a42429cc6989b38d926cb0c05">g_power_config_name</a>);
<a name="l00553"></a>00553 <span class="preprocessor">#endif</span>
<a name="l00554"></a>00554 <span class="preprocessor"></span>
<a name="l00555"></a>00555     <a class="code" href="classgpgpu__sim.html#abd087c9f98c28de4892944c61679b7c9">m_shader_stats</a> = <span class="keyword">new</span> <a class="code" href="classshader__core__stats.html">shader_core_stats</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>);
<a name="l00556"></a>00556     <a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a> = <span class="keyword">new</span> <a class="code" href="classmemory__stats__t.html">memory_stats_t</a>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>(),<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>,<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>);
<a name="l00557"></a>00557     <a class="code" href="classgpgpu__sim.html#acfba44b3a29f1f18932fddc331519417">average_pipeline_duty_cycle</a> = (<span class="keywordtype">float</span> *)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));
<a name="l00558"></a>00558     <a class="code" href="classgpgpu__sim.html#af033ac78e78f22fb04dab0f770a917c1">active_sms</a>=(<span class="keywordtype">float</span> *)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));
<a name="l00559"></a>00559     <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a> = <span class="keyword">new</span> <a class="code" href="classpower__stat__t.html">power_stat_t</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>,average_pipeline_duty_cycle,<a class="code" href="classgpgpu__sim.html#af033ac78e78f22fb04dab0f770a917c1">active_sms</a>,<a class="code" href="classgpgpu__sim.html#abd087c9f98c28de4892944c61679b7c9">m_shader_stats</a>,<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>,<a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a>);
<a name="l00560"></a>00560 
<a name="l00561"></a>00561     <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a> = 0;
<a name="l00562"></a>00562     <a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a> = 0;
<a name="l00563"></a>00563     <a class="code" href="classgpgpu__sim.html#ac06fdff711a756c289bd816563f9122e">gpu_tot_issued_cta</a> = 0;
<a name="l00564"></a>00564     <a class="code" href="classgpgpu__sim.html#a3615f1bdd864c5c1bdd81e7bd96dff44">gpu_deadlock</a> = <span class="keyword">false</span>;
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a> = <span class="keyword">new</span> <a class="code" href="classsimt__core__cluster.html">simt_core_cluster</a>*[<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>];
<a name="l00568"></a>00568     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) 
<a name="l00569"></a>00569         <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i] = <span class="keyword">new</span> <a class="code" href="classsimt__core__cluster.html">simt_core_cluster</a>(<span class="keyword">this</span>,i,<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>,<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>,<a class="code" href="classgpgpu__sim.html#abd087c9f98c28de4892944c61679b7c9">m_shader_stats</a>,<a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a>);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a> = <span class="keyword">new</span> <a class="code" href="classmemory__partition__unit.html">memory_partition_unit</a>*[<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>];
<a name="l00572"></a>00572     <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a> = <span class="keyword">new</span> <a class="code" href="classmemory__sub__partition.html">memory_sub_partition</a>*[<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#ab91f8fa2218ebaedf96e0713b79caa62">m_n_mem_sub_partition</a>];
<a name="l00573"></a>00573     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>;i++) {
<a name="l00574"></a>00574         <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i] = <span class="keyword">new</span> <a class="code" href="classmemory__partition__unit.html">memory_partition_unit</a>(i, <a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>, <a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a>);
<a name="l00575"></a>00575         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> p = 0; p &lt; <a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a94d168569ced756bfd18c2d49235e3c0">m_n_sub_partition_per_memory_channel</a>; p++) {
<a name="l00576"></a>00576             <span class="keywordtype">unsigned</span> submpid = i * <a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a94d168569ced756bfd18c2d49235e3c0">m_n_sub_partition_per_memory_channel</a> + p; 
<a name="l00577"></a>00577             <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[submpid] = <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;<a class="code" href="classmemory__partition__unit.html#a162a7235fc8e272db33fdd7400ac76fc">get_sub_partition</a>(p); 
<a name="l00578"></a>00578         }
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <a class="code" href="icnt__wrapper_8cc.html#af3acaa2666503a125a6dcb9036f82f4b">icnt_wrapper_init</a>();
<a name="l00582"></a>00582     <a class="code" href="icnt__wrapper_8cc.html#af74e120cfb8d2b5b69ec14a89673d0f5">icnt_create</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>,<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#ab91f8fa2218ebaedf96e0713b79caa62">m_n_mem_sub_partition</a>);
<a name="l00583"></a>00583 
<a name="l00584"></a>00584     <a class="code" href="visualizer_8cc.html#a13c5ec66c58e799da76cfd7371d89849">time_vector_create</a>(NUM_MEM_REQ_STAT);
<a name="l00585"></a>00585     fprintf(stdout, <span class="stringliteral">&quot;GPGPU-Sim uArch: performance model initialization complete.\n&quot;</span>);
<a name="l00586"></a>00586 
<a name="l00587"></a>00587     <a class="code" href="classgpgpu__sim.html#af83af52b0758b5eb76d17bcc95de5e60">m_running_kernels</a>.resize( config.<a class="code" href="classgpgpu__sim__config.html#a55c89cb8a90cce8d779fb4d4ffbeca18">max_concurrent_kernel</a>, NULL );
<a name="l00588"></a>00588     <a class="code" href="classgpgpu__sim.html#a3005d1a5650d7e1c77e5972869bba265">m_last_issued_kernel</a> = 0;
<a name="l00589"></a>00589     <a class="code" href="classgpgpu__sim.html#a231f61388c6ff2f6ab0d8f9bf7856e59">m_last_cluster_issue</a> = 0;
<a name="l00590"></a>00590     *average_pipeline_duty_cycle=0;
<a name="l00591"></a>00591     *<a class="code" href="classgpgpu__sim.html#af033ac78e78f22fb04dab0f770a917c1">active_sms</a>=0;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593     <a class="code" href="classgpgpu__sim.html#a5725e815592034a9fc95546c22e30001">last_liveness_message_time</a> = 0;
<a name="l00594"></a>00594 }
<a name="l00595"></a>00595 
<a name="l00596"></a><a class="code" href="classgpgpu__sim.html#af18901e36e273590af2990ef6e3dde40">00596</a> <span class="keywordtype">int</span> <a class="code" href="classgpgpu__sim.html#af18901e36e273590af2990ef6e3dde40">gpgpu_sim::shared_mem_size</a>()<span class="keyword"> const</span>
<a name="l00597"></a>00597 <span class="keyword"></span>{
<a name="l00598"></a>00598    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a09a8494f780facd68295a6a869c14bf7">gpgpu_shmem_size</a>;
<a name="l00599"></a>00599 }
<a name="l00600"></a>00600 
<a name="l00601"></a><a class="code" href="classgpgpu__sim.html#a397596c38e1df806c21a505728cdb8d9">00601</a> <span class="keywordtype">int</span> <a class="code" href="classgpgpu__sim.html#a397596c38e1df806c21a505728cdb8d9">gpgpu_sim::num_registers_per_core</a>()<span class="keyword"> const</span>
<a name="l00602"></a>00602 <span class="keyword"></span>{
<a name="l00603"></a>00603    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#ae0f353aa55143f981ac3251e374ba66d">gpgpu_shader_registers</a>;
<a name="l00604"></a>00604 }
<a name="l00605"></a>00605 
<a name="l00606"></a><a class="code" href="classgpgpu__sim.html#aa347ca000f0bf13498fed9185068993d">00606</a> <span class="keywordtype">int</span> <a class="code" href="classgpgpu__sim.html#aa347ca000f0bf13498fed9185068993d">gpgpu_sim::wrp_size</a>()<span class="keyword"> const</span>
<a name="l00607"></a>00607 <span class="keyword"></span>{
<a name="l00608"></a>00608    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a13edb2e659903146089ba0e75ce36ed1">warp_size</a>;
<a name="l00609"></a>00609 }
<a name="l00610"></a>00610 
<a name="l00611"></a><a class="code" href="classgpgpu__sim.html#ac4c8b6399e0f2a234b82a740b2499ed5">00611</a> <span class="keywordtype">int</span> <a class="code" href="classgpgpu__sim.html#ac4c8b6399e0f2a234b82a740b2499ed5">gpgpu_sim::shader_clock</a>()<span class="keyword"> const</span>
<a name="l00612"></a>00612 <span class="keyword"></span>{
<a name="l00613"></a>00613    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a851d96d7de44c1cc5da50e5c0e6acea8">core_freq</a>/1000;
<a name="l00614"></a>00614 }
<a name="l00615"></a>00615 
<a name="l00616"></a><a class="code" href="classgpgpu__sim.html#a74286d1db7e14722deca5d0fffcd98cd">00616</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a74286d1db7e14722deca5d0fffcd98cd">gpgpu_sim::set_prop</a>( cudaDeviceProp *prop )
<a name="l00617"></a>00617 {
<a name="l00618"></a>00618    <a class="code" href="classgpgpu__sim.html#ab479360620e99e89aea8e5a570cea350">m_cuda_properties</a> = prop;
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00621"></a><a class="code" href="classgpgpu__sim.html#a735efea7cb71b751d5b96f28a2797be3">00621</a> <span class="keyword">const</span> <span class="keyword">struct </span>cudaDeviceProp *<a class="code" href="classgpgpu__sim.html#a735efea7cb71b751d5b96f28a2797be3">gpgpu_sim::get_prop</a>()<span class="keyword"> const</span>
<a name="l00622"></a>00622 <span class="keyword"></span>{
<a name="l00623"></a>00623    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#ab479360620e99e89aea8e5a570cea350">m_cuda_properties</a>;
<a name="l00624"></a>00624 }
<a name="l00625"></a>00625 
<a name="l00626"></a><a class="code" href="classgpgpu__sim.html#a1d79c60562b260d25b469179c1f07565">00626</a> <span class="keyword">enum</span> <a class="code" href="abstract__hardware__model_8h.html#a3c3e5c822956df0d19e61cbb11c5b12b">divergence_support_t</a> <a class="code" href="classgpgpu__sim.html#a1d79c60562b260d25b469179c1f07565">gpgpu_sim::simd_model</a>()<span class="keyword"> const</span>
<a name="l00627"></a>00627 <span class="keyword"></span>{
<a name="l00628"></a>00628    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#abd0a32b3d0fec341d656455aff2f66b7">model</a>;
<a name="l00629"></a>00629 }
<a name="l00630"></a>00630 
<a name="l00631"></a><a class="code" href="classgpgpu__sim__config.html#a25faa4d46464e655a1af910785e7962c">00631</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim__config.html#a25faa4d46464e655a1af910785e7962c">gpgpu_sim_config::init_clock_domains</a>(<span class="keywordtype">void</span> ) 
<a name="l00632"></a>00632 {
<a name="l00633"></a>00633    sscanf(<a class="code" href="classgpgpu__sim__config.html#acb25ce82b374830bb10c066c9895bf50">gpgpu_clock_domains</a>,<span class="stringliteral">&quot;%lf:%lf:%lf:%lf&quot;</span>, 
<a name="l00634"></a>00634           &amp;<a class="code" href="classgpgpu__sim__config.html#a851d96d7de44c1cc5da50e5c0e6acea8">core_freq</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#a60f23f68341774718a284dd48764f58d">icnt_freq</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#ac5e03c771c59c491b27119f526b48338">l2_freq</a>, &amp;<a class="code" href="classgpgpu__sim__config.html#aa3c32c2bd7c8a1b7d5786b8e4749d294">dram_freq</a>);
<a name="l00635"></a>00635    <a class="code" href="classgpgpu__sim__config.html#a851d96d7de44c1cc5da50e5c0e6acea8">core_freq</a> = <a class="code" href="classgpgpu__sim__config.html#a851d96d7de44c1cc5da50e5c0e6acea8">core_freq</a> MhZ;
<a name="l00636"></a>00636    <a class="code" href="classgpgpu__sim__config.html#a60f23f68341774718a284dd48764f58d">icnt_freq</a> = <a class="code" href="classgpgpu__sim__config.html#a60f23f68341774718a284dd48764f58d">icnt_freq</a> MhZ;
<a name="l00637"></a>00637    <a class="code" href="classgpgpu__sim__config.html#ac5e03c771c59c491b27119f526b48338">l2_freq</a> = <a class="code" href="classgpgpu__sim__config.html#ac5e03c771c59c491b27119f526b48338">l2_freq</a> MhZ;
<a name="l00638"></a>00638    <a class="code" href="classgpgpu__sim__config.html#aa3c32c2bd7c8a1b7d5786b8e4749d294">dram_freq</a> = <a class="code" href="classgpgpu__sim__config.html#aa3c32c2bd7c8a1b7d5786b8e4749d294">dram_freq</a> MhZ;        
<a name="l00639"></a>00639    <a class="code" href="classgpgpu__sim__config.html#ae25c5c965dfa768a653d6fa0dfe855bf">core_period</a> = 1/<a class="code" href="classgpgpu__sim__config.html#a851d96d7de44c1cc5da50e5c0e6acea8">core_freq</a>;
<a name="l00640"></a>00640    <a class="code" href="classgpgpu__sim__config.html#a65573554f85fdd8f2fa1fdc4517ce46f">icnt_period</a> = 1/<a class="code" href="classgpgpu__sim__config.html#a60f23f68341774718a284dd48764f58d">icnt_freq</a>;
<a name="l00641"></a>00641    <a class="code" href="classgpgpu__sim__config.html#a38e02cbf3e10a39bf9289ccf23c6e720">dram_period</a> = 1/<a class="code" href="classgpgpu__sim__config.html#aa3c32c2bd7c8a1b7d5786b8e4749d294">dram_freq</a>;
<a name="l00642"></a>00642    <a class="code" href="classgpgpu__sim__config.html#ab9c0ee1d8e0607bf5897eb800c855921">l2_period</a> = 1/<a class="code" href="classgpgpu__sim__config.html#ac5e03c771c59c491b27119f526b48338">l2_freq</a>;
<a name="l00643"></a>00643    printf(<span class="stringliteral">&quot;GPGPU-Sim uArch: clock freqs: %lf:%lf:%lf:%lf\n&quot;</span>,<a class="code" href="classgpgpu__sim__config.html#a851d96d7de44c1cc5da50e5c0e6acea8">core_freq</a>,<a class="code" href="classgpgpu__sim__config.html#a60f23f68341774718a284dd48764f58d">icnt_freq</a>,<a class="code" href="classgpgpu__sim__config.html#ac5e03c771c59c491b27119f526b48338">l2_freq</a>,<a class="code" href="classgpgpu__sim__config.html#aa3c32c2bd7c8a1b7d5786b8e4749d294">dram_freq</a>);
<a name="l00644"></a>00644    printf(<span class="stringliteral">&quot;GPGPU-Sim uArch: clock periods: %.20lf:%.20lf:%.20lf:%.20lf\n&quot;</span>,<a class="code" href="classgpgpu__sim__config.html#ae25c5c965dfa768a653d6fa0dfe855bf">core_period</a>,<a class="code" href="classgpgpu__sim__config.html#a65573554f85fdd8f2fa1fdc4517ce46f">icnt_period</a>,<a class="code" href="classgpgpu__sim__config.html#ab9c0ee1d8e0607bf5897eb800c855921">l2_period</a>,<a class="code" href="classgpgpu__sim__config.html#a38e02cbf3e10a39bf9289ccf23c6e720">dram_period</a>);
<a name="l00645"></a>00645 }
<a name="l00646"></a>00646 
<a name="l00647"></a><a class="code" href="classgpgpu__sim.html#a0f0aebbce9c75f3e7e981704ef573e49">00647</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a0f0aebbce9c75f3e7e981704ef573e49">gpgpu_sim::reinit_clock_domains</a>(<span class="keywordtype">void</span>)
<a name="l00648"></a>00648 {
<a name="l00649"></a>00649    <a class="code" href="classgpgpu__sim.html#a5840f3f3c1a11c62db83377590e010d3">core_time</a> = 0;
<a name="l00650"></a>00650    <a class="code" href="classgpgpu__sim.html#aab8bb1075d2b3b3efe1276344481779c">dram_time</a> = 0;
<a name="l00651"></a>00651    <a class="code" href="classgpgpu__sim.html#a5c89a521309bc2067b0bffec44202b80">icnt_time</a> = 0;
<a name="l00652"></a>00652    <a class="code" href="classgpgpu__sim.html#ae395e9b9c1c97b104a317bb823716b7a">l2_time</a> = 0;
<a name="l00653"></a>00653 }
<a name="l00654"></a>00654 
<a name="l00655"></a><a class="code" href="classgpgpu__sim.html#ae0ac04cb22463a430960c98c4a647290">00655</a> <span class="keywordtype">bool</span> <a class="code" href="classgpgpu__sim.html#ae0ac04cb22463a430960c98c4a647290">gpgpu_sim::active</a>()
<a name="l00656"></a>00656 {
<a name="l00657"></a>00657     <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#abf31c7933a98dc2b807a141b49d27c67">gpu_max_cycle_opt</a> &amp;&amp; (<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a> + <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>) &gt;= <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#abf31c7933a98dc2b807a141b49d27c67">gpu_max_cycle_opt</a>) 
<a name="l00658"></a>00658        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00659"></a>00659     <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a3d4018b7d49bf987e5f2b9f688089d3b">gpu_max_insn_opt</a> &amp;&amp; (<a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a> + <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>) &gt;= <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a3d4018b7d49bf987e5f2b9f688089d3b">gpu_max_insn_opt</a>) 
<a name="l00660"></a>00660        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00661"></a>00661     <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#aa64d93e5e8e18ca93ecf1e97c8c18dc7">gpu_max_cta_opt</a> &amp;&amp; (<a class="code" href="classgpgpu__sim.html#ac06fdff711a756c289bd816563f9122e">gpu_tot_issued_cta</a> &gt;= <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#aa64d93e5e8e18ca93ecf1e97c8c18dc7">gpu_max_cta_opt</a>) )
<a name="l00662"></a>00662        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00663"></a>00663     <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#af4ac590abdbee73ea5852e9c2b8c0be9">gpu_deadlock_detect</a> &amp;&amp; <a class="code" href="classgpgpu__sim.html#a3615f1bdd864c5c1bdd81e7bd96dff44">gpu_deadlock</a>) 
<a name="l00664"></a>00664        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00665"></a>00665     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) 
<a name="l00666"></a>00666        <span class="keywordflow">if</span>( <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;get_not_completed()&gt;0 ) 
<a name="l00667"></a>00667            <span class="keywordflow">return</span> <span class="keyword">true</span>;;
<a name="l00668"></a>00668     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>;i++) 
<a name="l00669"></a>00669        <span class="keywordflow">if</span>( <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;busy()&gt;0 )
<a name="l00670"></a>00670            <span class="keywordflow">return</span> <span class="keyword">true</span>;;
<a name="l00671"></a>00671     <span class="keywordflow">if</span>( <a class="code" href="icnt__wrapper_8cc.html#a405fb781f8a6959b77d8fd00955a8fa6">icnt_busy</a>() )
<a name="l00672"></a>00672         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00673"></a>00673     <span class="keywordflow">if</span>( <a class="code" href="classgpgpu__sim.html#a401cfb3303dd888aa4600a3975065c5d">get_more_cta_left</a>() )
<a name="l00674"></a>00674         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00675"></a>00675     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00676"></a>00676 }
<a name="l00677"></a>00677 
<a name="l00678"></a><a class="code" href="classgpgpu__sim.html#a1bd81ee6f58d1b16e158450e2822470f">00678</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a1bd81ee6f58d1b16e158450e2822470f">gpgpu_sim::init</a>()
<a name="l00679"></a>00679 {
<a name="l00680"></a>00680     <span class="comment">// run a CUDA grid on the GPU microarchitecture simulator</span>
<a name="l00681"></a>00681     <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a> = 0;
<a name="l00682"></a>00682     <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a> = 0;
<a name="l00683"></a>00683     <a class="code" href="classgpgpu__sim.html#acc6317e515bc6c45324ae7d44a9a5b21">last_gpu_sim_insn</a> = 0;
<a name="l00684"></a>00684     <a class="code" href="classgpgpu__sim.html#a887770f78c3bf47e43b79479b52ab72a">m_total_cta_launched</a>=0;
<a name="l00685"></a>00685 
<a name="l00686"></a>00686     <a class="code" href="classgpgpu__sim.html#a0f0aebbce9c75f3e7e981704ef573e49">reinit_clock_domains</a>();
<a name="l00687"></a>00687     <a class="code" href="cuda-sim_8cc.html#acf8db40a012a2071391c886273b0943c">set_param_gpgpu_num_shaders</a>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>());
<a name="l00688"></a>00688     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) 
<a name="l00689"></a>00689        <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;reinit();
<a name="l00690"></a>00690     <a class="code" href="classgpgpu__sim.html#abd087c9f98c28de4892944c61679b7c9">m_shader_stats</a>-&gt;<a class="code" href="classshader__core__stats.html#a74b2208f2071c03b946ef9ecc14dce39">new_grid</a>();
<a name="l00691"></a>00691     <span class="comment">// initialize the control-flow, memory access, memory latency logger</span>
<a name="l00692"></a>00692     <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a66c3a28fc21786c229ceabe69ce3d2bc">g_visualizer_enabled</a>) {
<a name="l00693"></a>00693         <a class="code" href="stat-tool_8cc.html#aa598c27d14805a993e4d926c47617ef9">create_thread_CFlogger</a>( <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>(), <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a559092b8eaeffafe04a61f83cefe74d2">n_thread_per_shader</a>, 0, <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a> );
<a name="l00694"></a>00694     }
<a name="l00695"></a>00695     <a class="code" href="stat-tool_8cc.html#adaa165f9dc13a0730ac19ba8edd55b85">shader_CTA_count_create</a>( <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>(), <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a>);
<a name="l00696"></a>00696     <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a> != 0) {
<a name="l00697"></a>00697        <a class="code" href="stat-tool_8cc.html#a61a8727f95d9c6cf0d9674d56f160309">insn_warp_occ_create</a>( <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>(), <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a13edb2e659903146089ba0e75ce36ed1">warp_size</a> );
<a name="l00698"></a>00698        <a class="code" href="stat-tool_8cc.html#a9c9357c63093e6913b3fe668f4184831">shader_warp_occ_create</a>( <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>(), <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a13edb2e659903146089ba0e75ce36ed1">warp_size</a>, <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a>);
<a name="l00699"></a>00699        <a class="code" href="stat-tool_8cc.html#ae72e89b7eefaf234b6211453ce667e6a">shader_mem_acc_create</a>( <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>(), <a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>, 4, <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a>);
<a name="l00700"></a>00700        <a class="code" href="stat-tool_8cc.html#a211d44c7f48a8f980093d6e3464c2ec3">shader_mem_lat_create</a>( <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>(), <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a>);
<a name="l00701"></a>00701        <a class="code" href="stat-tool_8cc.html#ae82669e2a20c83c4c994b6fb336632a8">shader_cache_access_create</a>( <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a535c7872a7c415ccec20966bcfa0ca95">num_shader</a>(), 3, <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a>);
<a name="l00702"></a>00702        <a class="code" href="stat-tool_8cc.html#ad93f0aeec689859e3632456ce3db8af7">set_spill_interval</a> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a> * 40);
<a name="l00703"></a>00703     }
<a name="l00704"></a>00704 
<a name="l00705"></a>00705     <span class="keywordflow">if</span> (<a class="code" href="icnt__wrapper_8cc.html#a0ea7aad5a5b0023c8fb221bb4fe5b972">g_network_mode</a>)
<a name="l00706"></a>00706        <a class="code" href="icnt__wrapper_8cc.html#a56594d1fed91c5b8529a6d2a20b79406">icnt_init</a>();
<a name="l00707"></a>00707 
<a name="l00708"></a>00708     <span class="comment">// McPAT initialization function. Called on first launch of GPU</span>
<a name="l00709"></a>00709 <span class="preprocessor">#ifdef GPGPUSIM_POWER_MODEL</span>
<a name="l00710"></a>00710 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="structpower__config.html#a20c0b60d97a7fb9e9dccaec2f64da44b">g_power_simulation_enabled</a>){
<a name="l00711"></a>00711         <a class="code" href="power__interface_8cc.html#a0d0820bf34296ffde5e4374cd02f2d81">init_mcpat</a>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>, <a class="code" href="classgpgpu__sim.html#a4eb5326d580ef502b72072c094d4a5a1">m_gpgpusim_wrapper</a>, <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#ac1e50b3a3649dcc6eff807f526406674">gpu_stat_sample_freq</a>,  <a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a>, <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>);
<a name="l00712"></a>00712     }
<a name="l00713"></a>00713 <span class="preprocessor">#endif</span>
<a name="l00714"></a>00714 <span class="preprocessor"></span>}
<a name="l00715"></a>00715 
<a name="l00716"></a><a class="code" href="classgpgpu__sim.html#a7c90f8e94670b5cb5082d03586747c8b">00716</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a7c90f8e94670b5cb5082d03586747c8b">gpgpu_sim::update_stats</a>() {
<a name="l00717"></a>00717     <a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#ad05c3ca275c5c8996cb1a69635c30ed8">memlatstat_lat_pw</a>();
<a name="l00718"></a>00718     <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a> += <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>;
<a name="l00719"></a>00719     <a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a> += <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>;
<a name="l00720"></a>00720 }
<a name="l00721"></a>00721 
<a name="l00722"></a><a class="code" href="classgpgpu__sim.html#a2c34cae2c611e349fefd0b9538a916b1">00722</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a2c34cae2c611e349fefd0b9538a916b1">gpgpu_sim::print_stats</a>()
<a name="l00723"></a>00723 {
<a name="l00724"></a>00724     <a class="code" href="ptx-stats_8cc.html#acd9c51103832c047cd2b0e99fa554af3">ptx_file_line_stats_write_file</a>();
<a name="l00725"></a>00725     <a class="code" href="classgpgpu__sim.html#af35e1655e40ccd8080cec9d7fb4fee6f">gpu_print_stat</a>();
<a name="l00726"></a>00726 
<a name="l00727"></a>00727     <span class="keywordflow">if</span> (<a class="code" href="icnt__wrapper_8cc.html#a0ea7aad5a5b0023c8fb221bb4fe5b972">g_network_mode</a>) {
<a name="l00728"></a>00728         printf(<span class="stringliteral">&quot;----------------------------Interconnect-DETAILS--------------------------------\n&quot;</span> );
<a name="l00729"></a>00729         <a class="code" href="icnt__wrapper_8cc.html#ad62cadafc23b28caccc85e9c80a27c43">icnt_display_stats</a>();
<a name="l00730"></a>00730         <a class="code" href="icnt__wrapper_8cc.html#a99eb0a3630db1c85a9fae0190f7aa0e6">icnt_display_overall_stats</a>();
<a name="l00731"></a>00731         printf(<span class="stringliteral">&quot;----------------------------END-of-Interconnect-DETAILS-------------------------\n&quot;</span> );
<a name="l00732"></a>00732     }
<a name="l00733"></a>00733 }
<a name="l00734"></a>00734 
<a name="l00735"></a><a class="code" href="classgpgpu__sim.html#aa0fd3456a1d46877fa25fa1270938ed5">00735</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#aa0fd3456a1d46877fa25fa1270938ed5">gpgpu_sim::deadlock_check</a>()
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737    <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#af4ac590abdbee73ea5852e9c2b8c0be9">gpu_deadlock_detect</a> &amp;&amp; <a class="code" href="classgpgpu__sim.html#a3615f1bdd864c5c1bdd81e7bd96dff44">gpu_deadlock</a>) {
<a name="l00738"></a>00738       fflush(stdout);
<a name="l00739"></a>00739       printf(<span class="stringliteral">&quot;\n\nGPGPU-Sim uArch: ERROR ** deadlock detected: last writeback core %u @ gpu_sim_cycle %u (+ gpu_tot_sim_cycle %u) (%u cycles ago)\n&quot;</span>, 
<a name="l00740"></a>00740              <a class="code" href="classgpgpu__sim.html#a507872e9eb52f87ed7ef5ab742925f08">gpu_sim_insn_last_update_sid</a>,
<a name="l00741"></a>00741              (<span class="keywordtype">unsigned</span>) <a class="code" href="classgpgpu__sim.html#a4f54fede239c2915bc08accc9478faee">gpu_sim_insn_last_update</a>, (<span class="keywordtype">unsigned</span>) (<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>-<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>),
<a name="l00742"></a>00742              (<span class="keywordtype">unsigned</span>) (<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a> - gpu_sim_insn_last_update )); 
<a name="l00743"></a>00743       <span class="keywordtype">unsigned</span> num_cores=0;
<a name="l00744"></a>00744       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) {
<a name="l00745"></a>00745          <span class="keywordtype">unsigned</span> not_completed = <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#a095497ca2c487133684f463df9303a72">get_not_completed</a>();
<a name="l00746"></a>00746          <span class="keywordflow">if</span>( not_completed ) {
<a name="l00747"></a>00747              <span class="keywordflow">if</span> ( !num_cores )  {
<a name="l00748"></a>00748                  printf(<span class="stringliteral">&quot;GPGPU-Sim uArch: DEADLOCK  shader cores no longer committing instructions [core(# threads)]:\n&quot;</span> );
<a name="l00749"></a>00749                  printf(<span class="stringliteral">&quot;GPGPU-Sim uArch: DEADLOCK  &quot;</span>);
<a name="l00750"></a>00750                  <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#a35b46a4958d4560ed9d8587ab77ee47e">print_not_completed</a>(stdout);
<a name="l00751"></a>00751              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num_cores &lt; 8 ) {
<a name="l00752"></a>00752                  <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#a35b46a4958d4560ed9d8587ab77ee47e">print_not_completed</a>(stdout);
<a name="l00753"></a>00753              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num_cores &gt;= 8 ) {
<a name="l00754"></a>00754                  printf(<span class="stringliteral">&quot; + others ... &quot;</span>);
<a name="l00755"></a>00755              }
<a name="l00756"></a>00756              num_cores+=<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a104c9f8d770de04280e3b2ef3618ea01">n_simt_cores_per_cluster</a>;
<a name="l00757"></a>00757          }
<a name="l00758"></a>00758       }
<a name="l00759"></a>00759       printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00760"></a>00760       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>;i++) {
<a name="l00761"></a>00761          <span class="keywordtype">bool</span> busy = <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;<a class="code" href="classmemory__partition__unit.html#ad03349e1023a6bc4da19f271dfc92327">busy</a>();
<a name="l00762"></a>00762          <span class="keywordflow">if</span>( busy ) 
<a name="l00763"></a>00763              printf(<span class="stringliteral">&quot;GPGPU-Sim uArch DEADLOCK:  memory partition %u busy\n&quot;</span>, i );
<a name="l00764"></a>00764       }
<a name="l00765"></a>00765       <span class="keywordflow">if</span>( <a class="code" href="icnt__wrapper_8cc.html#a405fb781f8a6959b77d8fd00955a8fa6">icnt_busy</a>() ) {
<a name="l00766"></a>00766          printf(<span class="stringliteral">&quot;GPGPU-Sim uArch DEADLOCK:  iterconnect contains traffic\n&quot;</span>);
<a name="l00767"></a>00767          <a class="code" href="icnt__wrapper_8cc.html#aabe63194b1cac322cc83e6d24951702e">icnt_display_state</a>( stdout );
<a name="l00768"></a>00768       }
<a name="l00769"></a>00769       printf(<span class="stringliteral">&quot;\nRe-run the simulator in gdb and use debug routines in .gdbinit to debug this\n&quot;</span>);
<a name="l00770"></a>00770       fflush(stdout);
<a name="l00771"></a>00771       abort();
<a name="l00772"></a>00772    }
<a name="l00773"></a>00773 }
<a name="l00774"></a>00774 
<a name="l00776"></a><a class="code" href="classgpgpu__sim.html#ac7fe9e64e85de2c5ac508c6c0ab8c8f6">00776</a> std::string <a class="code" href="classgpgpu__sim.html#ac7fe9e64e85de2c5ac508c6c0ab8c8f6" title="printing the names and uids of a set of executed kernels (usually there is only one)...">gpgpu_sim::executed_kernel_info_string</a>() 
<a name="l00777"></a>00777 {
<a name="l00778"></a>00778    std::stringstream statout; 
<a name="l00779"></a>00779 
<a name="l00780"></a>00780    statout &lt;&lt; <span class="stringliteral">&quot;kernel_name = &quot;</span>; 
<a name="l00781"></a>00781    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; <a class="code" href="classgpgpu__sim.html#afc1b71662338443ba13284c02cdfa01c">m_executed_kernel_names</a>.size(); k++) {
<a name="l00782"></a>00782       statout &lt;&lt; <a class="code" href="classgpgpu__sim.html#afc1b71662338443ba13284c02cdfa01c">m_executed_kernel_names</a>[k] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>; 
<a name="l00783"></a>00783    }
<a name="l00784"></a>00784    statout &lt;&lt; std::endl; 
<a name="l00785"></a>00785    statout &lt;&lt; <span class="stringliteral">&quot;kernel_launch_uid = &quot;</span>;
<a name="l00786"></a>00786    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; <a class="code" href="classgpgpu__sim.html#a9a867fa7fa9cf65f514115251f195a80">m_executed_kernel_uids</a>.size(); k++) {
<a name="l00787"></a>00787       statout &lt;&lt; <a class="code" href="classgpgpu__sim.html#a9a867fa7fa9cf65f514115251f195a80">m_executed_kernel_uids</a>[k] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>; 
<a name="l00788"></a>00788    }
<a name="l00789"></a>00789    statout &lt;&lt; std::endl; 
<a name="l00790"></a>00790 
<a name="l00791"></a>00791    <span class="keywordflow">return</span> statout.str(); 
<a name="l00792"></a>00792 }
<a name="l00793"></a><a class="code" href="classgpgpu__sim.html#a90ac79c6c0f262b1bf89457c654de7b1">00793</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a90ac79c6c0f262b1bf89457c654de7b1">gpgpu_sim::set_cache_config</a>(std::string kernel_name,  <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71d">FuncCache</a> cacheConfig )
<a name="l00794"></a>00794 {
<a name="l00795"></a>00795     <a class="code" href="classgpgpu__sim.html#ae4bd9148a24d408d0fae68047fd745a1">m_special_cache_config</a>[kernel_name]=cacheConfig ;
<a name="l00796"></a>00796 }
<a name="l00797"></a>00797 
<a name="l00798"></a><a class="code" href="classgpgpu__sim.html#ac4194d04ae40b5ae1058a6b9b539cf31">00798</a> <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71d">FuncCache</a> <a class="code" href="classgpgpu__sim.html#ac4194d04ae40b5ae1058a6b9b539cf31">gpgpu_sim::get_cache_config</a>(std::string kernel_name)
<a name="l00799"></a>00799 {
<a name="l00800"></a>00800     <span class="keywordflow">for</span> (   std::map&lt;std::string, FuncCache&gt;::iterator iter = <a class="code" href="classgpgpu__sim.html#ae4bd9148a24d408d0fae68047fd745a1">m_special_cache_config</a>.begin(); iter != <a class="code" href="classgpgpu__sim.html#ae4bd9148a24d408d0fae68047fd745a1">m_special_cache_config</a>.end(); iter++){
<a name="l00801"></a>00801             std::string kernel= iter-&gt;first;
<a name="l00802"></a>00802             <span class="keywordflow">if</span> (kernel_name.compare(kernel) == 0){
<a name="l00803"></a>00803                 <span class="keywordflow">return</span> iter-&gt;second;
<a name="l00804"></a>00804             }
<a name="l00805"></a>00805     }
<a name="l00806"></a>00806     <span class="keywordflow">return</span> (<a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71d">FuncCache</a>)0;
<a name="l00807"></a>00807 }
<a name="l00808"></a>00808 
<a name="l00809"></a><a class="code" href="classgpgpu__sim.html#a7b4ffa47d88749172138c4fc9241ab6c">00809</a> <span class="keywordtype">bool</span> <a class="code" href="classgpgpu__sim.html#a7b4ffa47d88749172138c4fc9241ab6c">gpgpu_sim::has_special_cache_config</a>(std::string kernel_name)
<a name="l00810"></a>00810 {
<a name="l00811"></a>00811     <span class="keywordflow">for</span> (   std::map&lt;std::string, FuncCache&gt;::iterator iter = <a class="code" href="classgpgpu__sim.html#ae4bd9148a24d408d0fae68047fd745a1">m_special_cache_config</a>.begin(); iter != <a class="code" href="classgpgpu__sim.html#ae4bd9148a24d408d0fae68047fd745a1">m_special_cache_config</a>.end(); iter++){
<a name="l00812"></a>00812             std::string kernel= iter-&gt;first;
<a name="l00813"></a>00813             <span class="keywordflow">if</span> (kernel_name.compare(kernel) == 0){
<a name="l00814"></a>00814                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00815"></a>00815             }
<a name="l00816"></a>00816     }
<a name="l00817"></a>00817     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00818"></a>00818 }
<a name="l00819"></a>00819 
<a name="l00820"></a>00820 
<a name="l00821"></a><a class="code" href="classgpgpu__sim.html#a78749658fc02bf64cc610b01b9d8b224">00821</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a90ac79c6c0f262b1bf89457c654de7b1">gpgpu_sim::set_cache_config</a>(std::string kernel_name)
<a name="l00822"></a>00822 {
<a name="l00823"></a>00823     <span class="keywordflow">if</span>(<a class="code" href="classgpgpu__sim.html#a7b4ffa47d88749172138c4fc9241ab6c">has_special_cache_config</a>(kernel_name)){
<a name="l00824"></a>00824         <a class="code" href="classgpgpu__sim.html#a4448bd6d5b7480b3c10c35f1e3fe0314">change_cache_config</a>(<a class="code" href="classgpgpu__sim.html#ac4194d04ae40b5ae1058a6b9b539cf31">get_cache_config</a>(kernel_name));
<a name="l00825"></a>00825     }<span class="keywordflow">else</span>{
<a name="l00826"></a>00826         <a class="code" href="classgpgpu__sim.html#a4448bd6d5b7480b3c10c35f1e3fe0314">change_cache_config</a>(<a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71da8f01984d6a826ff76808769803fd36a9">FuncCachePreferNone</a>);
<a name="l00827"></a>00827     }
<a name="l00828"></a>00828 }
<a name="l00829"></a>00829 
<a name="l00830"></a>00830 
<a name="l00831"></a><a class="code" href="classgpgpu__sim.html#a4448bd6d5b7480b3c10c35f1e3fe0314">00831</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a4448bd6d5b7480b3c10c35f1e3fe0314">gpgpu_sim::change_cache_config</a>(<a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71d">FuncCache</a> <a class="code" href="classcache__config.html">cache_config</a>)
<a name="l00832"></a>00832 {
<a name="l00833"></a>00833     <span class="keywordflow">if</span>(cache_config != <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ad8a81f42d904e12c739b1059971e2b7c">get_cache_status</a>()){
<a name="l00834"></a>00834         printf(<span class="stringliteral">&quot;FLUSH L1 Cache at configuration change between kernels\n&quot;</span>);
<a name="l00835"></a>00835         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) {
<a name="l00836"></a>00836             <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#a42bbf8b6a62c3a916e0125b9b228fe5d">cache_flush</a>();
<a name="l00837"></a>00837         }
<a name="l00838"></a>00838     }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840     <span class="keywordflow">switch</span>(cache_config){
<a name="l00841"></a>00841     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71da8f01984d6a826ff76808769803fd36a9">FuncCachePreferNone</a>:
<a name="l00842"></a>00842         <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ae26db9b32b4590c1a2641379354de1c4">init</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ace912487411f31b4d5ea11348e8c0cb9">m_config_string</a>, <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71da8f01984d6a826ff76808769803fd36a9">FuncCachePreferNone</a>);
<a name="l00843"></a>00843         <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a09a8494f780facd68295a6a869c14bf7">gpgpu_shmem_size</a>=<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#abba0d3e8b4cb58024da0ef71448053ab">gpgpu_shmem_sizeDefault</a>;
<a name="l00844"></a>00844         <span class="keywordflow">break</span>;
<a name="l00845"></a>00845     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71da4303caae62030c0471c7573303b9b11a">FuncCachePreferL1</a>:
<a name="l00846"></a>00846         <span class="keywordflow">if</span>((<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#a3eea8daf1f70edeaba1b1ff63fe5f3ef">m_config_stringPrefL1</a> == NULL) || (<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#ac05dfc6d3a7ac2f83fbc14c44cbc771b">gpgpu_shmem_sizePrefL1</a> == (<span class="keywordtype">unsigned</span>)-1))
<a name="l00847"></a>00847         {
<a name="l00848"></a>00848             printf(<span class="stringliteral">&quot;WARNING: missing Preferred L1 configuration\n&quot;</span>);
<a name="l00849"></a>00849             <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ae26db9b32b4590c1a2641379354de1c4">init</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ace912487411f31b4d5ea11348e8c0cb9">m_config_string</a>, <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71da8f01984d6a826ff76808769803fd36a9">FuncCachePreferNone</a>);
<a name="l00850"></a>00850             <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a09a8494f780facd68295a6a869c14bf7">gpgpu_shmem_size</a>=<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#abba0d3e8b4cb58024da0ef71448053ab">gpgpu_shmem_sizeDefault</a>;
<a name="l00851"></a>00851 
<a name="l00852"></a>00852         }<span class="keywordflow">else</span>{
<a name="l00853"></a>00853             <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ae26db9b32b4590c1a2641379354de1c4">init</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#a3eea8daf1f70edeaba1b1ff63fe5f3ef">m_config_stringPrefL1</a>, <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71da4303caae62030c0471c7573303b9b11a">FuncCachePreferL1</a>);
<a name="l00854"></a>00854             <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a09a8494f780facd68295a6a869c14bf7">gpgpu_shmem_size</a>=<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#ac05dfc6d3a7ac2f83fbc14c44cbc771b">gpgpu_shmem_sizePrefL1</a>;
<a name="l00855"></a>00855         }
<a name="l00856"></a>00856         <span class="keywordflow">break</span>;
<a name="l00857"></a>00857     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71dad311263efa20dec20c6c9ed7a05cfe87">FuncCachePreferShared</a>:
<a name="l00858"></a>00858         <span class="keywordflow">if</span>((<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#a92331692f91269ed18a6da132a4301a0">m_config_stringPrefShared</a> == NULL) || (<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a8f5b04edfbc0a6ff2bd4c1400aaca87f">gpgpu_shmem_sizePrefShared</a> == (<span class="keywordtype">unsigned</span>)-1))
<a name="l00859"></a>00859         {
<a name="l00860"></a>00860             printf(<span class="stringliteral">&quot;WARNING: missing Preferred L1 configuration\n&quot;</span>);
<a name="l00861"></a>00861             <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ae26db9b32b4590c1a2641379354de1c4">init</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ace912487411f31b4d5ea11348e8c0cb9">m_config_string</a>, <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71da8f01984d6a826ff76808769803fd36a9">FuncCachePreferNone</a>);
<a name="l00862"></a>00862             <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a09a8494f780facd68295a6a869c14bf7">gpgpu_shmem_size</a>=<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#abba0d3e8b4cb58024da0ef71448053ab">gpgpu_shmem_sizeDefault</a>;
<a name="l00863"></a>00863         }<span class="keywordflow">else</span>{
<a name="l00864"></a>00864             <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#ae26db9b32b4590c1a2641379354de1c4">init</a>(<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a4068e626fdfc6e4b44a8fdd656a44b94">m_L1D_config</a>.<a class="code" href="classcache__config.html#a92331692f91269ed18a6da132a4301a0">m_config_stringPrefShared</a>, <a class="code" href="abstract__hardware__model_8h.html#aaa0670d4b9ad28c9f6dfc9c3f1aba71dad311263efa20dec20c6c9ed7a05cfe87">FuncCachePreferShared</a>);
<a name="l00865"></a>00865             <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a09a8494f780facd68295a6a869c14bf7">gpgpu_shmem_size</a>=<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structcore__config.html#a8f5b04edfbc0a6ff2bd4c1400aaca87f">gpgpu_shmem_sizePrefShared</a>;
<a name="l00866"></a>00866         }
<a name="l00867"></a>00867         <span class="keywordflow">break</span>;
<a name="l00868"></a>00868     <span class="keywordflow">default</span>:
<a name="l00869"></a>00869         <span class="keywordflow">break</span>;
<a name="l00870"></a>00870     }
<a name="l00871"></a>00871 }
<a name="l00872"></a>00872 
<a name="l00873"></a>00873 
<a name="l00874"></a><a class="code" href="classgpgpu__sim.html#a8a2802fc32d1056c964bf7fea2a4ca99">00874</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a8a2802fc32d1056c964bf7fea2a4ca99">gpgpu_sim::clear_executed_kernel_info</a>()
<a name="l00875"></a>00875 {
<a name="l00876"></a>00876    <a class="code" href="classgpgpu__sim.html#afc1b71662338443ba13284c02cdfa01c">m_executed_kernel_names</a>.clear();
<a name="l00877"></a>00877    <a class="code" href="classgpgpu__sim.html#a9a867fa7fa9cf65f514115251f195a80">m_executed_kernel_uids</a>.clear();
<a name="l00878"></a>00878 }
<a name="l00879"></a><a class="code" href="classgpgpu__sim.html#af35e1655e40ccd8080cec9d7fb4fee6f">00879</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#af35e1655e40ccd8080cec9d7fb4fee6f">gpgpu_sim::gpu_print_stat</a>() 
<a name="l00880"></a>00880 {  
<a name="l00881"></a>00881    FILE *statfout = stdout; 
<a name="l00882"></a>00882 
<a name="l00883"></a>00883    std::string kernel_info_str = <a class="code" href="classgpgpu__sim.html#ac7fe9e64e85de2c5ac508c6c0ab8c8f6" title="printing the names and uids of a set of executed kernels (usually there is only one)...">executed_kernel_info_string</a>(); 
<a name="l00884"></a>00884    fprintf(statfout, <span class="stringliteral">&quot;%s&quot;</span>, kernel_info_str.c_str()); 
<a name="l00885"></a>00885 
<a name="l00886"></a>00886    printf(<span class="stringliteral">&quot;gpu_sim_cycle = %lld\n&quot;</span>, <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>);
<a name="l00887"></a>00887    printf(<span class="stringliteral">&quot;gpu_sim_insn = %lld\n&quot;</span>, <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>);
<a name="l00888"></a>00888    printf(<span class="stringliteral">&quot;gpu_ipc = %12.4f\n&quot;</span>, (<span class="keywordtype">float</span>)<a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a> / <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>);
<a name="l00889"></a>00889    printf(<span class="stringliteral">&quot;gpu_tot_sim_cycle = %lld\n&quot;</span>, <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>);
<a name="l00890"></a>00890    printf(<span class="stringliteral">&quot;gpu_tot_sim_insn = %lld\n&quot;</span>, <a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a>+<a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>);
<a name="l00891"></a>00891    printf(<span class="stringliteral">&quot;gpu_tot_ipc = %12.4f\n&quot;</span>, (<span class="keywordtype">float</span>)(<a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a>+<a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>) / (<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>));
<a name="l00892"></a>00892    printf(<span class="stringliteral">&quot;gpu_tot_issued_cta = %lld\n&quot;</span>, <a class="code" href="classgpgpu__sim.html#ac06fdff711a756c289bd816563f9122e">gpu_tot_issued_cta</a>);
<a name="l00893"></a>00893 
<a name="l00894"></a>00894 
<a name="l00895"></a>00895 
<a name="l00896"></a>00896    <span class="comment">// performance counter for stalls due to congestion.</span>
<a name="l00897"></a>00897    printf(<span class="stringliteral">&quot;gpu_stall_dramfull = %d\n&quot;</span>, <a class="code" href="gpu-sim_8cc.html#a972893862ec1562dce0e686e5f6a6478">gpu_stall_dramfull</a>);
<a name="l00898"></a>00898    printf(<span class="stringliteral">&quot;gpu_stall_icnt2sh    = %d\n&quot;</span>, <a class="code" href="gpu-sim_8cc.html#a7dec6fdb323e8a20c72c0a5bdb75666b">gpu_stall_icnt2sh</a> );
<a name="l00899"></a>00899 
<a name="l00900"></a>00900    time_t curr_time;
<a name="l00901"></a>00901    time(&amp;curr_time);
<a name="l00902"></a>00902    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> elapsed_time = MAX( curr_time - <a class="code" href="gpgpusim__entrypoint_8cc.html#a6cd396c2f4082d9f8951840b9b2604fc">g_simulation_starttime</a>, 1 );
<a name="l00903"></a>00903    printf( <span class="stringliteral">&quot;gpu_total_sim_rate=%u\n&quot;</span>, (<span class="keywordtype">unsigned</span>)( ( <a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a> + <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a> ) / elapsed_time ) );
<a name="l00904"></a>00904 
<a name="l00905"></a>00905    <span class="comment">//shader_print_l1_miss_stat( stdout );</span>
<a name="l00906"></a>00906    <a class="code" href="classgpgpu__sim.html#a103e607feb049cf1c598910f56b4e858">shader_print_cache_stats</a>(stdout);
<a name="l00907"></a>00907 
<a name="l00908"></a>00908    <a class="code" href="classcache__stats.html">cache_stats</a> core_cache_stats;
<a name="l00909"></a>00909    core_cache_stats.<a class="code" href="classcache__stats.html#a55a554e14d70bac0582bcffdcb9a6a23">clear</a>();
<a name="l00910"></a>00910    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> i=0; i&lt;<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a264d5a7707bd8c8344a8c468f31679f0">num_cluster</a>(); i++){
<a name="l00911"></a>00911        <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#a503d300129a40249fb9dc41dfb13578e">get_cache_stats</a>(core_cache_stats);
<a name="l00912"></a>00912    }
<a name="l00913"></a>00913    printf(<span class="stringliteral">&quot;\nTotal_core_cache_stats:\n&quot;</span>);
<a name="l00914"></a>00914    core_cache_stats.<a class="code" href="classcache__stats.html#a22b57a4292b31fae1f54dfc61f4a26e6">print_stats</a>(stdout, <span class="stringliteral">&quot;Total_core_cache_stats_breakdown&quot;</span>);
<a name="l00915"></a>00915    <a class="code" href="classgpgpu__sim.html#a0e7a7bb137fc02ff10f351b9238c7ea2">shader_print_scheduler_stat</a>( stdout, <span class="keyword">false</span> );
<a name="l00916"></a>00916 
<a name="l00917"></a>00917    <a class="code" href="classgpgpu__sim.html#abd087c9f98c28de4892944c61679b7c9">m_shader_stats</a>-&gt;<a class="code" href="classshader__core__stats.html#ad40ffcdc2a884a42d19533edc8c3eb37">print</a>(stdout);
<a name="l00918"></a>00918 <span class="preprocessor">#ifdef GPGPUSIM_POWER_MODEL</span>
<a name="l00919"></a>00919 <span class="preprocessor"></span>   <span class="keywordflow">if</span>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="structpower__config.html#a20c0b60d97a7fb9e9dccaec2f64da44b">g_power_simulation_enabled</a>){
<a name="l00920"></a>00920        <a class="code" href="classgpgpu__sim.html#a4eb5326d580ef502b72072c094d4a5a1">m_gpgpusim_wrapper</a>-&gt;<a class="code" href="classgpgpu__sim__wrapper.html#a5920aded38a7fb80b317b690c41cd208">print_power_kernel_stats</a>(<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>, <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>, <a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a> + <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>, kernel_info_str, <span class="keyword">true</span> );
<a name="l00921"></a>00921        <a class="code" href="power__interface_8cc.html#ac51512480684f7e63cf2dfb261a82362">mcpat_reset_perf_count</a>(<a class="code" href="classgpgpu__sim.html#a4eb5326d580ef502b72072c094d4a5a1">m_gpgpusim_wrapper</a>);
<a name="l00922"></a>00922    }
<a name="l00923"></a>00923 <span class="preprocessor">#endif</span>
<a name="l00924"></a>00924 <span class="preprocessor"></span>
<a name="l00925"></a>00925    <span class="comment">// performance counter that are not local to one shader</span>
<a name="l00926"></a>00926    <a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#aba0e72625b6086b4d7321ac4411cb152">memlatstat_print</a>(<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>,<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>);
<a name="l00927"></a>00927    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>;i++)
<a name="l00928"></a>00928       <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;print(stdout);
<a name="l00929"></a>00929 
<a name="l00930"></a>00930    <span class="comment">// L2 cache stats</span>
<a name="l00931"></a>00931    <span class="keywordflow">if</span>(!<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a7fa0daff849c196f6a52f0b5d21c320c">m_L2_config</a>.<a class="code" href="classcache__config.html#a6e719909c6b7bea759a1d98bc49236b3">disabled</a>()){
<a name="l00932"></a>00932        <a class="code" href="classcache__stats.html">cache_stats</a> l2_stats;
<a name="l00933"></a>00933        <span class="keyword">struct </span><a class="code" href="structcache__sub__stats.html">cache_sub_stats</a> l2_css;
<a name="l00934"></a>00934        <span class="keyword">struct </span><a class="code" href="structcache__sub__stats.html">cache_sub_stats</a> total_l2_css;
<a name="l00935"></a>00935        l2_stats.<a class="code" href="classcache__stats.html#a55a554e14d70bac0582bcffdcb9a6a23">clear</a>();
<a name="l00936"></a>00936        l2_css.<a class="code" href="structcache__sub__stats.html#a4d2c836830777dc9daa30e14609d1e06">clear</a>();
<a name="l00937"></a>00937        total_l2_css.<a class="code" href="structcache__sub__stats.html#a4d2c836830777dc9daa30e14609d1e06">clear</a>();
<a name="l00938"></a>00938 
<a name="l00939"></a>00939        printf(<span class="stringliteral">&quot;\n========= L2 cache stats =========\n&quot;</span>);
<a name="l00940"></a>00940        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#ab91f8fa2218ebaedf96e0713b79caa62">m_n_mem_sub_partition</a>;i++){
<a name="l00941"></a>00941            <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#a729bdd93c041d476a52f4c228e72c198">accumulate_L2cache_stats</a>(l2_stats);
<a name="l00942"></a>00942            <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#a103ea9c8429690093c0ee3cf280bd816">get_L2cache_sub_stats</a>(l2_css);
<a name="l00943"></a>00943 
<a name="l00944"></a>00944            fprintf( stdout, <span class="stringliteral">&quot;L2_cache_bank[%d]: Access = %u, Miss = %u, Miss_rate = %.3lf, Pending_hits = %u, Reservation_fails = %u\n&quot;</span>,
<a name="l00945"></a>00945                     i, l2_css.<a class="code" href="structcache__sub__stats.html#ace6f26f297d2d5f01b0090c4395bf5a2">accesses</a>, l2_css.<a class="code" href="structcache__sub__stats.html#a0e3d75bc3ebd39ce854e11ec0f12e3e5">misses</a>, (<span class="keywordtype">double</span>)l2_css.<a class="code" href="structcache__sub__stats.html#a0e3d75bc3ebd39ce854e11ec0f12e3e5">misses</a> / (<span class="keywordtype">double</span>)l2_css.<a class="code" href="structcache__sub__stats.html#ace6f26f297d2d5f01b0090c4395bf5a2">accesses</a>, l2_css.<a class="code" href="structcache__sub__stats.html#acddbd29456bd4da96317d1dc6188cfd4">pending_hits</a>, l2_css.<a class="code" href="structcache__sub__stats.html#a2999db3914fe7f07500d257776bbd115">res_fails</a>);
<a name="l00946"></a>00946 
<a name="l00947"></a>00947            total_l2_css += l2_css;
<a name="l00948"></a>00948        }
<a name="l00949"></a>00949        <span class="keywordflow">if</span> (!<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a7fa0daff849c196f6a52f0b5d21c320c">m_L2_config</a>.<a class="code" href="classcache__config.html#a6e719909c6b7bea759a1d98bc49236b3">disabled</a>() &amp;&amp; <a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a7fa0daff849c196f6a52f0b5d21c320c">m_L2_config</a>.<a class="code" href="classcache__config.html#a1716474a5424cdcf3f1bff2dd8c8c4af">get_num_lines</a>()) {
<a name="l00950"></a>00950           <span class="comment">//L2c_print_cache_stat();</span>
<a name="l00951"></a>00951           printf(<span class="stringliteral">&quot;L2_total_cache_accesses = %u\n&quot;</span>, total_l2_css.<a class="code" href="structcache__sub__stats.html#ace6f26f297d2d5f01b0090c4395bf5a2">accesses</a>);
<a name="l00952"></a>00952           printf(<span class="stringliteral">&quot;L2_total_cache_misses = %u\n&quot;</span>, total_l2_css.<a class="code" href="structcache__sub__stats.html#a0e3d75bc3ebd39ce854e11ec0f12e3e5">misses</a>);
<a name="l00953"></a>00953           <span class="keywordflow">if</span>(total_l2_css.<a class="code" href="structcache__sub__stats.html#ace6f26f297d2d5f01b0090c4395bf5a2">accesses</a> &gt; 0)
<a name="l00954"></a>00954               printf(<span class="stringliteral">&quot;L2_total_cache_miss_rate = %.4lf\n&quot;</span>, (<span class="keywordtype">double</span>)total_l2_css.<a class="code" href="structcache__sub__stats.html#a0e3d75bc3ebd39ce854e11ec0f12e3e5">misses</a>/(<span class="keywordtype">double</span>)total_l2_css.<a class="code" href="structcache__sub__stats.html#ace6f26f297d2d5f01b0090c4395bf5a2">accesses</a>);
<a name="l00955"></a>00955           printf(<span class="stringliteral">&quot;L2_total_cache_pending_hits = %u\n&quot;</span>, total_l2_css.<a class="code" href="structcache__sub__stats.html#acddbd29456bd4da96317d1dc6188cfd4">pending_hits</a>);
<a name="l00956"></a>00956           printf(<span class="stringliteral">&quot;L2_total_cache_reservation_fails = %u\n&quot;</span>, total_l2_css.<a class="code" href="structcache__sub__stats.html#a2999db3914fe7f07500d257776bbd115">res_fails</a>);
<a name="l00957"></a>00957           printf(<span class="stringliteral">&quot;L2_total_cache_breakdown:\n&quot;</span>);
<a name="l00958"></a>00958           l2_stats.<a class="code" href="classcache__stats.html#a22b57a4292b31fae1f54dfc61f4a26e6">print_stats</a>(stdout, <span class="stringliteral">&quot;L2_cache_stats_breakdown&quot;</span>);
<a name="l00959"></a>00959           total_l2_css.<a class="code" href="structcache__sub__stats.html#a8a095a920a63375814e014fd0ff63890">print_port_stats</a>(stdout, <span class="stringliteral">&quot;L2_cache&quot;</span>);
<a name="l00960"></a>00960        }
<a name="l00961"></a>00961    }
<a name="l00962"></a>00962 
<a name="l00963"></a>00963    <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a6c73d5208f867ac45f6c30fec99a3a4c">gpgpu_cflog_interval</a> != 0) {
<a name="l00964"></a>00964       <a class="code" href="stat-tool_8cc.html#a7e4a90300111d52c09d8f9c261bfce87">spill_log_to_file</a> (stdout, 1, <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>);
<a name="l00965"></a>00965       <a class="code" href="stat-tool_8cc.html#a9be12a90a7ca16ebc0bd7438d1e8bf4e">insn_warp_occ_print</a>(stdout);
<a name="l00966"></a>00966    }
<a name="l00967"></a>00967    <span class="keywordflow">if</span> ( <a class="code" href="cuda-sim_8cc.html#a83c3cb2c869f2175b50647efbea208b7">gpgpu_ptx_instruction_classification</a> ) {
<a name="l00968"></a>00968       <a class="code" href="statwraper_8cpp.html#a31a504fbfe34d62b7c91519cf81feb7b">StatDisp</a>( <a class="code" href="cuda-sim_8cc.html#a97068d33bba55c50e14efd24c9983787">g_inst_classification_stat</a>[<a class="code" href="cuda-sim_8cc.html#a6a7385e1ea75c23142eb9efe45071a90">g_ptx_kernel_count</a>]);
<a name="l00969"></a>00969       <a class="code" href="statwraper_8cpp.html#a31a504fbfe34d62b7c91519cf81feb7b">StatDisp</a>( <a class="code" href="cuda-sim_8cc.html#a44255eb97b0682c1154a13e0d3fc2bf5">g_inst_op_classification_stat</a>[g_ptx_kernel_count]);
<a name="l00970"></a>00970    }
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 <span class="preprocessor">#ifdef GPGPUSIM_POWER_MODEL</span>
<a name="l00973"></a>00973 <span class="preprocessor"></span>   <span class="keywordflow">if</span>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="structpower__config.html#a20c0b60d97a7fb9e9dccaec2f64da44b">g_power_simulation_enabled</a>){
<a name="l00974"></a>00974        <a class="code" href="classgpgpu__sim.html#a4eb5326d580ef502b72072c094d4a5a1">m_gpgpusim_wrapper</a>-&gt;<a class="code" href="classgpgpu__sim__wrapper.html#a2da9c70941058ffba41bcc97e199dd0b">detect_print_steady_state</a>(1,<a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a>+<a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>);
<a name="l00975"></a>00975    }
<a name="l00976"></a>00976 <span class="preprocessor">#endif</span>
<a name="l00977"></a>00977 <span class="preprocessor"></span>
<a name="l00978"></a>00978 
<a name="l00979"></a>00979    <span class="comment">// Interconnect power stat print</span>
<a name="l00980"></a>00980    <span class="keywordtype">long</span> total_simt_to_mem=0;
<a name="l00981"></a>00981    <span class="keywordtype">long</span> total_mem_to_simt=0;
<a name="l00982"></a>00982    <span class="keywordtype">long</span> temp_stm=0;
<a name="l00983"></a>00983    <span class="keywordtype">long</span> temp_mts = 0;
<a name="l00984"></a>00984    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> i=0; i&lt;<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a264d5a7707bd8c8344a8c468f31679f0">num_cluster</a>(); i++){
<a name="l00985"></a>00985        <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#acf9ec05eadf047aa5eaa3cbb20888eb3">get_icnt_stats</a>(temp_stm, temp_mts);
<a name="l00986"></a>00986        total_simt_to_mem += temp_stm;
<a name="l00987"></a>00987        total_mem_to_simt += temp_mts;
<a name="l00988"></a>00988    }
<a name="l00989"></a>00989    printf(<span class="stringliteral">&quot;\nicnt_total_pkts_mem_to_simt=%ld\n&quot;</span>, total_mem_to_simt);
<a name="l00990"></a>00990    printf(<span class="stringliteral">&quot;icnt_total_pkts_simt_to_mem=%ld\n&quot;</span>, total_simt_to_mem);
<a name="l00991"></a>00991 
<a name="l00992"></a>00992    <a class="code" href="visualizer_8cc.html#a481886cd45c1f5c4bab931e9fe08f60f">time_vector_print</a>();
<a name="l00993"></a>00993    fflush(stdout);
<a name="l00994"></a>00994 
<a name="l00995"></a>00995    <a class="code" href="classgpgpu__sim.html#a8a2802fc32d1056c964bf7fea2a4ca99">clear_executed_kernel_info</a>(); 
<a name="l00996"></a>00996 }
<a name="l00997"></a>00997 
<a name="l00998"></a>00998 
<a name="l00999"></a>00999 <span class="comment">// performance counter that are not local to one shader</span>
<a name="l01000"></a><a class="code" href="classgpgpu__sim.html#aff6b4f85ae70f827ba903e4aa3112261">01000</a> <span class="keywordtype">unsigned</span> <a class="code" href="classgpgpu__sim.html#aff6b4f85ae70f827ba903e4aa3112261">gpgpu_sim::threads_per_core</a>()<span class="keyword"> const </span>
<a name="l01001"></a>01001 <span class="keyword"></span>{ 
<a name="l01002"></a>01002    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a559092b8eaeffafe04a61f83cefe74d2">n_thread_per_shader</a>; 
<a name="l01003"></a>01003 }
<a name="l01004"></a>01004 
<a name="l01005"></a><a class="code" href="classshader__core__ctx.html#a0b606ff67f6f29976f4b99f6a284c08a">01005</a> <span class="keywordtype">void</span> <a class="code" href="classshader__core__ctx.html#a0b606ff67f6f29976f4b99f6a284c08a">shader_core_ctx::mem_instruction_stats</a>(<span class="keyword">const</span> <a class="code" href="classwarp__inst__t.html">warp_inst_t</a> &amp;inst)
<a name="l01006"></a>01006 {
<a name="l01007"></a>01007     <span class="keywordtype">unsigned</span> active_count = inst.<a class="code" href="classwarp__inst__t.html#ae2478f41ed1d4ce60ceec0fa5a85623a">active_count</a>(); 
<a name="l01008"></a>01008     <span class="comment">//this breaks some encapsulation: the is_[space] functions, if you change those, change this.</span>
<a name="l01009"></a>01009     <span class="keywordflow">switch</span> (inst.<a class="code" href="classinst__t.html#a7830eb1cfe5a305e426d8530563c11da">space</a>.<a class="code" href="classmemory__space__t.html#a9aa8b2fabc2c16d1bfda090f27ab479c">get_type</a>()) {
<a name="l01010"></a>01010     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58ca434a5fd1a70c9dcbe2de96e9c602d265">undefined_space</a>:
<a name="l01011"></a>01011     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58cace58c5048875c8c8dd13a7621631b436">reg_space</a>:
<a name="l01012"></a>01012         <span class="keywordflow">break</span>;
<a name="l01013"></a>01013     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58cae27eca92c2d1dbb9adb9010e3fb7991c">shared_space</a>:
<a name="l01014"></a>01014         <a class="code" href="classshader__core__ctx.html#a7344892ff8c4dbe6d598648f720e3131">m_stats</a>-&gt;<a class="code" href="structshader__core__stats__pod.html#abd0fa14088586f71bd0e4939ec2b022f">gpgpu_n_shmem_insn</a> += active_count; 
<a name="l01015"></a>01015         <span class="keywordflow">break</span>;
<a name="l01016"></a>01016     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58ca445236c52ac314c07392ad430f155071">const_space</a>:
<a name="l01017"></a>01017         <a class="code" href="classshader__core__ctx.html#a7344892ff8c4dbe6d598648f720e3131">m_stats</a>-&gt;<a class="code" href="structshader__core__stats__pod.html#a51167d1f1abde004925e2fc695c0bbea">gpgpu_n_const_insn</a> += active_count;
<a name="l01018"></a>01018         <span class="keywordflow">break</span>;
<a name="l01019"></a>01019     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58ca5448bfae061180e01eb15ce5fec7bdcc">param_space_kernel</a>:
<a name="l01020"></a>01020     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58ca2f594286872ffab4d06ed69f65f111ac">param_space_local</a>:
<a name="l01021"></a>01021         <a class="code" href="classshader__core__ctx.html#a7344892ff8c4dbe6d598648f720e3131">m_stats</a>-&gt;<a class="code" href="structshader__core__stats__pod.html#aa1aedf0dc235de85343b75048061fe4b">gpgpu_n_param_insn</a> += active_count;
<a name="l01022"></a>01022         <span class="keywordflow">break</span>;
<a name="l01023"></a>01023     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58cadc0c390c9425eb280596cbf66b5d4d4f">tex_space</a>:
<a name="l01024"></a>01024         <a class="code" href="classshader__core__ctx.html#a7344892ff8c4dbe6d598648f720e3131">m_stats</a>-&gt;<a class="code" href="structshader__core__stats__pod.html#a8f6c1cde5e9c35dc0c916f7f811d1273">gpgpu_n_tex_insn</a> += active_count;
<a name="l01025"></a>01025         <span class="keywordflow">break</span>;
<a name="l01026"></a>01026     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58cade54d01d283e68c3e9c5b8d75b85e49e">global_space</a>:
<a name="l01027"></a>01027     <span class="keywordflow">case</span> <a class="code" href="abstract__hardware__model_8h.html#a1ad2169aaa8924fcc552447f38a5b58ca133ba819812b7d97221aed15cb830967">local_space</a>:
<a name="l01028"></a>01028         <span class="keywordflow">if</span>( inst.<a class="code" href="classinst__t.html#a4a4af03ae60d4f77f84d07c0264a5354">is_store</a>() )
<a name="l01029"></a>01029             <a class="code" href="classshader__core__ctx.html#a7344892ff8c4dbe6d598648f720e3131">m_stats</a>-&gt;<a class="code" href="structshader__core__stats__pod.html#a094b5edb0dc9920044980fdcadc36fcb">gpgpu_n_store_insn</a> += active_count;
<a name="l01030"></a>01030         <span class="keywordflow">else</span> 
<a name="l01031"></a>01031             <a class="code" href="classshader__core__ctx.html#a7344892ff8c4dbe6d598648f720e3131">m_stats</a>-&gt;<a class="code" href="structshader__core__stats__pod.html#a03b13edeb707df349da4a5918ab52164">gpgpu_n_load_insn</a> += active_count;
<a name="l01032"></a>01032         <span class="keywordflow">break</span>;
<a name="l01033"></a>01033     <span class="keywordflow">default</span>:
<a name="l01034"></a>01034         abort();
<a name="l01035"></a>01035     }
<a name="l01036"></a>01036 }
<a name="l01037"></a>01037 
<a name="l01038"></a>01038 
<a name="l01040"></a>01040 
<a name="l01048"></a><a class="code" href="classshader__core__ctx.html#acb30e6cc6cd5cc783d29b28c8aa1614d">01048</a> <span class="keywordtype">void</span> <a class="code" href="classshader__core__ctx.html#acb30e6cc6cd5cc783d29b28c8aa1614d">shader_core_ctx::issue_block2core</a>( <a class="code" href="classkernel__info__t.html">kernel_info_t</a> &amp;kernel ) 
<a name="l01049"></a>01049 {
<a name="l01050"></a>01050     <a class="code" href="classshader__core__ctx.html#ac6132ca24aaf9dfe6a773a5b000223af">set_max_cta</a>(kernel);
<a name="l01051"></a>01051 
<a name="l01052"></a>01052     <span class="comment">// find a free CTA context </span>
<a name="l01053"></a>01053     <span class="keywordtype">unsigned</span> free_cta_hw_id=(unsigned)-1;
<a name="l01054"></a>01054     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classshader__core__ctx.html#a22242c73ea577d8feda0674d2dc5d46a">kernel_max_cta_per_shader</a>;i++ ) {
<a name="l01055"></a>01055       <span class="keywordflow">if</span>( <a class="code" href="classshader__core__ctx.html#a0e6fc50e22a7c340b34556009f23de13">m_cta_status</a>[i]==0 ) {
<a name="l01056"></a>01056          free_cta_hw_id=i;
<a name="l01057"></a>01057          <span class="keywordflow">break</span>;
<a name="l01058"></a>01058       }
<a name="l01059"></a>01059     }
<a name="l01060"></a>01060     assert( free_cta_hw_id!=(<span class="keywordtype">unsigned</span>)-1 );
<a name="l01061"></a>01061 
<a name="l01062"></a>01062     <span class="comment">// determine hardware threads and warps that will be used for this CTA</span>
<a name="l01063"></a>01063     <span class="keywordtype">int</span> cta_size = kernel.<a class="code" href="classkernel__info__t.html#a7764459a63b3dd279dfb07576a1dc718">threads_per_cta</a>();
<a name="l01064"></a>01064 
<a name="l01065"></a>01065     <span class="comment">// hw warp id = hw thread id mod warp size, so we need to find a range </span>
<a name="l01066"></a>01066     <span class="comment">// of hardware thread ids corresponding to an integral number of hardware</span>
<a name="l01067"></a>01067     <span class="comment">// thread ids</span>
<a name="l01068"></a>01068     <span class="keywordtype">int</span> padded_cta_size = cta_size; 
<a name="l01069"></a>01069     <span class="keywordflow">if</span> (cta_size%<a class="code" href="classshader__core__ctx.html#aed6af92e2c101962bd5ffdb91196e684">m_config</a>-&gt;<a class="code" href="structcore__config.html#a13edb2e659903146089ba0e75ce36ed1">warp_size</a>)
<a name="l01070"></a>01070       padded_cta_size = ((cta_size/<a class="code" href="classshader__core__ctx.html#aed6af92e2c101962bd5ffdb91196e684">m_config</a>-&gt;<a class="code" href="structcore__config.html#a13edb2e659903146089ba0e75ce36ed1">warp_size</a>)+1)*(<a class="code" href="classshader__core__ctx.html#aed6af92e2c101962bd5ffdb91196e684">m_config</a>-&gt;<a class="code" href="structcore__config.html#a13edb2e659903146089ba0e75ce36ed1">warp_size</a>);
<a name="l01071"></a>01071     <span class="keywordtype">unsigned</span> start_thread = free_cta_hw_id * padded_cta_size;
<a name="l01072"></a>01072     <span class="keywordtype">unsigned</span> end_thread  = start_thread +  cta_size;
<a name="l01073"></a>01073 
<a name="l01074"></a>01074     <span class="comment">// reset the microarchitecture state of the selected hardware thread and warp contexts</span>
<a name="l01075"></a>01075     <a class="code" href="classshader__core__ctx.html#ac84a2e7f125c497a9a2c7fa09fe49624">reinit</a>(start_thread, end_thread,<span class="keyword">false</span>);
<a name="l01076"></a>01076      
<a name="l01077"></a>01077     <span class="comment">// initalize scalar threads and determine which hardware warps they are allocated to</span>
<a name="l01078"></a>01078     <span class="comment">// bind functional simulation state of threads to hardware resources (simulation) </span>
<a name="l01079"></a>01079     <a class="code" href="shader_8h.html#af7aedb40da16c61f2a7600189ba7798a">warp_set_t</a> warps;
<a name="l01080"></a>01080     <span class="keywordtype">unsigned</span> nthreads_in_block= 0;
<a name="l01081"></a>01081     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = start_thread; i&lt;end_thread; i++) {
<a name="l01082"></a>01082         <a class="code" href="classshader__core__ctx.html#a1a699f42a6fb2ad03d3520d6361131a8">m_threadState</a>[i].<a class="code" href="classthread__ctx__t.html#ab454d9215a73ad0678eb03184897142d">m_cta_id</a> = free_cta_hw_id;
<a name="l01083"></a>01083         <span class="keywordtype">unsigned</span> warp_id = i/<a class="code" href="classshader__core__ctx.html#aed6af92e2c101962bd5ffdb91196e684">m_config</a>-&gt;<a class="code" href="structcore__config.html#a13edb2e659903146089ba0e75ce36ed1">warp_size</a>;
<a name="l01084"></a>01084         nthreads_in_block += <a class="code" href="cuda-sim_8cc.html#a814facf1e22372309b98fe8d820a6e75">ptx_sim_init_thread</a>(kernel,&amp;<a class="code" href="classcore__t.html#a74ac58fba7a6ecd53ba31705ba5c38cd">m_thread</a>[i],<a class="code" href="classshader__core__ctx.html#a6477f9fb530039ae2de0307fcfedabbd">m_sid</a>,i,cta_size-(i-start_thread),<a class="code" href="classshader__core__ctx.html#aed6af92e2c101962bd5ffdb91196e684">m_config</a>-&gt;<a class="code" href="structshader__core__config.html#a559092b8eaeffafe04a61f83cefe74d2">n_thread_per_shader</a>,<span class="keyword">this</span>,free_cta_hw_id,warp_id,<a class="code" href="classshader__core__ctx.html#a1f3c751f1d15c5b428a267a2eb766005">m_cluster</a>-&gt;<a class="code" href="classsimt__core__cluster.html#ac7e64f61b1fd174595d93e815fcd4939">get_gpu</a>());
<a name="l01085"></a>01085         <a class="code" href="classshader__core__ctx.html#a1a699f42a6fb2ad03d3520d6361131a8">m_threadState</a>[i].<a class="code" href="classthread__ctx__t.html#a39b1b4dd36b2b6e6e13cbe08aa199498">m_active</a> = <span class="keyword">true</span>; 
<a name="l01086"></a>01086         warps.set( warp_id );
<a name="l01087"></a>01087     }
<a name="l01088"></a>01088     assert( nthreads_in_block &gt; 0 &amp;&amp; nthreads_in_block &lt;= m_config-&gt;n_thread_per_shader); <span class="comment">// should be at least one, but less than max</span>
<a name="l01089"></a>01089     <a class="code" href="classshader__core__ctx.html#a0e6fc50e22a7c340b34556009f23de13">m_cta_status</a>[free_cta_hw_id]=nthreads_in_block;
<a name="l01090"></a>01090 
<a name="l01091"></a>01091     <span class="comment">// now that we know which warps are used in this CTA, we can allocate</span>
<a name="l01092"></a>01092     <span class="comment">// resources for use in CTA-wide barrier operations</span>
<a name="l01093"></a>01093     <a class="code" href="classshader__core__ctx.html#ad1128668e0cb4889bcb9d257710e6f42">m_barriers</a>.<a class="code" href="classbarrier__set__t.html#a64b414a450f728db3c39f7f0ea9e203e">allocate_barrier</a>(free_cta_hw_id,warps);
<a name="l01094"></a>01094 
<a name="l01095"></a>01095     <span class="comment">// initialize the SIMT stacks and fetch hardware</span>
<a name="l01096"></a>01096     <a class="code" href="classshader__core__ctx.html#a8c68b7b9ffb958153af4d24008a9a4f7">init_warps</a>( free_cta_hw_id, start_thread, end_thread);
<a name="l01097"></a>01097     <a class="code" href="classshader__core__ctx.html#ababdc62e6b237cf2e3b2750138aef598">m_n_active_cta</a>++;
<a name="l01098"></a>01098 
<a name="l01099"></a>01099     <a class="code" href="stat-tool_8cc.html#a085feeb1890068c1c7340bca2617acfe">shader_CTA_count_log</a>(<a class="code" href="classshader__core__ctx.html#a6477f9fb530039ae2de0307fcfedabbd">m_sid</a>, 1);
<a name="l01100"></a>01100     printf(<span class="stringliteral">&quot;GPGPU-Sim uArch: core:%3d, cta:%2u initialized @(%lld,%lld)\n&quot;</span>, <a class="code" href="classshader__core__ctx.html#a6477f9fb530039ae2de0307fcfedabbd">m_sid</a>, free_cta_hw_id, <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>, <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a> );
<a name="l01101"></a>01101 }
<a name="l01102"></a>01102 
<a name="l01104"></a>01104 
<a name="l01105"></a><a class="code" href="classdram__t.html#a3a4e980fd03d52f2cf93ff109f4c73a4">01105</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#a3a4e980fd03d52f2cf93ff109f4c73a4">dram_t::dram_log</a>( <span class="keywordtype">int</span> task ) 
<a name="l01106"></a>01106 {
<a name="l01107"></a>01107    <span class="keywordflow">if</span> (task == SAMPLELOG) {
<a name="l01108"></a>01108       <a class="code" href="statwraper_8cpp.html#a9a15cae821158087f002fa31e1e78a51">StatAddSample</a>(<a class="code" href="classdram__t.html#a6519ad1fe753290b6d00ef63b6a88397">mrqq_Dist</a>, <a class="code" href="classdram__t.html#a07d2bdd1168650bcc47fdfb8fb41047f">que_length</a>());   
<a name="l01109"></a>01109    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (task == DUMPLOG) {
<a name="l01110"></a>01110       printf (<span class="stringliteral">&quot;Queue Length DRAM[%d] &quot;</span>,<span class="keywordtype">id</span>);<a class="code" href="statwraper_8cpp.html#a31a504fbfe34d62b7c91519cf81feb7b">StatDisp</a>(<a class="code" href="classdram__t.html#a6519ad1fe753290b6d00ef63b6a88397">mrqq_Dist</a>);
<a name="l01111"></a>01111    }
<a name="l01112"></a>01112 }
<a name="l01113"></a>01113 
<a name="l01114"></a>01114 <span class="comment">//Find next clock domain and increment its time</span>
<a name="l01115"></a><a class="code" href="classgpgpu__sim.html#a7db43fa862ccd92a08e80f471d3b50f0">01115</a> <span class="keywordtype">int</span> <a class="code" href="classgpgpu__sim.html#a7db43fa862ccd92a08e80f471d3b50f0">gpgpu_sim::next_clock_domain</a>(<span class="keywordtype">void</span>) 
<a name="l01116"></a>01116 {
<a name="l01117"></a>01117    <span class="keywordtype">double</span> smallest = min3(<a class="code" href="classgpgpu__sim.html#a5840f3f3c1a11c62db83377590e010d3">core_time</a>,<a class="code" href="classgpgpu__sim.html#a5c89a521309bc2067b0bffec44202b80">icnt_time</a>,<a class="code" href="classgpgpu__sim.html#aab8bb1075d2b3b3efe1276344481779c">dram_time</a>);
<a name="l01118"></a>01118    <span class="keywordtype">int</span> mask = 0x00;
<a name="l01119"></a>01119    <span class="keywordflow">if</span> ( <a class="code" href="classgpgpu__sim.html#ae395e9b9c1c97b104a317bb823716b7a">l2_time</a> &lt;= smallest ) {
<a name="l01120"></a>01120       smallest = <a class="code" href="classgpgpu__sim.html#ae395e9b9c1c97b104a317bb823716b7a">l2_time</a>;
<a name="l01121"></a>01121       mask |= <a class="code" href="basic__components_8h.html#a1fa13f1b3e45fe3e13c1f55c8240b3baa0adffb24dae0c41be5b803f4d444f066">L2</a> ;
<a name="l01122"></a>01122       <a class="code" href="classgpgpu__sim.html#ae395e9b9c1c97b104a317bb823716b7a">l2_time</a> += <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#ab9c0ee1d8e0607bf5897eb800c855921">l2_period</a>;
<a name="l01123"></a>01123    }
<a name="l01124"></a>01124    <span class="keywordflow">if</span> ( <a class="code" href="classgpgpu__sim.html#a5c89a521309bc2067b0bffec44202b80">icnt_time</a> &lt;= smallest ) {
<a name="l01125"></a>01125       mask |= ICNT;
<a name="l01126"></a>01126       <a class="code" href="classgpgpu__sim.html#a5c89a521309bc2067b0bffec44202b80">icnt_time</a> += <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a65573554f85fdd8f2fa1fdc4517ce46f">icnt_period</a>;
<a name="l01127"></a>01127    }
<a name="l01128"></a>01128    <span class="keywordflow">if</span> ( <a class="code" href="classgpgpu__sim.html#aab8bb1075d2b3b3efe1276344481779c">dram_time</a> &lt;= smallest ) {
<a name="l01129"></a>01129       mask |= <a class="code" href="classDRAM.html">DRAM</a>;
<a name="l01130"></a>01130       <a class="code" href="classgpgpu__sim.html#aab8bb1075d2b3b3efe1276344481779c">dram_time</a> += <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a38e02cbf3e10a39bf9289ccf23c6e720">dram_period</a>;
<a name="l01131"></a>01131    }
<a name="l01132"></a>01132    <span class="keywordflow">if</span> ( <a class="code" href="classgpgpu__sim.html#a5840f3f3c1a11c62db83377590e010d3">core_time</a> &lt;= smallest ) {
<a name="l01133"></a>01133       mask |= CORE;
<a name="l01134"></a>01134       <a class="code" href="classgpgpu__sim.html#a5840f3f3c1a11c62db83377590e010d3">core_time</a> += <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#ae25c5c965dfa768a653d6fa0dfe855bf">core_period</a>;
<a name="l01135"></a>01135    }
<a name="l01136"></a>01136    <span class="keywordflow">return</span> mask;
<a name="l01137"></a>01137 }
<a name="l01138"></a>01138 
<a name="l01139"></a><a class="code" href="classgpgpu__sim.html#a1c6285c5cb0f883d88f89daeb9617c87">01139</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a1c6285c5cb0f883d88f89daeb9617c87">gpgpu_sim::issue_block2core</a>()
<a name="l01140"></a>01140 {
<a name="l01141"></a>01141     <span class="keywordtype">unsigned</span> last_issued = <a class="code" href="classgpgpu__sim.html#a231f61388c6ff2f6ab0d8f9bf7856e59">m_last_cluster_issue</a>; 
<a name="l01142"></a>01142     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) {
<a name="l01143"></a>01143         <span class="keywordtype">unsigned</span> idx = (i + last_issued + 1) % <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;
<a name="l01144"></a>01144         <span class="keywordtype">unsigned</span> num = <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[idx]-&gt;<a class="code" href="classsimt__core__cluster.html#a133955339eb7a7e5ae878912eab41593">issue_block2core</a>();
<a name="l01145"></a>01145         <span class="keywordflow">if</span>( num ) {
<a name="l01146"></a>01146             <a class="code" href="classgpgpu__sim.html#a231f61388c6ff2f6ab0d8f9bf7856e59">m_last_cluster_issue</a>=idx;
<a name="l01147"></a>01147             <a class="code" href="classgpgpu__sim.html#a887770f78c3bf47e43b79479b52ab72a">m_total_cta_launched</a> += num;
<a name="l01148"></a>01148         }
<a name="l01149"></a>01149     }
<a name="l01150"></a>01150 }
<a name="l01151"></a>01151 
<a name="l01152"></a><a class="code" href="gpu-sim_8cc.html#ada92e09cc2222bdf76677c742d9596b5">01152</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="gpu-sim_8cc.html#ada92e09cc2222bdf76677c742d9596b5">g_single_step</a>=0; <span class="comment">// set this in gdb to single step the pipeline</span>
<a name="l01153"></a>01153 
<a name="l01154"></a><a class="code" href="classgpgpu__sim.html#a36c4ad6499b1a5212a88c17be524085b">01154</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#a36c4ad6499b1a5212a88c17be524085b">gpgpu_sim::cycle</a>()
<a name="l01155"></a>01155 {
<a name="l01156"></a>01156    <span class="keywordtype">int</span> clock_mask = <a class="code" href="classgpgpu__sim.html#a7db43fa862ccd92a08e80f471d3b50f0">next_clock_domain</a>();
<a name="l01157"></a>01157 
<a name="l01158"></a>01158    <span class="keywordflow">if</span> (clock_mask &amp; CORE ) {
<a name="l01159"></a>01159        <span class="comment">// shader core loading (pop from ICNT into core) follows CORE clock</span>
<a name="l01160"></a>01160       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) 
<a name="l01161"></a>01161          <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;icnt_cycle(); 
<a name="l01162"></a>01162    }
<a name="l01163"></a>01163     <span class="keywordflow">if</span> (clock_mask &amp; ICNT) {
<a name="l01164"></a>01164         <span class="comment">// pop from memory controller to interconnect</span>
<a name="l01165"></a>01165         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#ab91f8fa2218ebaedf96e0713b79caa62">m_n_mem_sub_partition</a>;i++) {
<a name="l01166"></a>01166             <a class="code" href="classmem__fetch.html">mem_fetch</a>* mf = <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#a096db6be7ab013446a907013366fc3a7">top</a>();
<a name="l01167"></a>01167             <span class="keywordflow">if</span> (mf) {
<a name="l01168"></a>01168                 <span class="keywordtype">unsigned</span> response_size = mf-&gt;<a class="code" href="classmem__fetch.html#a0e449bde79c7162ec62c433338ac0293">get_is_write</a>()?mf-&gt;<a class="code" href="classmem__fetch.html#a98e0c026a5fc79bd6a8aabe2204d5a33">get_ctrl_size</a>():mf-&gt;<a class="code" href="classmem__fetch.html#a8ae0f84b9c51d5f738964a53c54730b9">size</a>();
<a name="l01169"></a>01169                 <span class="keywordflow">if</span> ( ::<a class="code" href="icnt__wrapper_8cc.html#a452eab43997f8f535acb20d10fbcb464">icnt_has_buffer</a>( <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#ab014bf54b860bd0454c3e3a6da38758a">mem2device</a>(i), response_size ) ) {
<a name="l01170"></a>01170                     <span class="keywordflow">if</span> (!mf-&gt;<a class="code" href="classmem__fetch.html#a0e449bde79c7162ec62c433338ac0293">get_is_write</a>()) 
<a name="l01171"></a>01171                        mf-&gt;<a class="code" href="classmem__fetch.html#aceb62c5991cc8ca7ad40453b42b616aa">set_return_timestamp</a>(<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>);
<a name="l01172"></a>01172                     mf-&gt;<a class="code" href="classmem__fetch.html#acbda50764b3c8d6f79ffa279021253da">set_status</a>(IN_ICNT_TO_SHADER,<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>);<a class="code" href="icnt__wrapper_8cc.html#a1a69b2b074d5360a225312dfafa9b270"></a>
<a name="l01173"></a>01173 <a class="code" href="icnt__wrapper_8cc.html#a1a69b2b074d5360a225312dfafa9b270">                    ::icnt_push</a>( <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#ab014bf54b860bd0454c3e3a6da38758a">mem2device</a>(i), mf-&gt;<a class="code" href="classmem__fetch.html#ad17b8a2f85059a3068e55b9e51f273b1">get_tpc</a>(), mf, response_size );
<a name="l01174"></a>01174                     <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#ac8e55e7667127a2103453d9eab10fe71">pop</a>();
<a name="l01175"></a>01175                 } <span class="keywordflow">else</span> {
<a name="l01176"></a>01176                     <a class="code" href="gpu-sim_8cc.html#a7dec6fdb323e8a20c72c0a5bdb75666b">gpu_stall_icnt2sh</a>++;
<a name="l01177"></a>01177                 }
<a name="l01178"></a>01178             } <span class="keywordflow">else</span> {
<a name="l01179"></a>01179                <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#ac8e55e7667127a2103453d9eab10fe71">pop</a>();
<a name="l01180"></a>01180             }
<a name="l01181"></a>01181         }
<a name="l01182"></a>01182     }
<a name="l01183"></a>01183 
<a name="l01184"></a>01184    <span class="keywordflow">if</span> (clock_mask &amp; <a class="code" href="classDRAM.html">DRAM</a>) {
<a name="l01185"></a>01185       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>;i++){
<a name="l01186"></a>01186          <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;<a class="code" href="classmemory__partition__unit.html#a5a089f454d78b521e56435b6af5ad484">dram_cycle</a>(); <span class="comment">// Issue the dram command (scheduler + delay model)</span>
<a name="l01187"></a>01187          <span class="comment">// Update performance counters for DRAM</span>
<a name="l01188"></a>01188          <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;<a class="code" href="classmemory__partition__unit.html#a777672a7718f9be97f43d6d51f2f92cf">set_dram_power_stats</a>(<a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#a3bea23b134a2f2b1fbd78baad96b01e8">n_cmd</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i], <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#a5f67a10308dc7bc9db7f39b5c4c6c701">n_activity</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i],
<a name="l01189"></a>01189                         <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#ae1f1fdcf746f5d8f0c9a6bb48af2378c">n_nop</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i], <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#aa49b6cab35d6b4a8200b08b1bebf5391">n_act</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i], <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#a4b8c578337bd58b337c3cdd714c87c75">n_pre</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i],
<a name="l01190"></a>01190                         <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#a3abf43ec4127c72dbbc248b4f9939431">n_rd</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i], <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#a703505734fbf27c429b82c1383dfb315">n_wr</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i], <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#abd186c5e825bc5e4025f1dccc9d3cd96">n_req</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i]);
<a name="l01191"></a>01191       }
<a name="l01192"></a>01192    }
<a name="l01193"></a>01193 
<a name="l01194"></a>01194    <span class="comment">// L2 operations follow L2 clock domain</span>
<a name="l01195"></a>01195    <span class="keywordflow">if</span> (clock_mask &amp; <a class="code" href="basic__components_8h.html#a1fa13f1b3e45fe3e13c1f55c8240b3baa0adffb24dae0c41be5b803f4d444f066">L2</a>) {
<a name="l01196"></a>01196        <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#a465556332f25576563567086bba3cdfd">l2_cache_stats</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>].<a class="code" href="classcache__stats.html#a55a554e14d70bac0582bcffdcb9a6a23">clear</a>();
<a name="l01197"></a>01197       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#ab91f8fa2218ebaedf96e0713b79caa62">m_n_mem_sub_partition</a>;i++) {
<a name="l01198"></a>01198           <span class="comment">//move memory request from interconnect into memory partition (if not backed up)</span>
<a name="l01199"></a>01199           <span class="comment">//Note:This needs to be called in DRAM clock domain if there is no L2 cache in the system</span>
<a name="l01200"></a>01200           <span class="keywordflow">if</span> ( <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;full() ) {
<a name="l01201"></a>01201              <a class="code" href="gpu-sim_8cc.html#a972893862ec1562dce0e686e5f6a6478">gpu_stall_dramfull</a>++;
<a name="l01202"></a>01202           } <span class="keywordflow">else</span> {
<a name="l01203"></a>01203               <a class="code" href="classmem__fetch.html">mem_fetch</a>* mf = (<a class="code" href="classmem__fetch.html">mem_fetch</a>*) <a class="code" href="icnt__wrapper_8cc.html#a3be0c1bc60622d3d78c2c48e8d2a58de">icnt_pop</a>( <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#ab014bf54b860bd0454c3e3a6da38758a">mem2device</a>(i) );
<a name="l01204"></a>01204               <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#a7ba7c9c14d7a41328af9d0176c0cba39">push</a>( mf, <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a> + <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a> );
<a name="l01205"></a>01205           }
<a name="l01206"></a>01206           <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#a00e9b1e998aea1895ff9898e5ac3ae83">cache_cycle</a>(<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>);
<a name="l01207"></a>01207           <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#a729bdd93c041d476a52f4c228e72c198">accumulate_L2cache_stats</a>(<a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#a465556332f25576563567086bba3cdfd">l2_cache_stats</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>]);
<a name="l01208"></a>01208        }
<a name="l01209"></a>01209    }
<a name="l01210"></a>01210 
<a name="l01211"></a>01211    <span class="keywordflow">if</span> (clock_mask &amp; ICNT) {
<a name="l01212"></a>01212       <a class="code" href="icnt__wrapper_8cc.html#a04d8ef35d22c9bfb0f70d9756b05baad">icnt_transfer</a>();
<a name="l01213"></a>01213    }
<a name="l01214"></a>01214 
<a name="l01215"></a>01215    <span class="keywordflow">if</span> (clock_mask &amp; CORE) {
<a name="l01216"></a>01216       <span class="comment">// L1 cache + shader core pipeline stages</span>
<a name="l01217"></a>01217       <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#afa781be38143b7f0fb8e03cf70076ffd">core_cache_stats</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>].<a class="code" href="classcache__stats.html#a55a554e14d70bac0582bcffdcb9a6a23">clear</a>();
<a name="l01218"></a>01218       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) {
<a name="l01219"></a>01219          <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;get_not_completed() || <a class="code" href="classgpgpu__sim.html#a401cfb3303dd888aa4600a3975065c5d">get_more_cta_left</a>() ) {
<a name="l01220"></a>01220                <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#a4fd95f4e2be4b5ce7be423268859ab89">core_cycle</a>();
<a name="l01221"></a>01221                *<a class="code" href="classgpgpu__sim.html#af033ac78e78f22fb04dab0f770a917c1">active_sms</a>+=<a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#af507ab86c92c4f6eaee46a3907479364">get_n_active_sms</a>();
<a name="l01222"></a>01222          }
<a name="l01223"></a>01223          <span class="comment">// Update core icnt/cache stats for GPUWattch</span>
<a name="l01224"></a>01224          <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#acf9ec05eadf047aa5eaa3cbb20888eb3">get_icnt_stats</a>(<a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#ab8964ac87f0d1590ad88066df6efd664">n_simt_to_mem</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i], <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#a6c9248d1e01439f083459834f5442eb1">n_mem_to_simt</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>][i]);
<a name="l01225"></a>01225          <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#a503d300129a40249fb9dc41dfb13578e">get_cache_stats</a>(<a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>-&gt;<a class="code" href="classpower__stat__t.html#a389bc51d8d9aca73123e970309cffe7c">pwr_mem_stat</a>-&gt;<a class="code" href="structmem__power__stats__pod.html#afa781be38143b7f0fb8e03cf70076ffd">core_cache_stats</a>[<a class="code" href="power__stat_8h.html#a86971f8be3ef926454bdb681a2dd4323af7ee23dea7f0b11adf12abde2c32ecd0">CURRENT_STAT_IDX</a>]);
<a name="l01226"></a>01226       }
<a name="l01227"></a>01227       <span class="keywordtype">float</span> temp=0;
<a name="l01228"></a>01228       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a30949c72f2ebab12287ca4e801dc0b49">num_shader</a>();i++){
<a name="l01229"></a>01229         temp+=<a class="code" href="classgpgpu__sim.html#abd087c9f98c28de4892944c61679b7c9">m_shader_stats</a>-&gt;<a class="code" href="structshader__core__stats__pod.html#ad4288ea2d7b6e4c824717759943861a4">m_pipeline_duty_cycle</a>[i];
<a name="l01230"></a>01230       }
<a name="l01231"></a>01231       temp=temp/<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a30949c72f2ebab12287ca4e801dc0b49">num_shader</a>();
<a name="l01232"></a>01232       *<a class="code" href="classgpgpu__sim.html#acfba44b3a29f1f18932fddc331519417">average_pipeline_duty_cycle</a>=((*average_pipeline_duty_cycle)+temp);
<a name="l01233"></a>01233         <span class="comment">//cout&lt;&lt;&quot;Average pipeline duty cycle: &quot;&lt;&lt;*average_pipeline_duty_cycle&lt;&lt;endl;</span>
<a name="l01234"></a>01234 
<a name="l01235"></a>01235 
<a name="l01236"></a>01236       <span class="keywordflow">if</span>( g_single_step &amp;&amp; ((<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>) &gt;= g_single_step) ) {
<a name="l01237"></a>01237           <span class="keyword">asm</span>(<span class="stringliteral">&quot;int $03&quot;</span>);
<a name="l01238"></a>01238       }
<a name="l01239"></a>01239       <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>++;
<a name="l01240"></a>01240       <span class="keywordflow">if</span>( <a class="code" href="gpu-sim_8cc.html#a75c0324090738b7806b06294fc7671c7">g_interactive_debugger_enabled</a> ) 
<a name="l01241"></a>01241          <a class="code" href="classgpgpu__sim.html#a425a7739a0af3a7a8264a813ee35e355" title="interactive debugger">gpgpu_debug</a>();
<a name="l01242"></a>01242 
<a name="l01243"></a>01243       <span class="comment">// McPAT main cycle (interface with McPAT)</span>
<a name="l01244"></a>01244 <span class="preprocessor">#ifdef GPGPUSIM_POWER_MODEL</span>
<a name="l01245"></a>01245 <span class="preprocessor"></span>      <span class="keywordflow">if</span>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="structpower__config.html#a20c0b60d97a7fb9e9dccaec2f64da44b">g_power_simulation_enabled</a>){
<a name="l01246"></a>01246           <a class="code" href="power__interface_8cc.html#a982a3ed7135bc2a01ca6140d62448b50">mcpat_cycle</a>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>, <a class="code" href="classgpgpu__sim.html#a40a558768ff4d88bb61dd5ee2f6ab4b9" title="Get shader core configuration.">getShaderCoreConfig</a>(), <a class="code" href="classgpgpu__sim.html#a4eb5326d580ef502b72072c094d4a5a1">m_gpgpusim_wrapper</a>, <a class="code" href="classgpgpu__sim.html#a203196ddbfe112cd4fdcae13bfdfa1f7">m_power_stats</a>, <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#ac1e50b3a3649dcc6eff807f526406674">gpu_stat_sample_freq</a>, <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>, <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>, <a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a>, <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>);
<a name="l01247"></a>01247       }
<a name="l01248"></a>01248 <span class="preprocessor">#endif</span>
<a name="l01249"></a>01249 <span class="preprocessor"></span>
<a name="l01250"></a>01250       <a class="code" href="classgpgpu__sim.html#a1c6285c5cb0f883d88f89daeb9617c87">issue_block2core</a>();
<a name="l01251"></a>01251       
<a name="l01252"></a>01252       <span class="comment">// Depending on configuration, flush the caches once all of threads are completed.</span>
<a name="l01253"></a>01253       <span class="keywordtype">int</span> all_threads_complete = 1;
<a name="l01254"></a>01254       <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a66cfb0ba782ce61bef5c164dd1aa51ae">gpgpu_flush_l1_cache</a>) {
<a name="l01255"></a>01255          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) {
<a name="l01256"></a>01256             <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;get_not_completed() == 0)
<a name="l01257"></a>01257                 <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;<a class="code" href="classsimt__core__cluster.html#a42bbf8b6a62c3a916e0125b9b228fe5d">cache_flush</a>();
<a name="l01258"></a>01258             <span class="keywordflow">else</span>
<a name="l01259"></a>01259                all_threads_complete = 0 ;
<a name="l01260"></a>01260          }
<a name="l01261"></a>01261       }
<a name="l01262"></a>01262 
<a name="l01263"></a>01263       <span class="keywordflow">if</span>(<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a4decb22d9f326ecbe25d58b5290e46a9">gpgpu_flush_l2_cache</a>){
<a name="l01264"></a>01264           <span class="keywordflow">if</span>(!<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a66cfb0ba782ce61bef5c164dd1aa51ae">gpgpu_flush_l1_cache</a>){
<a name="l01265"></a>01265               <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) {
<a name="l01266"></a>01266                   <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[i]-&gt;get_not_completed() != 0){
<a name="l01267"></a>01267                       all_threads_complete = 0 ;
<a name="l01268"></a>01268                       <span class="keywordflow">break</span>;
<a name="l01269"></a>01269                   }
<a name="l01270"></a>01270               }
<a name="l01271"></a>01271           }
<a name="l01272"></a>01272 
<a name="l01273"></a>01273          <span class="keywordflow">if</span> (all_threads_complete &amp;&amp; !<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a7fa0daff849c196f6a52f0b5d21c320c">m_L2_config</a>.<a class="code" href="classcache__config.html#a6e719909c6b7bea759a1d98bc49236b3">disabled</a>() ) {
<a name="l01274"></a>01274             printf(<span class="stringliteral">&quot;Flushed L2 caches...\n&quot;</span>);
<a name="l01275"></a>01275             <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a7fa0daff849c196f6a52f0b5d21c320c">m_L2_config</a>.<a class="code" href="classcache__config.html#a1716474a5424cdcf3f1bff2dd8c8c4af">get_num_lines</a>()) {
<a name="l01276"></a>01276                <span class="keywordtype">int</span> dlc = 0;
<a name="l01277"></a>01277                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>;i++) {
<a name="l01278"></a>01278                   dlc = <a class="code" href="classgpgpu__sim.html#a7ce6947d9332d71480b33f03a7ca9e4d">m_memory_sub_partition</a>[i]-&gt;<a class="code" href="classmemory__sub__partition.html#af761d115eb7b2dadd37c9113ff58e50b">flushL2</a>();
<a name="l01279"></a>01279                   assert (dlc == 0); <span class="comment">// need to model actual writes to DRAM here</span>
<a name="l01280"></a>01280                   printf(<span class="stringliteral">&quot;Dirty lines flushed from L2 %d is %d\n&quot;</span>, i, dlc  );
<a name="l01281"></a>01281                }
<a name="l01282"></a>01282             }
<a name="l01283"></a>01283          }
<a name="l01284"></a>01284       }
<a name="l01285"></a>01285 
<a name="l01286"></a>01286       <span class="keywordflow">if</span> (!(<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a> % <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#ac1e50b3a3649dcc6eff807f526406674">gpu_stat_sample_freq</a>)) {
<a name="l01287"></a>01287          time_t days, hrs, minutes, sec;
<a name="l01288"></a>01288          time_t curr_time;
<a name="l01289"></a>01289          time(&amp;curr_time);
<a name="l01290"></a>01290          <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>  elapsed_time = MAX(curr_time - <a class="code" href="gpgpusim__entrypoint_8cc.html#a6cd396c2f4082d9f8951840b9b2604fc">g_simulation_starttime</a>, 1);
<a name="l01291"></a>01291          <span class="keywordflow">if</span> ( (elapsed_time - <a class="code" href="classgpgpu__sim.html#a5725e815592034a9fc95546c22e30001">last_liveness_message_time</a>) &gt;= <a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a760c7c5962ec1744c05d1c9cd840a4e9">liveness_message_freq</a> ) {
<a name="l01292"></a>01292             days    = elapsed_time/(3600*24);
<a name="l01293"></a>01293             hrs     = elapsed_time/3600 - 24*days;
<a name="l01294"></a>01294             minutes = elapsed_time/60 - 60*(hrs + 24*days);
<a name="l01295"></a>01295             sec = elapsed_time - 60*(minutes + 60*(hrs + 24*days));
<a name="l01296"></a>01296             printf(<span class="stringliteral">&quot;GPGPU-Sim uArch: cycles simulated: %lld  inst.: %lld (ipc=%4.1f) sim_rate=%u (inst/sec) elapsed = %u:%u:%02u:%02u / %s&quot;</span>, 
<a name="l01297"></a>01297                    <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a> + <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>, <a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a> + <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>, 
<a name="l01298"></a>01298                    (<span class="keywordtype">double</span>)<a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>/(<span class="keywordtype">double</span>)<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>,
<a name="l01299"></a>01299                    (<span class="keywordtype">unsigned</span>)((<a class="code" href="classgpgpu__sim.html#a0006e6dbc2793ecdb29ec6fe3149949a">gpu_tot_sim_insn</a>+<a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>) / elapsed_time),
<a name="l01300"></a>01300                    (<span class="keywordtype">unsigned</span>)days,(<span class="keywordtype">unsigned</span>)hrs,(<span class="keywordtype">unsigned</span>)minutes,(<span class="keywordtype">unsigned</span>)sec,
<a name="l01301"></a>01301                    ctime(&amp;curr_time));
<a name="l01302"></a>01302             fflush(stdout);
<a name="l01303"></a>01303             <a class="code" href="classgpgpu__sim.html#a5725e815592034a9fc95546c22e30001">last_liveness_message_time</a> = elapsed_time; 
<a name="l01304"></a>01304          }
<a name="l01305"></a>01305          <a class="code" href="classgpgpu__sim.html#a2e740129b33965bbde86c3c6eb0996bb">visualizer_printstat</a>();
<a name="l01306"></a>01306          <a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#ad05c3ca275c5c8996cb1a69635c30ed8">memlatstat_lat_pw</a>();
<a name="l01307"></a>01307          <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a2da856acc5bdbe958d4a524876353899">gpgpu_runtime_stat</a> &amp;&amp; (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a8102cdecedad9f7d2f7e18d46987037c">gpu_runtime_stat_flag</a> != 0) ) {
<a name="l01308"></a>01308             <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a8102cdecedad9f7d2f7e18d46987037c">gpu_runtime_stat_flag</a> &amp; GPU_RSTAT_BW_STAT) {
<a name="l01309"></a>01309                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>;i++) 
<a name="l01310"></a>01310                   <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;print_stat(stdout);
<a name="l01311"></a>01311                printf(<span class="stringliteral">&quot;maxmrqlatency = %d \n&quot;</span>, <a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#abfb8bcbf94b02e37ee15f73cc683fb0f">max_mrq_latency</a>);
<a name="l01312"></a>01312                printf(<span class="stringliteral">&quot;maxmflatency = %d \n&quot;</span>, <a class="code" href="classgpgpu__sim.html#ac501fe6c98ebf35d9bfa87c13cecc81a">m_memory_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#a27130ef2ba0ff13cfcff6519ef62f651">max_mf_latency</a>);
<a name="l01313"></a>01313             }
<a name="l01314"></a>01314             <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a8102cdecedad9f7d2f7e18d46987037c">gpu_runtime_stat_flag</a> &amp; GPU_RSTAT_SHD_INFO) 
<a name="l01315"></a>01315                <a class="code" href="classgpgpu__sim.html#a0497a5e57600668cc187aeed3d6d08a9">shader_print_runtime_stat</a>( stdout );
<a name="l01316"></a>01316             <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a8102cdecedad9f7d2f7e18d46987037c">gpu_runtime_stat_flag</a> &amp; GPU_RSTAT_L1MISS) 
<a name="l01317"></a>01317                <a class="code" href="classgpgpu__sim.html#a5dbd4a0cd5c6bdb4d5995c5c0ecea592">shader_print_l1_miss_stat</a>( stdout );
<a name="l01318"></a>01318             <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#a8102cdecedad9f7d2f7e18d46987037c">gpu_runtime_stat_flag</a> &amp; GPU_RSTAT_SCHED) 
<a name="l01319"></a>01319                <a class="code" href="classgpgpu__sim.html#a0e7a7bb137fc02ff10f351b9238c7ea2">shader_print_scheduler_stat</a>( stdout, <span class="keyword">false</span> );
<a name="l01320"></a>01320          }
<a name="l01321"></a>01321       }
<a name="l01322"></a>01322 
<a name="l01323"></a>01323       <span class="keywordflow">if</span> (!(<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a> % 20000)) {
<a name="l01324"></a>01324          <span class="comment">// deadlock detection </span>
<a name="l01325"></a>01325          <span class="keywordflow">if</span> (<a class="code" href="classgpgpu__sim.html#aa494c7776eb4ceb95e0e31c7763ccb8a">m_config</a>.<a class="code" href="classgpgpu__sim__config.html#af4ac590abdbee73ea5852e9c2b8c0be9">gpu_deadlock_detect</a> &amp;&amp; <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a> == <a class="code" href="classgpgpu__sim.html#acc6317e515bc6c45324ae7d44a9a5b21">last_gpu_sim_insn</a>) {
<a name="l01326"></a>01326             <a class="code" href="classgpgpu__sim.html#a3615f1bdd864c5c1bdd81e7bd96dff44">gpu_deadlock</a> = <span class="keyword">true</span>;
<a name="l01327"></a>01327          } <span class="keywordflow">else</span> {
<a name="l01328"></a>01328             <a class="code" href="classgpgpu__sim.html#acc6317e515bc6c45324ae7d44a9a5b21">last_gpu_sim_insn</a> = <a class="code" href="classgpgpu__sim.html#aae128ab46a57f0e5f322761135523e92">gpu_sim_insn</a>;
<a name="l01329"></a>01329          }
<a name="l01330"></a>01330       }
<a name="l01331"></a>01331       <a class="code" href="stat-tool_8cc.html#aa118e7c26305c2e5f76cf09bcd5548db">try_snap_shot</a>(<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>);
<a name="l01332"></a>01332       <a class="code" href="stat-tool_8cc.html#a7e4a90300111d52c09d8f9c261bfce87">spill_log_to_file</a> (stdout, 0, <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>);
<a name="l01333"></a>01333    }
<a name="l01334"></a>01334 }
<a name="l01335"></a>01335 
<a name="l01336"></a>01336 
<a name="l01337"></a><a class="code" href="classshader__core__ctx.html#a71c39928f73c532b5c6e74f9a52263ba">01337</a> <span class="keywordtype">void</span> <a class="code" href="classshader__core__ctx.html#a71c39928f73c532b5c6e74f9a52263ba">shader_core_ctx::dump_warp_state</a>( FILE *fout )<span class="keyword"> const</span>
<a name="l01338"></a>01338 <span class="keyword"></span>{
<a name="l01339"></a>01339    fprintf(fout, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01340"></a>01340    fprintf(fout, <span class="stringliteral">&quot;per warp functional simulation status:\n&quot;</span>);
<a name="l01341"></a>01341    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> w=0; w &lt; <a class="code" href="classshader__core__ctx.html#aed6af92e2c101962bd5ffdb91196e684">m_config</a>-&gt;<a class="code" href="structshader__core__config.html#a9cacf20235b1c230a4d99920fc4b577e">max_warps_per_shader</a>; w++ ) 
<a name="l01342"></a>01342        <a class="code" href="classshader__core__ctx.html#aee614f5a61e2900604f3b28e71a23947">m_warp</a>[w].print(fout);
<a name="l01343"></a>01343 }
<a name="l01344"></a>01344 
<a name="l01345"></a><a class="code" href="classgpgpu__sim.html#ad9c12944269b34b1365e5feda0eb8a25">01345</a> <span class="keywordtype">void</span> <a class="code" href="classgpgpu__sim.html#ad9c12944269b34b1365e5feda0eb8a25">gpgpu_sim::dump_pipeline</a>( <span class="keywordtype">int</span> mask, <span class="keywordtype">int</span> s, <span class="keywordtype">int</span> m )<span class="keyword"> const</span>
<a name="l01346"></a>01346 <span class="keyword"></span>{
<a name="l01347"></a>01347 <span class="comment">/*</span>
<a name="l01348"></a>01348 <span class="comment">   You may want to use this function while running GPGPU-Sim in gdb.</span>
<a name="l01349"></a>01349 <span class="comment">   One way to do that is add the following to your .gdbinit file:</span>
<a name="l01350"></a>01350 <span class="comment"> </span>
<a name="l01351"></a>01351 <span class="comment">      define dp</span>
<a name="l01352"></a>01352 <span class="comment">         call g_the_gpu.dump_pipeline_impl((0x40|0x4|0x1),$arg0,0)</span>
<a name="l01353"></a>01353 <span class="comment">      end</span>
<a name="l01354"></a>01354 <span class="comment"> </span>
<a name="l01355"></a>01355 <span class="comment">   Then, typing &quot;dp 3&quot; will show the contents of the pipeline for shader core 3.</span>
<a name="l01356"></a>01356 <span class="comment">*/</span>
<a name="l01357"></a>01357 
<a name="l01358"></a>01358    printf(<span class="stringliteral">&quot;Dumping pipeline state...\n&quot;</span>);
<a name="l01359"></a>01359    <span class="keywordflow">if</span>(!mask) mask = 0xFFFFFFFF;
<a name="l01360"></a>01360    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a21b867d06fc4757d3a9b63404eb16692">n_simt_clusters</a>;i++) {
<a name="l01361"></a>01361       <span class="keywordflow">if</span>(s != -1) {
<a name="l01362"></a>01362          i = s;
<a name="l01363"></a>01363       }
<a name="l01364"></a>01364       <span class="keywordflow">if</span>(mask&amp;1) <a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>[<a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>-&gt;<a class="code" href="structshader__core__config.html#a5624eba922e66a992536b6a527496a6a">sid_to_cluster</a>(i)]-&gt;<a class="code" href="classsimt__core__cluster.html#a711c5d974ab3611eb03c25c42ff97997">display_pipeline</a>(i,stdout,1,mask &amp; 0x2E);
<a name="l01365"></a>01365       <span class="keywordflow">if</span>(s != -1) {
<a name="l01366"></a>01366          <span class="keywordflow">break</span>;
<a name="l01367"></a>01367       }
<a name="l01368"></a>01368    }
<a name="l01369"></a>01369    <span class="keywordflow">if</span>(mask&amp;0x10000) {
<a name="l01370"></a>01370       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>-&gt;<a class="code" href="structmemory__config.html#a23314d672956964a7da0b46a625bd02d">m_n_mem</a>;i++) {
<a name="l01371"></a>01371          <span class="keywordflow">if</span>(m != -1) {
<a name="l01372"></a>01372             i=m;
<a name="l01373"></a>01373          }
<a name="l01374"></a>01374          printf(<span class="stringliteral">&quot;DRAM / memory controller %u:\n&quot;</span>, i);
<a name="l01375"></a>01375          <span class="keywordflow">if</span>(mask&amp;0x100000) <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;<a class="code" href="classmemory__partition__unit.html#a577aba1fe340853bcdbb4fc9082f91cb">print_stat</a>(stdout);
<a name="l01376"></a>01376          <span class="keywordflow">if</span>(mask&amp;0x1000000)   <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;<a class="code" href="classmemory__partition__unit.html#a8ca6671fc15d9dbfaf44af432a307726">visualize</a>();
<a name="l01377"></a>01377          <span class="keywordflow">if</span>(mask&amp;0x10000000)   <a class="code" href="classgpgpu__sim.html#a626905ae726a238cc7d676d14dc1a1c7">m_memory_partition_unit</a>[i]-&gt;<a class="code" href="classmemory__partition__unit.html#a3e9c697307e08cdc0da97a7dc777a211">print</a>(stdout);
<a name="l01378"></a>01378          <span class="keywordflow">if</span>(m != -1) {
<a name="l01379"></a>01379             <span class="keywordflow">break</span>;
<a name="l01380"></a>01380          }
<a name="l01381"></a>01381       }
<a name="l01382"></a>01382    }
<a name="l01383"></a>01383    fflush(stdout);
<a name="l01384"></a>01384 }
<a name="l01385"></a>01385 
<a name="l01386"></a><a class="code" href="classgpgpu__sim.html#a40a558768ff4d88bb61dd5ee2f6ab4b9">01386</a> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structshader__core__config.html">shader_core_config</a> * <a class="code" href="classgpgpu__sim.html#a40a558768ff4d88bb61dd5ee2f6ab4b9" title="Get shader core configuration.">gpgpu_sim::getShaderCoreConfig</a>()
<a name="l01387"></a>01387 {
<a name="l01388"></a>01388    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#a88a4e19b94bf5c3cfb7b05504527db9f">m_shader_config</a>;
<a name="l01389"></a>01389 }
<a name="l01390"></a>01390 
<a name="l01391"></a><a class="code" href="classgpgpu__sim.html#ad6cedaa2adb4146b4329333f359bbb74">01391</a> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmemory__config.html">memory_config</a> * <a class="code" href="classgpgpu__sim.html#ad6cedaa2adb4146b4329333f359bbb74" title="Get shader core Memory Configuration.">gpgpu_sim::getMemoryConfig</a>()
<a name="l01392"></a>01392 {
<a name="l01393"></a>01393    <span class="keywordflow">return</span> <a class="code" href="classgpgpu__sim.html#a22b61a4a6a437f12bb54aff405bc37b1">m_memory_config</a>;
<a name="l01394"></a>01394 }
<a name="l01395"></a>01395 
<a name="l01396"></a><a class="code" href="classgpgpu__sim.html#aee9b9353ede4ebc2bdbc5d50b7715d93">01396</a> <a class="code" href="classsimt__core__cluster.html">simt_core_cluster</a> * <a class="code" href="classgpgpu__sim.html#aee9b9353ede4ebc2bdbc5d50b7715d93" title="Get shader core SIMT cluster.">gpgpu_sim::getSIMTCluster</a>()
<a name="l01397"></a>01397 {
<a name="l01398"></a>01398    <span class="keywordflow">return</span> *<a class="code" href="classgpgpu__sim.html#ae879377df64789d8591b6786afe6421c">m_cluster</a>;
<a name="l01399"></a>01399 }
<a name="l01400"></a>01400 
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 13 May 2014 for GPGPU-Sim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
