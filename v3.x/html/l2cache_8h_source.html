<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GPGPU-Sim: v3.x/src/gpgpu-sim/l2cache.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_c934b74ccb33d6b9bfd1e576787940d8.html">v3.x</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_da58ad9beee6988f697f1a76e412a52a.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_d956d62670f5e9a38a62eba10b09b5c2.html">gpgpu-sim</a>
  </div>
</div>
<div class="contents">
<h1>l2cache.h</h1><a href="l2cache_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (c) 2009-2011, Tor M. Aamodt</span>
<a name="l00002"></a>00002 <span class="comment">// The University of British Columbia</span>
<a name="l00003"></a>00003 <span class="comment">// All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">// Redistribution and use in source and binary forms, with or without</span>
<a name="l00006"></a>00006 <span class="comment">// modification, are permitted provided that the following conditions are met:</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// Redistributions of source code must retain the above copyright notice, this</span>
<a name="l00009"></a>00009 <span class="comment">// list of conditions and the following disclaimer.</span>
<a name="l00010"></a>00010 <span class="comment">// Redistributions in binary form must reproduce the above copyright notice, this</span>
<a name="l00011"></a>00011 <span class="comment">// list of conditions and the following disclaimer in the documentation and/or</span>
<a name="l00012"></a>00012 <span class="comment">// other materials provided with the distribution.</span>
<a name="l00013"></a>00013 <span class="comment">// Neither the name of The University of British Columbia nor the names of its</span>
<a name="l00014"></a>00014 <span class="comment">// contributors may be used to endorse or promote products derived from this</span>
<a name="l00015"></a>00015 <span class="comment">// software without specific prior written permission.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 <span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND</span>
<a name="l00018"></a>00018 <span class="comment">// ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</span>
<a name="l00019"></a>00019 <span class="comment">// WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
<a name="l00020"></a>00020 <span class="comment">// DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE</span>
<a name="l00021"></a>00021 <span class="comment">// FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<a name="l00022"></a>00022 <span class="comment">// DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00023"></a>00023 <span class="comment">// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00024"></a>00024 <span class="comment">// CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
<a name="l00025"></a>00025 <span class="comment">// OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef MC_PARTITION_INCLUDED</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define MC_PARTITION_INCLUDED</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="dram_8h.html">dram.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;../abstract_hardware_model.h&quot;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;queue&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a>;
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="classpartition__mf__allocator.html">00039</a> <span class="keyword">class </span><a class="code" href="classpartition__mf__allocator.html">partition_mf_allocator</a> : <span class="keyword">public</span> <a class="code" href="classmem__fetch__allocator.html">mem_fetch_allocator</a> {
<a name="l00040"></a>00040 <span class="keyword">public</span>:
<a name="l00041"></a><a class="code" href="classpartition__mf__allocator.html#a714ca67382325b71b903b062c5e63840">00041</a>     <a class="code" href="classpartition__mf__allocator.html#a714ca67382325b71b903b062c5e63840">partition_mf_allocator</a>( <span class="keyword">const</span> <a class="code" href="structmemory__config.html">memory_config</a> *config )
<a name="l00042"></a>00042     {
<a name="l00043"></a>00043         <a class="code" href="classpartition__mf__allocator.html#a48c6a04c06caa7c28d47919df38d7920">m_memory_config</a> = config;
<a name="l00044"></a>00044     }
<a name="l00045"></a><a class="code" href="classpartition__mf__allocator.html#a675ca61f38253710f9720ef5acb66c4e">00045</a>     <span class="keyword">virtual</span> <a class="code" href="classmem__fetch.html">mem_fetch</a> * <a class="code" href="classpartition__mf__allocator.html#a675ca61f38253710f9720ef5acb66c4e">alloc</a>(<span class="keyword">const</span> <span class="keyword">class</span> <a class="code" href="classwarp__inst__t.html">warp_inst_t</a> &amp;inst, <span class="keyword">const</span> <a class="code" href="classmem__access__t.html">mem_access_t</a> &amp;access)<span class="keyword"> const </span>
<a name="l00046"></a>00046 <span class="keyword">    </span>{
<a name="l00047"></a>00047         abort();
<a name="l00048"></a>00048         <span class="keywordflow">return</span> NULL;
<a name="l00049"></a>00049     }
<a name="l00050"></a>00050     <span class="keyword">virtual</span> <a class="code" href="classmem__fetch.html">mem_fetch</a> * <a class="code" href="classpartition__mf__allocator.html#a675ca61f38253710f9720ef5acb66c4e">alloc</a>(<a class="code" href="abstract__hardware__model_8h.html#adcde2e548bc855c5cb446e23e38bd12d">new_addr_type</a> addr, mem_access_type type, <span class="keywordtype">unsigned</span> size, <span class="keywordtype">bool</span> wr) <span class="keyword">const</span>;
<a name="l00051"></a>00051 <span class="keyword">private</span>:
<a name="l00052"></a><a class="code" href="classpartition__mf__allocator.html#a48c6a04c06caa7c28d47919df38d7920">00052</a>     <span class="keyword">const</span> <a class="code" href="structmemory__config.html">memory_config</a> *<a class="code" href="classpartition__mf__allocator.html#a48c6a04c06caa7c28d47919df38d7920">m_memory_config</a>;
<a name="l00053"></a>00053 };
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment">// Memory partition unit contains all the units assolcated with a single DRAM channel. </span>
<a name="l00056"></a>00056 <span class="comment">// - It arbitrates the DRAM channel among multiple sub partitions.  </span>
<a name="l00057"></a>00057 <span class="comment">// - It does not connect directly with the interconnection network. </span>
<a name="l00058"></a><a class="code" href="classmemory__partition__unit.html">00058</a> <span class="keyword">class </span><a class="code" href="classmemory__partition__unit.html">memory_partition_unit</a>
<a name="l00059"></a>00059 {
<a name="l00060"></a>00060 <span class="keyword">public</span>: 
<a name="l00061"></a>00061    <a class="code" href="classmemory__partition__unit.html#a9138a3051171a0c613d7db7d7902e1d1">memory_partition_unit</a>( <span class="keywordtype">unsigned</span> partition_id, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmemory__config.html">memory_config</a> *config, <span class="keyword">class</span> <a class="code" href="classmemory__stats__t.html">memory_stats_t</a> *stats );
<a name="l00062"></a>00062    <a class="code" href="classmemory__partition__unit.html#a80e990492df06752c8740bff51ea44e3">~memory_partition_unit</a>(); 
<a name="l00063"></a>00063 
<a name="l00064"></a>00064    <span class="keywordtype">bool</span> <a class="code" href="classmemory__partition__unit.html#ad03349e1023a6bc4da19f271dfc92327">busy</a>() <span class="keyword">const</span>;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066    <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit.html#a90acc7762469d66da031535ae0593f87">cache_cycle</a>( <span class="keywordtype">unsigned</span> cycle );
<a name="l00067"></a>00067    <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit.html#a5a089f454d78b521e56435b6af5ad484">dram_cycle</a>();
<a name="l00068"></a>00068 
<a name="l00069"></a>00069    <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit.html#a87922db6dc73514505231f8bae25abd0">set_done</a>( <a class="code" href="classmem__fetch.html">mem_fetch</a> *mf );
<a name="l00070"></a>00070 
<a name="l00071"></a>00071    <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit.html#a9b7d2af302fe19b75953217ecd874947">visualizer_print</a>( gzFile visualizer_file ) <span class="keyword">const</span>;
<a name="l00072"></a><a class="code" href="classmemory__partition__unit.html#a577aba1fe340853bcdbb4fc9082f91cb">00072</a>    <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit.html#a577aba1fe340853bcdbb4fc9082f91cb">print_stat</a>( FILE *fp ) { <a class="code" href="classmemory__partition__unit.html#ae4e5293ed7580247ae7158bf2d746ef0">m_dram</a>-&gt;<a class="code" href="classdram__t.html#ad273dace86285cea84b41936ad0ca76e">print_stat</a>(fp); }
<a name="l00073"></a><a class="code" href="classmemory__partition__unit.html#a8ca6671fc15d9dbfaf44af432a307726">00073</a>    <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit.html#a8ca6671fc15d9dbfaf44af432a307726">visualize</a>()<span class="keyword"> const </span>{ <a class="code" href="classmemory__partition__unit.html#ae4e5293ed7580247ae7158bf2d746ef0">m_dram</a>-&gt;<a class="code" href="classdram__t.html#ae100d76de65d253a994eb9e9267ec440">visualize</a>(); }
<a name="l00074"></a>00074    <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit.html#a3e9c697307e08cdc0da97a7dc777a211">print</a>( FILE *fp ) <span class="keyword">const</span>;
<a name="l00075"></a>00075 
<a name="l00076"></a><a class="code" href="classmemory__partition__unit.html#a162a7235fc8e272db33fdd7400ac76fc">00076</a>    <span class="keyword">class </span><a class="code" href="classmemory__sub__partition.html">memory_sub_partition</a> * <a class="code" href="classmemory__partition__unit.html#a162a7235fc8e272db33fdd7400ac76fc">get_sub_partition</a>(<span class="keywordtype">int</span> sub_partition_id) 
<a name="l00077"></a>00077    {
<a name="l00078"></a>00078       <span class="keywordflow">return</span> <a class="code" href="classmemory__partition__unit.html#a5dfc730695d5f49f47a8d43f930b8f3a">m_sub_partition</a>[sub_partition_id]; 
<a name="l00079"></a>00079    }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081    <span class="comment">// Power model</span>
<a name="l00082"></a>00082    <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit.html#a777672a7718f9be97f43d6d51f2f92cf">set_dram_power_stats</a>(<span class="keywordtype">unsigned</span> &amp;n_cmd,
<a name="l00083"></a>00083                              <span class="keywordtype">unsigned</span> &amp;n_activity,
<a name="l00084"></a>00084                              <span class="keywordtype">unsigned</span> &amp;n_nop,
<a name="l00085"></a>00085                              <span class="keywordtype">unsigned</span> &amp;n_act,
<a name="l00086"></a>00086                              <span class="keywordtype">unsigned</span> &amp;n_pre,
<a name="l00087"></a>00087                              <span class="keywordtype">unsigned</span> &amp;n_rd,
<a name="l00088"></a>00088                              <span class="keywordtype">unsigned</span> &amp;n_wr,
<a name="l00089"></a>00089                              <span class="keywordtype">unsigned</span> &amp;n_req) <span class="keyword">const</span>;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091    <span class="keywordtype">int</span> <a class="code" href="classmemory__partition__unit.html#a63e9a35405f1272312ef9b8a83fc07b2">global_sub_partition_id_to_local_id</a>(<span class="keywordtype">int</span> global_sub_partition_id) <span class="keyword">const</span>; 
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="classmemory__partition__unit.html#aee312a6a3de3ec87eb32d5eba6331a68">00093</a>    <span class="keywordtype">unsigned</span> <a class="code" href="classmemory__partition__unit.html#aee312a6a3de3ec87eb32d5eba6331a68">get_mpid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmemory__partition__unit.html#a927053f13b600a75da9a56a996768b84">m_id</a>; }
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="keyword">private</span>: 
<a name="l00096"></a>00096 
<a name="l00097"></a><a class="code" href="classmemory__partition__unit.html#a927053f13b600a75da9a56a996768b84">00097</a>    <span class="keywordtype">unsigned</span> <a class="code" href="classmemory__partition__unit.html#a927053f13b600a75da9a56a996768b84">m_id</a>;
<a name="l00098"></a><a class="code" href="classmemory__partition__unit.html#a33366fea9f947353222e4b0201ca8bbf">00098</a>    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmemory__config.html">memory_config</a> *<a class="code" href="classmemory__partition__unit.html#a33366fea9f947353222e4b0201ca8bbf">m_config</a>;
<a name="l00099"></a><a class="code" href="classmemory__partition__unit.html#ae6039192424f35c3691d13f4d4dbc08b">00099</a>    <span class="keyword">class </span><a class="code" href="classmemory__stats__t.html">memory_stats_t</a> *<a class="code" href="classmemory__partition__unit.html#ae6039192424f35c3691d13f4d4dbc08b">m_stats</a>;
<a name="l00100"></a><a class="code" href="classmemory__partition__unit.html#a5dfc730695d5f49f47a8d43f930b8f3a">00100</a>    <span class="keyword">class </span><a class="code" href="classmemory__sub__partition.html">memory_sub_partition</a> **<a class="code" href="classmemory__partition__unit.html#a5dfc730695d5f49f47a8d43f930b8f3a">m_sub_partition</a>; 
<a name="l00101"></a><a class="code" href="classmemory__partition__unit.html#ae4e5293ed7580247ae7158bf2d746ef0">00101</a>    <span class="keyword">class </span><a class="code" href="classdram__t.html">dram_t</a> *<a class="code" href="classmemory__partition__unit.html#ae4e5293ed7580247ae7158bf2d746ef0">m_dram</a>;
<a name="l00102"></a>00102 
<a name="l00103"></a><a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html">00103</a>    <span class="keyword">class </span><a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html">arbitration_metadata</a>
<a name="l00104"></a>00104    {
<a name="l00105"></a>00105    <span class="keyword">public</span>: 
<a name="l00106"></a>00106       <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#ae49da0a6d8695f9668795afec4e81891">arbitration_metadata</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmemory__config.html">memory_config</a> *config); 
<a name="l00107"></a>00107 
<a name="l00108"></a>00108       <span class="comment">// check if a subpartition still has credit </span>
<a name="l00109"></a>00109       <span class="keywordtype">bool</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a7d00c343c8445c53a00fec4ad8a8a89d">has_credits</a>(<span class="keywordtype">int</span> inner_sub_partition_id) <span class="keyword">const</span>; 
<a name="l00110"></a>00110       <span class="comment">// borrow a credit for a subpartition </span>
<a name="l00111"></a>00111       <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#adc4be6e2878e31f7ed415685c1f5e719">borrow_credit</a>(<span class="keywordtype">int</span> inner_sub_partition_id); 
<a name="l00112"></a>00112       <span class="comment">// return a credit from a subpartition </span>
<a name="l00113"></a>00113       <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#ade9f55f83d3ff6fe6b44adc43920b7dd">return_credit</a>(<span class="keywordtype">int</span> inner_sub_partition_id); 
<a name="l00114"></a>00114 
<a name="l00115"></a>00115       <span class="comment">// return the last subpartition that borrowed credit </span>
<a name="l00116"></a><a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a52112ed2aeea26b4de3c088141aa9641">00116</a>       <span class="keywordtype">int</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a52112ed2aeea26b4de3c088141aa9641">last_borrower</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a58b8c39885ee32d50390c840b93b8750">m_last_borrower</a>; } 
<a name="l00117"></a>00117 
<a name="l00118"></a>00118       <span class="keywordtype">void</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#aa33f311f1fde834baebdbaa644d1a5e8">print</a>( FILE *fp ) <span class="keyword">const</span>; 
<a name="l00119"></a>00119    <span class="keyword">private</span>: 
<a name="l00120"></a>00120       <span class="comment">// id of the last subpartition that borrowed credit </span>
<a name="l00121"></a><a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a58b8c39885ee32d50390c840b93b8750">00121</a>       <span class="keywordtype">int</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a58b8c39885ee32d50390c840b93b8750">m_last_borrower</a>; 
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#ae4610bdb30c585d9d8566d93195c4a1b">00123</a>       <span class="keywordtype">int</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#ae4610bdb30c585d9d8566d93195c4a1b">m_shared_credit_limit</a>; 
<a name="l00124"></a><a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a4a0683d07cbc62065a8871cc1f0fa625">00124</a>       <span class="keywordtype">int</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a4a0683d07cbc62065a8871cc1f0fa625">m_private_credit_limit</a>; 
<a name="l00125"></a>00125 
<a name="l00126"></a>00126       <span class="comment">// credits borrowed by the subpartitions</span>
<a name="l00127"></a><a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a013fc50c9d0c5d0a16b50bdc0b2614e8">00127</a>       std::vector&lt;int&gt; <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a013fc50c9d0c5d0a16b50bdc0b2614e8">m_private_credit</a>; 
<a name="l00128"></a><a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a82c06756efe3f72ae4d4e192fb1c4aef">00128</a>       <span class="keywordtype">int</span> <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html#a82c06756efe3f72ae4d4e192fb1c4aef">m_shared_credit</a>; 
<a name="l00129"></a>00129    }; 
<a name="l00130"></a><a class="code" href="classmemory__partition__unit.html#aa2a3a91b053c3c4d6f763ce639fe708c">00130</a>    <a class="code" href="classmemory__partition__unit_1_1arbitration__metadata.html">arbitration_metadata</a> <a class="code" href="classmemory__partition__unit.html#aa2a3a91b053c3c4d6f763ce639fe708c">m_arbitration_metadata</a>; 
<a name="l00131"></a>00131 
<a name="l00132"></a>00132    <span class="comment">// determine wheither a given subpartition can issue to DRAM </span>
<a name="l00133"></a>00133    <span class="keywordtype">bool</span> <a class="code" href="classmemory__partition__unit.html#a56f713a5a000a23a72e115dd7cb41104">can_issue_to_dram</a>(<span class="keywordtype">int</span> inner_sub_partition_id); 
<a name="l00134"></a>00134 
<a name="l00135"></a>00135    <span class="comment">// model DRAM access scheduler latency (fixed latency between L2 and DRAM)</span>
<a name="l00136"></a><a class="code" href="structmemory__partition__unit_1_1dram__delay__t.html">00136</a>    <span class="keyword">struct </span><a class="code" href="structmemory__partition__unit_1_1dram__delay__t.html">dram_delay_t</a>
<a name="l00137"></a>00137    {
<a name="l00138"></a><a class="code" href="structmemory__partition__unit_1_1dram__delay__t.html#a005a5076b0f9b59575ab060c9c5e7848">00138</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="structmemory__partition__unit_1_1dram__delay__t.html#a005a5076b0f9b59575ab060c9c5e7848">ready_cycle</a>;
<a name="l00139"></a><a class="code" href="structmemory__partition__unit_1_1dram__delay__t.html#a2a32477c6ac3850024bb6037be24eb16">00139</a>       <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a>* <a class="code" href="structmemory__partition__unit_1_1dram__delay__t.html#a2a32477c6ac3850024bb6037be24eb16">req</a>;
<a name="l00140"></a>00140    };
<a name="l00141"></a><a class="code" href="classmemory__partition__unit.html#af41b40cbda99326d2fd43dcccb8b095e">00141</a>    std::list&lt;dram_delay_t&gt; <a class="code" href="classmemory__partition__unit.html#af41b40cbda99326d2fd43dcccb8b095e">m_dram_latency_queue</a>;
<a name="l00142"></a>00142 };
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="classmemory__sub__partition.html">00144</a> <span class="keyword">class </span><a class="code" href="classmemory__sub__partition.html">memory_sub_partition</a>
<a name="l00145"></a>00145 {
<a name="l00146"></a>00146 <span class="keyword">public</span>:
<a name="l00147"></a>00147    <a class="code" href="classmemory__sub__partition.html#a1c73560ff733407323431a82c533fc52">memory_sub_partition</a>( <span class="keywordtype">unsigned</span> sub_partition_id, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmemory__config.html">memory_config</a> *config, <span class="keyword">class</span> <a class="code" href="classmemory__stats__t.html">memory_stats_t</a> *stats );
<a name="l00148"></a>00148    <a class="code" href="classmemory__sub__partition.html#aec77aa830f31f22fe9a6eeb4e47f9138">~memory_sub_partition</a>(); 
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="classmemory__sub__partition.html#a71f78b5f79571f5123771605e01c42ef">00150</a>    <span class="keywordtype">unsigned</span> <a class="code" href="classmemory__sub__partition.html#a71f78b5f79571f5123771605e01c42ef">get_id</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmemory__sub__partition.html#a622b491a811dd03d243b1670ddffd9b1">m_id</a>; } 
<a name="l00151"></a>00151 
<a name="l00152"></a>00152    <span class="keywordtype">bool</span> <a class="code" href="classmemory__sub__partition.html#a734ab70909266d1ca1e915216a405a31">busy</a>() <span class="keyword">const</span>;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a00e9b1e998aea1895ff9898e5ac3ae83">cache_cycle</a>( <span class="keywordtype">unsigned</span> cycle );
<a name="l00155"></a>00155 
<a name="l00156"></a>00156    <span class="keywordtype">bool</span> <a class="code" href="classmemory__sub__partition.html#a74c7e89bc7de9a39cfd859b47a2444ec">full</a>() <span class="keyword">const</span>;
<a name="l00157"></a>00157    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a7ba7c9c14d7a41328af9d0176c0cba39">push</a>( <span class="keyword">class</span> <a class="code" href="classmem__fetch.html">mem_fetch</a>* mf, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> clock_cycle );
<a name="l00158"></a>00158    <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a>* <a class="code" href="classmemory__sub__partition.html#ac8e55e7667127a2103453d9eab10fe71">pop</a>(); 
<a name="l00159"></a>00159    <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a>* <a class="code" href="classmemory__sub__partition.html#a096db6be7ab013446a907013366fc3a7">top</a>();
<a name="l00160"></a>00160    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a4d2837ab2c9482ed9efaca54ad7c4b9e">set_done</a>( <a class="code" href="classmem__fetch.html">mem_fetch</a> *mf );
<a name="l00161"></a>00161 
<a name="l00162"></a>00162    <span class="keywordtype">unsigned</span> <a class="code" href="classmemory__sub__partition.html#af761d115eb7b2dadd37c9113ff58e50b">flushL2</a>();
<a name="l00163"></a>00163 
<a name="l00164"></a>00164    <span class="comment">// interface to L2_dram_queue</span>
<a name="l00165"></a>00165    <span class="keywordtype">bool</span> <a class="code" href="classmemory__sub__partition.html#a8721f5738b943abb66ea263fda53054d">L2_dram_queue_empty</a>() <span class="keyword">const</span>; 
<a name="l00166"></a>00166    <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a>* <a class="code" href="classmemory__sub__partition.html#a332c8f11cdac1193d47aa8cd413368c0">L2_dram_queue_top</a>() <span class="keyword">const</span>; 
<a name="l00167"></a>00167    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a8837382a5540d9416091743a018ac450">L2_dram_queue_pop</a>(); 
<a name="l00168"></a>00168 
<a name="l00169"></a>00169    <span class="comment">// interface to dram_L2_queue</span>
<a name="l00170"></a>00170    <span class="keywordtype">bool</span> <a class="code" href="classmemory__sub__partition.html#a7f1d2cc6ac11924c4a48465117b89e3e">dram_L2_queue_full</a>() <span class="keyword">const</span>; 
<a name="l00171"></a>00171    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a78443ec50502328cbf53aeeb8a764129">dram_L2_queue_push</a>( <span class="keyword">class</span> <a class="code" href="classmem__fetch.html">mem_fetch</a>* mf ); 
<a name="l00172"></a>00172 
<a name="l00173"></a>00173    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a015bc320ef6092ce1ec1c4dd28af6b34">visualizer_print</a>( gzFile visualizer_file );
<a name="l00174"></a>00174    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a15b8cdd3bcc6ad1c225e42d60237143c">print_cache_stat</a>(<span class="keywordtype">unsigned</span> &amp;accesses, <span class="keywordtype">unsigned</span> &amp;misses) <span class="keyword">const</span>;
<a name="l00175"></a>00175    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#ae40943e69420549a96cdeeb4563e3c1f">print</a>( FILE *fp ) <span class="keyword">const</span>;
<a name="l00176"></a>00176 
<a name="l00177"></a>00177    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a729bdd93c041d476a52f4c228e72c198">accumulate_L2cache_stats</a>(<span class="keyword">class</span> <a class="code" href="classcache__stats.html">cache_stats</a> &amp;l2_stats) <span class="keyword">const</span>;
<a name="l00178"></a>00178    <span class="keywordtype">void</span> <a class="code" href="classmemory__sub__partition.html#a103ea9c8429690093c0ee3cf280bd816">get_L2cache_sub_stats</a>(<span class="keyword">struct</span> <a class="code" href="structcache__sub__stats.html">cache_sub_stats</a> &amp;css) <span class="keyword">const</span>;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 <span class="keyword">private</span>:
<a name="l00181"></a>00181 <span class="comment">// data</span>
<a name="l00182"></a><a class="code" href="classmemory__sub__partition.html#a622b491a811dd03d243b1670ddffd9b1">00182</a>    <span class="keywordtype">unsigned</span> <a class="code" href="classmemory__sub__partition.html#a622b491a811dd03d243b1670ddffd9b1">m_id</a>;  <span class="comment">//&lt; the global sub partition ID</span>
<a name="l00183"></a><a class="code" href="classmemory__sub__partition.html#a383f750d779b2bb6d5cd6f948536f924">00183</a>    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmemory__config.html">memory_config</a> *<a class="code" href="classmemory__sub__partition.html#a383f750d779b2bb6d5cd6f948536f924">m_config</a>;
<a name="l00184"></a><a class="code" href="classmemory__sub__partition.html#a7def1d771bbde1d621311ee0ddcbf950">00184</a>    <span class="keyword">class </span><a class="code" href="classl2__cache.html">l2_cache</a> *<a class="code" href="classmemory__sub__partition.html#a7def1d771bbde1d621311ee0ddcbf950">m_L2cache</a>;
<a name="l00185"></a><a class="code" href="classmemory__sub__partition.html#a7c0ee810b6fb57c5eb633f1f8e1579fd">00185</a>    <span class="keyword">class </span><a class="code" href="classL2interface.html">L2interface</a> *<a class="code" href="classmemory__sub__partition.html#a7c0ee810b6fb57c5eb633f1f8e1579fd">m_L2interface</a>;
<a name="l00186"></a><a class="code" href="classmemory__sub__partition.html#ab1ad37bf93e22d528be8d21fb7e3185b">00186</a>    <a class="code" href="classpartition__mf__allocator.html">partition_mf_allocator</a> *<a class="code" href="classmemory__sub__partition.html#ab1ad37bf93e22d528be8d21fb7e3185b">m_mf_allocator</a>;
<a name="l00187"></a>00187 
<a name="l00188"></a>00188    <span class="comment">// model delay of ROP units with a fixed latency</span>
<a name="l00189"></a><a class="code" href="structmemory__sub__partition_1_1rop__delay__t.html">00189</a>    <span class="keyword">struct </span><a class="code" href="structmemory__sub__partition_1_1rop__delay__t.html">rop_delay_t</a>
<a name="l00190"></a>00190    {
<a name="l00191"></a><a class="code" href="structmemory__sub__partition_1_1rop__delay__t.html#a321803fd8fe73ef1419677163b65de12">00191</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="structmemory__sub__partition_1_1rop__delay__t.html#a321803fd8fe73ef1419677163b65de12">ready_cycle</a>;
<a name="l00192"></a><a class="code" href="structmemory__sub__partition_1_1rop__delay__t.html#a2dd8b3d2e74a01c4f05f4a9fab9f0b22">00192</a>         <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a>* <a class="code" href="structmemory__sub__partition_1_1rop__delay__t.html#a2dd8b3d2e74a01c4f05f4a9fab9f0b22">req</a>;
<a name="l00193"></a>00193    };
<a name="l00194"></a><a class="code" href="classmemory__sub__partition.html#adb5a2244799506cac4fe0a90f9fa51a1">00194</a>    std::queue&lt;rop_delay_t&gt; <a class="code" href="classmemory__sub__partition.html#adb5a2244799506cac4fe0a90f9fa51a1">m_rop</a>;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196    <span class="comment">// these are various FIFOs between units within a memory partition</span>
<a name="l00197"></a><a class="code" href="classmemory__sub__partition.html#a86feb0a9f8c221ae0f1150d744481103">00197</a>    <a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;mem_fetch&gt;</a> *<a class="code" href="classmemory__sub__partition.html#a86feb0a9f8c221ae0f1150d744481103">m_icnt_L2_queue</a>;
<a name="l00198"></a><a class="code" href="classmemory__sub__partition.html#aa35274f68a2980db2fd36ae46103215a">00198</a>    <a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;mem_fetch&gt;</a> *<a class="code" href="classmemory__sub__partition.html#aa35274f68a2980db2fd36ae46103215a">m_L2_dram_queue</a>;
<a name="l00199"></a><a class="code" href="classmemory__sub__partition.html#ac0a383888244e08d5c13efb9b71c7a84">00199</a>    <a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;mem_fetch&gt;</a> *<a class="code" href="classmemory__sub__partition.html#ac0a383888244e08d5c13efb9b71c7a84">m_dram_L2_queue</a>;
<a name="l00200"></a><a class="code" href="classmemory__sub__partition.html#a01aa6d22669b286e67e63cb5141cd3f9">00200</a>    <a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;mem_fetch&gt;</a> *<a class="code" href="classmemory__sub__partition.html#a01aa6d22669b286e67e63cb5141cd3f9">m_L2_icnt_queue</a>; <span class="comment">// L2 cache hit response queue</span>
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="classmemory__sub__partition.html#a792237e55503e84aa309496ecf282cbd">00202</a>    <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a> *<a class="code" href="classmemory__sub__partition.html#a792237e55503e84aa309496ecf282cbd">L2dramout</a>; 
<a name="l00203"></a><a class="code" href="classmemory__sub__partition.html#ae5cf587338c92cca81086ef0f77a9578">00203</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="classmemory__sub__partition.html#ae5cf587338c92cca81086ef0f77a9578">wb_addr</a>;
<a name="l00204"></a>00204 
<a name="l00205"></a><a class="code" href="classmemory__sub__partition.html#ab6c5ae13e34173993434c75770bd1563">00205</a>    <span class="keyword">class </span><a class="code" href="classmemory__stats__t.html">memory_stats_t</a> *<a class="code" href="classmemory__sub__partition.html#ab6c5ae13e34173993434c75770bd1563">m_stats</a>;
<a name="l00206"></a>00206 
<a name="l00207"></a><a class="code" href="classmemory__sub__partition.html#ae784aa6753c6ea008de04643ea574366">00207</a>    std::set&lt;mem_fetch*&gt; <a class="code" href="classmemory__sub__partition.html#ae784aa6753c6ea008de04643ea574366">m_request_tracker</a>;
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="classmemory__sub__partition.html#a2f0d4a3efc7d0098cbf09bf10220d654">00209</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classL2interface.html">L2interface</a>;
<a name="l00210"></a>00210 };
<a name="l00211"></a>00211 
<a name="l00212"></a><a class="code" href="classL2interface.html">00212</a> <span class="keyword">class </span><a class="code" href="classL2interface.html">L2interface</a> : <span class="keyword">public</span> <a class="code" href="classmem__fetch__interface.html">mem_fetch_interface</a> {
<a name="l00213"></a>00213 <span class="keyword">public</span>:
<a name="l00214"></a><a class="code" href="classL2interface.html#a6b3f9a410e42e7003233f48e57e08201">00214</a>     <a class="code" href="classL2interface.html#a6b3f9a410e42e7003233f48e57e08201">L2interface</a>( <a class="code" href="classmemory__sub__partition.html">memory_sub_partition</a> *unit ) { <a class="code" href="classL2interface.html#a7cf0878bf69871972d2f26f519e96633">m_unit</a>=unit; }
<a name="l00215"></a><a class="code" href="classL2interface.html#a716249f9972250f9f783aa661eb63bce">00215</a>     <span class="keyword">virtual</span> <a class="code" href="classL2interface.html#a716249f9972250f9f783aa661eb63bce">~L2interface</a>() {}
<a name="l00216"></a><a class="code" href="classL2interface.html#a6aa9715eb42a53cc776c0959fc93dedf">00216</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classL2interface.html#a6aa9715eb42a53cc776c0959fc93dedf">full</a>( <span class="keywordtype">unsigned</span> size, <span class="keywordtype">bool</span> write)<span class="keyword"> const </span>
<a name="l00217"></a>00217 <span class="keyword">    </span>{
<a name="l00218"></a>00218         <span class="comment">// assume read and write packets all same size</span>
<a name="l00219"></a>00219         <span class="keywordflow">return</span> <a class="code" href="classL2interface.html#a7cf0878bf69871972d2f26f519e96633">m_unit</a>-&gt;<a class="code" href="classmemory__sub__partition.html#aa35274f68a2980db2fd36ae46103215a">m_L2_dram_queue</a>-&gt;<a class="code" href="classfifo__pipeline.html#aac7a16c9350c4c9d4cd75dfb26c9e64c">full</a>();
<a name="l00220"></a>00220     }
<a name="l00221"></a><a class="code" href="classL2interface.html#abb60e088708a567b0e66eb965d175d8b">00221</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classL2interface.html#abb60e088708a567b0e66eb965d175d8b">push</a>(<a class="code" href="classmem__fetch.html">mem_fetch</a> *mf) 
<a name="l00222"></a>00222     {
<a name="l00223"></a>00223         mf-&gt;<a class="code" href="classmem__fetch.html#acbda50764b3c8d6f79ffa279021253da">set_status</a>(IN_PARTITION_L2_TO_DRAM_QUEUE,0<span class="comment">/*FIXME*/</span>);
<a name="l00224"></a>00224         <a class="code" href="classL2interface.html#a7cf0878bf69871972d2f26f519e96633">m_unit</a>-&gt;<a class="code" href="classmemory__sub__partition.html#aa35274f68a2980db2fd36ae46103215a">m_L2_dram_queue</a>-&gt;<a class="code" href="classfifo__pipeline.html#a56c3c47193df39f15ebd5ff960d273d0">push</a>(mf);
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226 <span class="keyword">private</span>:
<a name="l00227"></a><a class="code" href="classL2interface.html#a7cf0878bf69871972d2f26f519e96633">00227</a>     <a class="code" href="classmemory__sub__partition.html">memory_sub_partition</a> *<a class="code" href="classL2interface.html#a7cf0878bf69871972d2f26f519e96633">m_unit</a>;
<a name="l00228"></a>00228 };
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 <span class="preprocessor">#endif</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 13 May 2014 for GPGPU-Sim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
