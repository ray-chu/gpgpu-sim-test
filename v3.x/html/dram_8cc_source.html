<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GPGPU-Sim: v3.x/src/gpgpu-sim/dram.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_c934b74ccb33d6b9bfd1e576787940d8.html">v3.x</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_da58ad9beee6988f697f1a76e412a52a.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_d956d62670f5e9a38a62eba10b09b5c2.html">gpgpu-sim</a>
  </div>
</div>
<div class="contents">
<h1>dram.cc</h1><a href="dram_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (c) 2009-2011, Tor M. Aamodt, Wilson W.L. Fung, Ali Bakhoda,</span>
<a name="l00002"></a>00002 <span class="comment">// Ivan Sham, George L. Yuan,</span>
<a name="l00003"></a>00003 <span class="comment">// The University of British Columbia</span>
<a name="l00004"></a>00004 <span class="comment">// All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// Redistribution and use in source and binary forms, with or without</span>
<a name="l00007"></a>00007 <span class="comment">// modification, are permitted provided that the following conditions are met:</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">// Redistributions of source code must retain the above copyright notice, this</span>
<a name="l00010"></a>00010 <span class="comment">// list of conditions and the following disclaimer.</span>
<a name="l00011"></a>00011 <span class="comment">// Redistributions in binary form must reproduce the above copyright notice, this</span>
<a name="l00012"></a>00012 <span class="comment">// list of conditions and the following disclaimer in the documentation and/or</span>
<a name="l00013"></a>00013 <span class="comment">// other materials provided with the distribution.</span>
<a name="l00014"></a>00014 <span class="comment">// Neither the name of The University of British Columbia nor the names of its</span>
<a name="l00015"></a>00015 <span class="comment">// contributors may be used to endorse or promote products derived from this</span>
<a name="l00016"></a>00016 <span class="comment">// software without specific prior written permission.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND</span>
<a name="l00019"></a>00019 <span class="comment">// ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</span>
<a name="l00020"></a>00020 <span class="comment">// WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
<a name="l00021"></a>00021 <span class="comment">// DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE</span>
<a name="l00022"></a>00022 <span class="comment">// FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<a name="l00023"></a>00023 <span class="comment">// DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00024"></a>00024 <span class="comment">// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00025"></a>00025 <span class="comment">// CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
<a name="l00026"></a>00026 <span class="comment">// OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00027"></a>00027 <span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="gpu-sim_8h.html">gpu-sim.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="gpu-misc_8h.html">gpu-misc.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="dram_8h.html">dram.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="mem__latency__stat_8h.html">mem_latency_stat.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="dram__sched_8h.html">dram_sched.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="mem__fetch_8h.html">mem_fetch.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="l2cache_8h.html">l2cache.h</a>&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#ifdef DRAM_VERIFY</span>
<a name="l00038"></a><a class="code" href="dram_8cc.html#aa09b914b1091a1f3003a3be55ae3d15a">00038</a> <span class="preprocessor"></span><span class="keywordtype">int</span> <a class="code" href="dram_8cc.html#aa09b914b1091a1f3003a3be55ae3d15a">PRINT_CYCLE</a> = 0;
<a name="l00039"></a>00039 <span class="preprocessor">#endif</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;mem_fetch&gt;</a>;
<a name="l00042"></a>00042 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;dram_req_t&gt;</a>;
<a name="l00043"></a>00043 
<a name="l00044"></a><a class="code" href="classdram__t.html#a1d0599bea2f64bb733171210b1c28c6f">00044</a> <a class="code" href="classdram__t.html#a1d0599bea2f64bb733171210b1c28c6f">dram_t::dram_t</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_id, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structmemory__config.html">memory_config</a> *config, <a class="code" href="classmemory__stats__t.html">memory_stats_t</a> *stats,
<a name="l00045"></a>00045                 <a class="code" href="classmemory__partition__unit.html">memory_partition_unit</a> *mp )
<a name="l00046"></a>00046 {
<a name="l00047"></a>00047    <span class="keywordtype">id</span> = partition_id;
<a name="l00048"></a>00048    <a class="code" href="classdram__t.html#a4be2027f5499ee182708dd9c0336890e">m_memory_partition_unit</a> = mp;
<a name="l00049"></a>00049    <a class="code" href="classdram__t.html#a61d276d9bc31582b916ee271d6b41bbb">m_stats</a> = stats;
<a name="l00050"></a>00050    <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a> = config;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052    <a class="code" href="classdram__t.html#a7b177711f409f7dcb30793599e7a944b">CCDc</a> = 0;
<a name="l00053"></a>00053    <a class="code" href="classdram__t.html#a87960e2058638c0fecd71b6bbfcd3abd">RRDc</a> = 0;
<a name="l00054"></a>00054    <a class="code" href="classdram__t.html#a60c19905c01f3ba73853b10033b61fd8">RTWc</a> = 0;
<a name="l00055"></a>00055    <a class="code" href="classdram__t.html#a34a02953da3e45bb86afee0a5efb0484">WTRc</a> = 0;
<a name="l00056"></a>00056 
<a name="l00057"></a>00057    <a class="code" href="classdram__t.html#a59994dd82c5dcb5ca07d8b2e2b55d0c6">rw</a> = READ; <span class="comment">//read mode is default</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059     <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a> = (<a class="code" href="structbankgrp__t.html">bankgrp_t</a>**) calloc(<span class="keyword">sizeof</span>(<a class="code" href="structbankgrp__t.html">bankgrp_t</a>*), <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a09eed581d308d1b934c8f92a914297b5">nbkgrp</a>);
<a name="l00060"></a>00060     <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[0] = (<a class="code" href="structbankgrp__t.html">bankgrp_t</a>*) calloc(<span class="keyword">sizeof</span>(<a class="code" href="structbank__t.html">bank_t</a>), <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a09eed581d308d1b934c8f92a914297b5">nbkgrp</a>);
<a name="l00061"></a>00061     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=1; i&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a09eed581d308d1b934c8f92a914297b5">nbkgrp</a>; i++) {
<a name="l00062"></a>00062         <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[i] = <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[0] + i;
<a name="l00063"></a>00063     }
<a name="l00064"></a>00064     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0; i&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a09eed581d308d1b934c8f92a914297b5">nbkgrp</a>; i++) {
<a name="l00065"></a>00065         <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[i]-&gt;<a class="code" href="structbankgrp__t.html#ace2501e6e411388dc9e1a046465c3bf7">CCDLc</a> = 0;
<a name="l00066"></a>00066         <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[i]-&gt;<a class="code" href="structbankgrp__t.html#a31c3f61330fdb61b46899a63e474960d">RTPLc</a> = 0;
<a name="l00067"></a>00067     }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069    <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a> = (<a class="code" href="structbank__t.html">bank_t</a>**) calloc(<span class="keyword">sizeof</span>(<a class="code" href="structbank__t.html">bank_t</a>*),<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>);
<a name="l00070"></a>00070    <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[0] = (<a class="code" href="structbank__t.html">bank_t</a>*) calloc(<span class="keyword">sizeof</span>(<a class="code" href="structbank__t.html">bank_t</a>),<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>);
<a name="l00071"></a>00071    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=1;i&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;i++) 
<a name="l00072"></a>00072       <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i] = <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[0] + i;
<a name="l00073"></a>00073    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;i++) {
<a name="l00074"></a>00074       <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;<a class="code" href="structbank__t.html#a4271d0d2473be94d749771817d03e62e">state</a> = BANK_IDLE;
<a name="l00075"></a>00075       <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;<a class="code" href="structbank__t.html#a0e8b3025e17377feb0e1a81c3a79f003">bkgrpindex</a> = i/(<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>/<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a09eed581d308d1b934c8f92a914297b5">nbkgrp</a>);
<a name="l00076"></a>00076    }
<a name="l00077"></a>00077    <a class="code" href="classdram__t.html#aebe0ae69b84b5ee1665ae11117348b2a">prio</a> = 0;  
<a name="l00078"></a>00078    <a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a> = <span class="keyword">new</span> <a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;dram_req_t&gt;</a>(<span class="stringliteral">&quot;rwq&quot;</span>,<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a6398ae70b92a141ceefbdadb3092fa90">CL</a>,<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a6398ae70b92a141ceefbdadb3092fa90">CL</a>+1);
<a name="l00079"></a>00079    <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a> = <span class="keyword">new</span> <a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;dram_req_t&gt;</a>(<span class="stringliteral">&quot;mrqq&quot;</span>,0,2);
<a name="l00080"></a>00080    <a class="code" href="classdram__t.html#ac6eeb6558590765774602553cc50cf6a">returnq</a> = <span class="keyword">new</span> <a class="code" href="classfifo__pipeline.html">fifo_pipeline&lt;mem_fetch&gt;</a>(<span class="stringliteral">&quot;dramreturnq&quot;</span>,0,<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a7adb7ff206e0a67d9d5a6c37562c3d0b">gpgpu_dram_return_queue_size</a>==0?1024:<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a7adb7ff206e0a67d9d5a6c37562c3d0b">gpgpu_dram_return_queue_size</a>); 
<a name="l00081"></a>00081    <a class="code" href="classdram__t.html#a129e90fd7a1141cbad2c6f25139610b8">m_frfcfs_scheduler</a> = NULL;
<a name="l00082"></a>00082    <span class="keywordflow">if</span> ( <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a421670cf616901c81fb4635b08f95906">scheduler_type</a> == <a class="code" href="gpu-sim_8h.html#ad4d27d098cea5019101194f61d306ebaaa71a147cbd849f25be0765d23d7b020a">DRAM_FRFCFS</a> )
<a name="l00083"></a>00083       m_frfcfs_scheduler = <span class="keyword">new</span> <a class="code" href="classdram__t.html#a00f7f7e83a6295d2fd05c528c8134d9f">frfcfs_scheduler</a>(<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>,<span class="keyword">this</span>,stats);
<a name="l00084"></a>00084    <a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a> = 0;
<a name="l00085"></a>00085    <a class="code" href="classdram__t.html#abf19a1f7be3d99008258f90c530daf73">n_activity</a> = 0;
<a name="l00086"></a>00086    <a class="code" href="classdram__t.html#a1e74a7d93bd4c33f2226ad7eae943973">n_nop</a> = 0; 
<a name="l00087"></a>00087    <a class="code" href="classdram__t.html#a53febc1cad0d446b079a2ff94f021a5a">n_act</a> = 0; 
<a name="l00088"></a>00088    <a class="code" href="classdram__t.html#a4d4dc5cc2088ac90ffbb1b450ad34559">n_pre</a> = 0; 
<a name="l00089"></a>00089    <a class="code" href="classdram__t.html#af7599fc4cc513e4a7a376afccb5800f2">n_rd</a> = 0;
<a name="l00090"></a>00090    <a class="code" href="classdram__t.html#a0b754f0cc29b2921ff9dac08ef57f6bf">n_wr</a> = 0;
<a name="l00091"></a>00091    <a class="code" href="classdram__t.html#aac2886407cdd226b50e04a09273802c5">n_req</a> = 0;
<a name="l00092"></a>00092    <a class="code" href="classdram__t.html#a936cd29e518a0e1a704e85c06df20168">max_mrqs_temp</a> = 0;
<a name="l00093"></a>00093    <a class="code" href="classdram__t.html#a1c405d567c45fcbebbabff64b803af18">bwutil</a> = 0;
<a name="l00094"></a>00094    <a class="code" href="classdram__t.html#ae6962c3874d36f252d7dab64973bc774">max_mrqs</a> = 0;
<a name="l00095"></a>00095    <a class="code" href="classdram__t.html#a78c6b5af2da939c91f605355223db592">ave_mrqs</a> = 0;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;10;i++) {
<a name="l00098"></a>00098       <a class="code" href="classdram__t.html#a37b132f685ee61531a0a2725341007d9">dram_util_bins</a>[i]=0;
<a name="l00099"></a>00099       <a class="code" href="classdram__t.html#a8b725a9bf37a9d9973c5386e2ab258e8">dram_eff_bins</a>[i]=0;
<a name="l00100"></a>00100    }
<a name="l00101"></a>00101    <a class="code" href="classdram__t.html#a710d791f9abdd245523fa7940c28ea7b">last_n_cmd</a> = <a class="code" href="classdram__t.html#a15328646656aee71cddd4d2319b1791b">last_n_activity</a> = <a class="code" href="classdram__t.html#ac6bf22f0f97bf719042dea465074e72e">last_bwutil</a> = 0;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103    <a class="code" href="classdram__t.html#a8f7a7c13800554ff7b922dc322ee8fac">n_cmd_partial</a> = 0;
<a name="l00104"></a>00104    <a class="code" href="classdram__t.html#aeb3e2780e5b4c56d07173036acc35c9d">n_activity_partial</a> = 0;
<a name="l00105"></a>00105    <a class="code" href="classdram__t.html#a4c9eec005e028644c30d5aeef0ad78eb">n_nop_partial</a> = 0;  
<a name="l00106"></a>00106    <a class="code" href="classdram__t.html#a4d2733626a32b05eae69ca49da91791f">n_act_partial</a> = 0;  
<a name="l00107"></a>00107    <a class="code" href="classdram__t.html#afa1a0ee6ba3a83314992dba753a179e4">n_pre_partial</a> = 0;  
<a name="l00108"></a>00108    <a class="code" href="classdram__t.html#aa71aa891be3c4feba96242aa4fbbd5b0">n_req_partial</a> = 0;
<a name="l00109"></a>00109    <a class="code" href="classdram__t.html#ab5e75ab051a2ee58c466ae451cccb503">ave_mrqs_partial</a> = 0;
<a name="l00110"></a>00110    <a class="code" href="classdram__t.html#af35797990631e1ea450e8abf4e2a4b63">bwutil_partial</a> = 0;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112    <span class="keywordflow">if</span> ( <a class="code" href="classdram__t.html#a11d271f214ae0437c6ed9b4365052592">queue_limit</a>() )
<a name="l00113"></a>00113       <a class="code" href="classdram__t.html#a6519ad1fe753290b6d00ef63b6a88397">mrqq_Dist</a> = <a class="code" href="statwraper_8cpp.html#a115c8e995d9b6b135865e09cd9e2975c">StatCreate</a>(<span class="stringliteral">&quot;mrqq_length&quot;</span>,1, <a class="code" href="classdram__t.html#a11d271f214ae0437c6ed9b4365052592">queue_limit</a>());
<a name="l00114"></a>00114    <span class="keywordflow">else</span> <span class="comment">//queue length is unlimited; </span>
<a name="l00115"></a>00115       <a class="code" href="classdram__t.html#a6519ad1fe753290b6d00ef63b6a88397">mrqq_Dist</a> = <a class="code" href="statwraper_8cpp.html#a115c8e995d9b6b135865e09cd9e2975c">StatCreate</a>(<span class="stringliteral">&quot;mrqq_length&quot;</span>,1,64); <span class="comment">//track up to 64 entries</span>
<a name="l00116"></a>00116 }
<a name="l00117"></a>00117 
<a name="l00118"></a><a class="code" href="classdram__t.html#a2fa89bc1231c79fae392830c7aadbc61">00118</a> <span class="keywordtype">bool</span> <a class="code" href="classdram__t.html#a2fa89bc1231c79fae392830c7aadbc61">dram_t::full</a>()<span class="keyword"> const </span>
<a name="l00119"></a>00119 <span class="keyword"></span>{
<a name="l00120"></a>00120     <span class="keywordflow">if</span>(<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a421670cf616901c81fb4635b08f95906">scheduler_type</a> == <a class="code" href="gpu-sim_8h.html#ad4d27d098cea5019101194f61d306ebaaa71a147cbd849f25be0765d23d7b020a">DRAM_FRFCFS</a> ){
<a name="l00121"></a>00121         <span class="keywordflow">if</span>(<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#ac79cf2200f52166c66c75d5a055a84d7">gpgpu_frfcfs_dram_sched_queue_size</a> == 0 ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00122"></a>00122         <span class="keywordflow">return</span> <a class="code" href="classdram__t.html#a129e90fd7a1141cbad2c6f25139610b8">m_frfcfs_scheduler</a>-&gt;<a class="code" href="classfrfcfs__scheduler.html#a465c30766e53db716b5c2a52f5f848ec">num_pending</a>() &gt;= <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#ac79cf2200f52166c66c75d5a055a84d7">gpgpu_frfcfs_dram_sched_queue_size</a>;
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124    <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#aac7a16c9350c4c9d4cd75dfb26c9e64c">full</a>();
<a name="l00125"></a>00125 }
<a name="l00126"></a>00126 
<a name="l00127"></a><a class="code" href="classdram__t.html#a07d2bdd1168650bcc47fdfb8fb41047f">00127</a> <span class="keywordtype">unsigned</span> <a class="code" href="classdram__t.html#a07d2bdd1168650bcc47fdfb8fb41047f">dram_t::que_length</a>()<span class="keyword"> const</span>
<a name="l00128"></a>00128 <span class="keyword"></span>{
<a name="l00129"></a>00129    <span class="keywordtype">unsigned</span> nreqs = 0;
<a name="l00130"></a>00130    <span class="keywordflow">if</span> (<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a421670cf616901c81fb4635b08f95906">scheduler_type</a> == <a class="code" href="gpu-sim_8h.html#ad4d27d098cea5019101194f61d306ebaaa71a147cbd849f25be0765d23d7b020a">DRAM_FRFCFS</a> ) {
<a name="l00131"></a>00131       nreqs = <a class="code" href="classdram__t.html#a129e90fd7a1141cbad2c6f25139610b8">m_frfcfs_scheduler</a>-&gt;<a class="code" href="classfrfcfs__scheduler.html#a465c30766e53db716b5c2a52f5f848ec">num_pending</a>();
<a name="l00132"></a>00132    } <span class="keywordflow">else</span> {
<a name="l00133"></a>00133       nreqs = <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>();
<a name="l00134"></a>00134    }
<a name="l00135"></a>00135    <span class="keywordflow">return</span> nreqs;
<a name="l00136"></a>00136 }
<a name="l00137"></a>00137 
<a name="l00138"></a><a class="code" href="classdram__t.html#a078324cfb869990dea28d7a6587c7119">00138</a> <span class="keywordtype">bool</span> <a class="code" href="classdram__t.html#a078324cfb869990dea28d7a6587c7119">dram_t::returnq_full</a>()<span class="keyword"> const</span>
<a name="l00139"></a>00139 <span class="keyword"></span>{
<a name="l00140"></a>00140    <span class="keywordflow">return</span> <a class="code" href="classdram__t.html#ac6eeb6558590765774602553cc50cf6a">returnq</a>-&gt;<a class="code" href="classfifo__pipeline.html#aac7a16c9350c4c9d4cd75dfb26c9e64c">full</a>();
<a name="l00141"></a>00141 }
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="classdram__t.html#a11d271f214ae0437c6ed9b4365052592">00143</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classdram__t.html#a11d271f214ae0437c6ed9b4365052592">dram_t::queue_limit</a>()<span class="keyword"> const </span>
<a name="l00144"></a>00144 <span class="keyword"></span>{ 
<a name="l00145"></a>00145    <span class="keywordflow">return</span> <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#ac79cf2200f52166c66c75d5a055a84d7">gpgpu_frfcfs_dram_sched_queue_size</a>; 
<a name="l00146"></a>00146 }
<a name="l00147"></a>00147 
<a name="l00148"></a>00148 
<a name="l00149"></a><a class="code" href="classdram__req__t.html#ac61bf9dd0f1b6e52b8d9b285c46a6270">00149</a> <a class="code" href="classdram__req__t.html#ac61bf9dd0f1b6e52b8d9b285c46a6270">dram_req_t::dram_req_t</a>( <span class="keyword">class</span> <a class="code" href="classmem__fetch.html">mem_fetch</a> *mf )
<a name="l00150"></a>00150 {
<a name="l00151"></a>00151    <a class="code" href="classdram__req__t.html#ade161f34c32816ff4ae162ce9d588e03">txbytes</a> = 0;
<a name="l00152"></a>00152    <a class="code" href="classdram__req__t.html#a95536c1f6ae510adf57e20646a78003e">dqbytes</a> = 0;
<a name="l00153"></a>00153    <a class="code" href="classdram__req__t.html#ac52de71274033b5f255314c64bdbcf4b">data</a> = mf;
<a name="l00154"></a>00154 
<a name="l00155"></a>00155    <span class="keyword">const</span> <a class="code" href="structaddrdec__t.html">addrdec_t</a> &amp;tlx = mf-&gt;<a class="code" href="classmem__fetch.html#a52dc12df9bcd9011a04fccf22027a4ef">get_tlx_addr</a>();
<a name="l00156"></a>00156 
<a name="l00157"></a>00157    <a class="code" href="classdram__req__t.html#a18e712f85faeeb5cb20d3ea96e7f5d09">bk</a>  = tlx.<a class="code" href="structaddrdec__t.html#a981a30d1fe07455b428c1ca0f5ae3d7b">bk</a>; 
<a name="l00158"></a>00158    <a class="code" href="classdram__req__t.html#aa37cd939f5031135ba03a6a9bcd7d5de">row</a> = tlx.<a class="code" href="structaddrdec__t.html#a0bec5eaf244bce7ab5b3951cf00c7dc0">row</a>; 
<a name="l00159"></a>00159    <a class="code" href="classdram__req__t.html#af57caaddc5017853b4ba475117b5af50">col</a> = tlx.<a class="code" href="structaddrdec__t.html#ad93fc9f1694ae22afe3a24903f38e02c">col</a>; 
<a name="l00160"></a>00160    <a class="code" href="classdram__req__t.html#a27176065b6590b5847838c0745734abc">nbytes</a> = mf-&gt;<a class="code" href="classmem__fetch.html#af2ce831a96a04f491284d3d4bce1fbf0">get_data_size</a>();
<a name="l00161"></a>00161 
<a name="l00162"></a>00162    <a class="code" href="classdram__req__t.html#aff4597d02410d514556e0e80d00200a9">timestamp</a> = <a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a> + <a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>;
<a name="l00163"></a>00163    <a class="code" href="classdram__req__t.html#a5b54e449d8ae3235a11847c84f2e250c">addr</a> = mf-&gt;<a class="code" href="classmem__fetch.html#a06fa448b09acf9a40fd294aa5877895b">get_addr</a>();
<a name="l00164"></a>00164    <a class="code" href="classdram__req__t.html#a9aa00113002daf5759951af6265174d6">insertion_time</a> = (unsigned) gpu_sim_cycle;
<a name="l00165"></a>00165    <a class="code" href="classdram__req__t.html#ab9e55ac03c519c639f49a19bf7f000de">rw</a> = <a class="code" href="classdram__req__t.html#ac52de71274033b5f255314c64bdbcf4b">data</a>-&gt;<a class="code" href="classmem__fetch.html#a0e449bde79c7162ec62c433338ac0293">get_is_write</a>()?WRITE:READ;
<a name="l00166"></a>00166 }
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="classdram__t.html#a6378a7199225458f4bab20f32133ee41">00168</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#a6378a7199225458f4bab20f32133ee41">dram_t::push</a>( <span class="keyword">class</span> <a class="code" href="classmem__fetch.html">mem_fetch</a> *data ) 
<a name="l00169"></a>00169 {
<a name="l00170"></a>00170    assert(<span class="keywordtype">id</span> == data-&gt;<a class="code" href="classmem__fetch.html#a52dc12df9bcd9011a04fccf22027a4ef">get_tlx_addr</a>().<a class="code" href="structaddrdec__t.html#ad38416978610da35e9c1e97dadcce0ad">chip</a>); <span class="comment">// Ensure request is in correct memory partition</span>
<a name="l00171"></a>00171 
<a name="l00172"></a>00172    <a class="code" href="classdram__req__t.html">dram_req_t</a> *mrq = <span class="keyword">new</span> <a class="code" href="classdram__req__t.html">dram_req_t</a>(data);
<a name="l00173"></a>00173    data-&gt;<a class="code" href="classmem__fetch.html#acbda50764b3c8d6f79ffa279021253da">set_status</a>(IN_PARTITION_MC_INTERFACE_QUEUE,<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>);
<a name="l00174"></a>00174    <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a56c3c47193df39f15ebd5ff960d273d0">push</a>(mrq);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176    <span class="comment">// stats...</span>
<a name="l00177"></a>00177    <a class="code" href="classdram__t.html#aac2886407cdd226b50e04a09273802c5">n_req</a> += 1;
<a name="l00178"></a>00178    <a class="code" href="classdram__t.html#aa71aa891be3c4feba96242aa4fbbd5b0">n_req_partial</a> += 1;
<a name="l00179"></a>00179    <span class="keywordflow">if</span> ( <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a421670cf616901c81fb4635b08f95906">scheduler_type</a> == <a class="code" href="gpu-sim_8h.html#ad4d27d098cea5019101194f61d306ebaaa71a147cbd849f25be0765d23d7b020a">DRAM_FRFCFS</a> ) {
<a name="l00180"></a>00180       <span class="keywordtype">unsigned</span> nreqs = <a class="code" href="classdram__t.html#a129e90fd7a1141cbad2c6f25139610b8">m_frfcfs_scheduler</a>-&gt;<a class="code" href="classfrfcfs__scheduler.html#a465c30766e53db716b5c2a52f5f848ec">num_pending</a>();
<a name="l00181"></a>00181       <span class="keywordflow">if</span> ( nreqs &gt; <a class="code" href="classdram__t.html#a936cd29e518a0e1a704e85c06df20168">max_mrqs_temp</a>)
<a name="l00182"></a>00182          <a class="code" href="classdram__t.html#a936cd29e518a0e1a704e85c06df20168">max_mrqs_temp</a> = nreqs;
<a name="l00183"></a>00183    } <span class="keywordflow">else</span> {
<a name="l00184"></a>00184       <a class="code" href="classdram__t.html#a936cd29e518a0e1a704e85c06df20168">max_mrqs_temp</a> = (<a class="code" href="classdram__t.html#a936cd29e518a0e1a704e85c06df20168">max_mrqs_temp</a> &gt; <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>())? <a class="code" href="classdram__t.html#a936cd29e518a0e1a704e85c06df20168">max_mrqs_temp</a> : <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>();
<a name="l00185"></a>00185    }
<a name="l00186"></a>00186    <a class="code" href="classdram__t.html#a61d276d9bc31582b916ee271d6b41bbb">m_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#afd991dc39b3376b47100bca893ec8747">memlatstat_dram_access</a>(data);
<a name="l00187"></a>00187 }
<a name="l00188"></a>00188 
<a name="l00189"></a><a class="code" href="classdram__t.html#aaba825939737bcb13d520c10efffe564">00189</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#aaba825939737bcb13d520c10efffe564">dram_t::scheduler_fifo</a>()
<a name="l00190"></a>00190 {
<a name="l00191"></a>00191    <span class="keywordflow">if</span> (!<a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a737f2b64684773b53329e52aee168c11">empty</a>()) {
<a name="l00192"></a>00192       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bkn;
<a name="l00193"></a>00193       <a class="code" href="classdram__req__t.html">dram_req_t</a> *head_mrqq = <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a7ef9a28fa0802ec9569a97ba240bd7f3">top</a>();
<a name="l00194"></a>00194       head_mrqq-&gt;<a class="code" href="classdram__req__t.html#ac52de71274033b5f255314c64bdbcf4b">data</a>-&gt;<a class="code" href="classmem__fetch.html#acbda50764b3c8d6f79ffa279021253da">set_status</a>(IN_PARTITION_MC_BANK_ARB_QUEUE,<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>);
<a name="l00195"></a>00195       bkn = head_mrqq-&gt;<a class="code" href="classdram__req__t.html#a18e712f85faeeb5cb20d3ea96e7f5d09">bk</a>;
<a name="l00196"></a>00196       <span class="keywordflow">if</span> (!<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[bkn]-&gt;mrq) 
<a name="l00197"></a>00197          <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[bkn]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a> = <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a88ff57f90f79dc1e7280f8d4d469c949">pop</a>();
<a name="l00198"></a>00198    }
<a name="l00199"></a>00199 }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 <span class="preprocessor">#define DEC2ZERO(x) x = (x)? (x-1) : 0;</span>
<a name="l00203"></a>00203 <span class="preprocessor"></span><span class="preprocessor">#define SWAP(a,b) a ^= b; b ^= a; a ^= b;</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>
<a name="l00205"></a><a class="code" href="classdram__t.html#ae0d873cc168b834f9629947bd20841fd">00205</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#ae0d873cc168b834f9629947bd20841fd">dram_t::cycle</a>()
<a name="l00206"></a>00206 {
<a name="l00207"></a>00207 
<a name="l00208"></a>00208    <span class="keywordflow">if</span>( !<a class="code" href="classdram__t.html#ac6eeb6558590765774602553cc50cf6a">returnq</a>-&gt;<a class="code" href="classfifo__pipeline.html#aac7a16c9350c4c9d4cd75dfb26c9e64c">full</a>() ) {
<a name="l00209"></a>00209        <a class="code" href="classdram__req__t.html">dram_req_t</a> *cmd = <a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a88ff57f90f79dc1e7280f8d4d469c949">pop</a>();
<a name="l00210"></a>00210        <span class="keywordflow">if</span>( cmd ) {
<a name="l00211"></a>00211 <span class="preprocessor">#ifdef DRAM_VIEWCMD </span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>           printf(<span class="stringliteral">&quot;\tDQ: BK%d Row:%03x Col:%03x&quot;</span>, cmd-&gt;<a class="code" href="classdram__req__t.html#a18e712f85faeeb5cb20d3ea96e7f5d09">bk</a>, cmd-&gt;<a class="code" href="classdram__req__t.html#aa37cd939f5031135ba03a6a9bcd7d5de">row</a>, cmd-&gt;<a class="code" href="classdram__req__t.html#af57caaddc5017853b4ba475117b5af50">col</a> + cmd-&gt;<a class="code" href="classdram__req__t.html#a95536c1f6ae510adf57e20646a78003e">dqbytes</a>);
<a name="l00213"></a>00213 <span class="preprocessor">#endif</span>
<a name="l00214"></a>00214 <span class="preprocessor"></span>           cmd-&gt;<a class="code" href="classdram__req__t.html#a95536c1f6ae510adf57e20646a78003e">dqbytes</a> += <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a78b3b9fbac23ea6b1405b68f1ca8046c">dram_atom_size</a>; 
<a name="l00215"></a>00215            <span class="keywordflow">if</span> (cmd-&gt;<a class="code" href="classdram__req__t.html#a95536c1f6ae510adf57e20646a78003e">dqbytes</a> &gt;= cmd-&gt;<a class="code" href="classdram__req__t.html#a27176065b6590b5847838c0745734abc">nbytes</a>) {
<a name="l00216"></a>00216               <a class="code" href="classmem__fetch.html">mem_fetch</a> *data = cmd-&gt;<a class="code" href="classdram__req__t.html#ac52de71274033b5f255314c64bdbcf4b">data</a>; 
<a name="l00217"></a>00217               data-&gt;<a class="code" href="classmem__fetch.html#acbda50764b3c8d6f79ffa279021253da">set_status</a>(IN_PARTITION_MC_RETURNQ,<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>); 
<a name="l00218"></a>00218               <span class="keywordflow">if</span>( data-&gt;<a class="code" href="classmem__fetch.html#ad6d11b27562271b7e6a99c76005021b1">get_access_type</a>() != L1_WRBK_ACC &amp;&amp; data-&gt;<a class="code" href="classmem__fetch.html#ad6d11b27562271b7e6a99c76005021b1">get_access_type</a>() != L2_WRBK_ACC ) {
<a name="l00219"></a>00219                  data-&gt;<a class="code" href="classmem__fetch.html#a5c0a6de6dafab89a3f4ab7349f1c9e8c">set_reply</a>();
<a name="l00220"></a>00220                  <a class="code" href="classdram__t.html#ac6eeb6558590765774602553cc50cf6a">returnq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a56c3c47193df39f15ebd5ff960d273d0">push</a>(data);
<a name="l00221"></a>00221               } <span class="keywordflow">else</span> {
<a name="l00222"></a>00222                  <a class="code" href="classdram__t.html#a4be2027f5499ee182708dd9c0336890e">m_memory_partition_unit</a>-&gt;<a class="code" href="classmemory__partition__unit.html#a87922db6dc73514505231f8bae25abd0">set_done</a>(data);
<a name="l00223"></a>00223                  <span class="keyword">delete</span> data;
<a name="l00224"></a>00224               }
<a name="l00225"></a>00225               <span class="keyword">delete</span> cmd;
<a name="l00226"></a>00226            }
<a name="l00227"></a>00227 <span class="preprocessor">#ifdef DRAM_VIEWCMD </span>
<a name="l00228"></a>00228 <span class="preprocessor"></span>           printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00229"></a>00229 <span class="preprocessor">#endif</span>
<a name="l00230"></a>00230 <span class="preprocessor"></span>       }
<a name="l00231"></a>00231    }
<a name="l00232"></a>00232 
<a name="l00233"></a>00233    <span class="comment">/* check if the upcoming request is on an idle bank */</span>
<a name="l00234"></a>00234    <span class="comment">/* Should we modify this so that multiple requests are checked? */</span>
<a name="l00235"></a>00235 
<a name="l00236"></a>00236    <span class="keywordflow">switch</span> (<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a421670cf616901c81fb4635b08f95906">scheduler_type</a>) {
<a name="l00237"></a>00237    <span class="keywordflow">case</span> <a class="code" href="gpu-sim_8h.html#ad4d27d098cea5019101194f61d306ebaa1faffea2ae2e8b66b4ed7e1f077bdce9">DRAM_FIFO</a>: <a class="code" href="classdram__t.html#aaba825939737bcb13d520c10efffe564">scheduler_fifo</a>(); <span class="keywordflow">break</span>;
<a name="l00238"></a>00238    <span class="keywordflow">case</span> <a class="code" href="gpu-sim_8h.html#ad4d27d098cea5019101194f61d306ebaaa71a147cbd849f25be0765d23d7b020a">DRAM_FRFCFS</a>: <a class="code" href="classdram__t.html#a6377597bcb4f634da09a0e5075b17000">scheduler_frfcfs</a>(); <span class="keywordflow">break</span>;
<a name="l00239"></a>00239     <span class="keywordflow">default</span>:
<a name="l00240"></a>00240         printf(<span class="stringliteral">&quot;Error: Unknown DRAM scheduler type\n&quot;</span>);
<a name="l00241"></a>00241         assert(0);
<a name="l00242"></a>00242    }
<a name="l00243"></a>00243    <span class="keywordflow">if</span> ( <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a421670cf616901c81fb4635b08f95906">scheduler_type</a> == <a class="code" href="gpu-sim_8h.html#ad4d27d098cea5019101194f61d306ebaaa71a147cbd849f25be0765d23d7b020a">DRAM_FRFCFS</a> ) {
<a name="l00244"></a>00244       <span class="keywordtype">unsigned</span> nreqs = <a class="code" href="classdram__t.html#a129e90fd7a1141cbad2c6f25139610b8">m_frfcfs_scheduler</a>-&gt;<a class="code" href="classfrfcfs__scheduler.html#a465c30766e53db716b5c2a52f5f848ec">num_pending</a>();
<a name="l00245"></a>00245       <span class="keywordflow">if</span> ( nreqs &gt; <a class="code" href="classdram__t.html#ae6962c3874d36f252d7dab64973bc774">max_mrqs</a>) {
<a name="l00246"></a>00246          <a class="code" href="classdram__t.html#ae6962c3874d36f252d7dab64973bc774">max_mrqs</a> = nreqs;
<a name="l00247"></a>00247       }
<a name="l00248"></a>00248       <a class="code" href="classdram__t.html#a78c6b5af2da939c91f605355223db592">ave_mrqs</a> += nreqs;
<a name="l00249"></a>00249       <a class="code" href="classdram__t.html#ab5e75ab051a2ee58c466ae451cccb503">ave_mrqs_partial</a> += nreqs;
<a name="l00250"></a>00250    } <span class="keywordflow">else</span> {
<a name="l00251"></a>00251       <span class="keywordflow">if</span> (<a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>() &gt; <a class="code" href="classdram__t.html#ae6962c3874d36f252d7dab64973bc774">max_mrqs</a>) {
<a name="l00252"></a>00252          <a class="code" href="classdram__t.html#ae6962c3874d36f252d7dab64973bc774">max_mrqs</a> = <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>();
<a name="l00253"></a>00253       }
<a name="l00254"></a>00254       <a class="code" href="classdram__t.html#a78c6b5af2da939c91f605355223db592">ave_mrqs</a> += <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>();
<a name="l00255"></a>00255       <a class="code" href="classdram__t.html#ab5e75ab051a2ee58c466ae451cccb503">ave_mrqs_partial</a> +=  <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>();
<a name="l00256"></a>00256    }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258    <span class="keywordtype">unsigned</span> k=<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;
<a name="l00259"></a>00259    <span class="keywordtype">bool</span> issued = <span class="keyword">false</span>;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261    <span class="comment">// check if any bank is ready to issue a new read</span>
<a name="l00262"></a>00262    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;i++) {
<a name="l00263"></a>00263       <span class="keywordtype">unsigned</span> j = (i + <a class="code" href="classdram__t.html#aebe0ae69b84b5ee1665ae11117348b2a">prio</a>) % <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;
<a name="l00264"></a>00264       <span class="keywordtype">unsigned</span> grp = j&gt;&gt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#aeb015ee8fd0727b64d0d6a9a79dc57b3">bk_tag_length</a>;
<a name="l00265"></a>00265       <a class="code" href="lex_8yy_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq) { <span class="comment">//if currently servicing a memory request</span>
<a name="l00266"></a>00266           <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#ac52de71274033b5f255314c64bdbcf4b">data</a>-&gt;<a class="code" href="classmem__fetch.html#acbda50764b3c8d6f79ffa279021253da">set_status</a>(IN_PARTITION_DRAM,<a class="code" href="gpu-sim_8cc.html#a659fec271553d05e676c52314c8fcfe1">gpu_sim_cycle</a>+<a class="code" href="gpu-sim_8cc.html#acef6bbfd6ec09fe29e2641cace785058">gpu_tot_sim_cycle</a>);
<a name="l00267"></a>00267          <span class="comment">// correct row activated for a READ</span>
<a name="l00268"></a>00268          <span class="keywordflow">if</span> ( !issued &amp;&amp; !<a class="code" href="classdram__t.html#a7b177711f409f7dcb30793599e7a944b">CCDc</a> &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCDc &amp;&amp;
<a name="l00269"></a>00269               !(<a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[grp]-&gt;CCDLc) &amp;&amp;
<a name="l00270"></a>00270               (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;curr_row == <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq-&gt;row) &amp;&amp; 
<a name="l00271"></a>00271               (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#ab9e55ac03c519c639f49a19bf7f000de">rw</a> == READ) &amp;&amp; (<a class="code" href="classdram__t.html#a34a02953da3e45bb86afee0a5efb0484">WTRc</a> == 0 )  &amp;&amp;
<a name="l00272"></a>00272               (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a4271d0d2473be94d749771817d03e62e">state</a> == BANK_ACTIVE) &amp;&amp;
<a name="l00273"></a>00273               !<a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a>-&gt;<a class="code" href="classfifo__pipeline.html#aac7a16c9350c4c9d4cd75dfb26c9e64c">full</a>() ) {
<a name="l00274"></a>00274             <span class="keywordflow">if</span> (<a class="code" href="classdram__t.html#a59994dd82c5dcb5ca07d8b2e2b55d0c6">rw</a>==WRITE) {
<a name="l00275"></a>00275                <a class="code" href="classdram__t.html#a59994dd82c5dcb5ca07d8b2e2b55d0c6">rw</a>=READ;
<a name="l00276"></a>00276                <a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a29dc1d590f284487a6c41c73a4bba15c">set_min_length</a>(<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a6398ae70b92a141ceefbdadb3092fa90">CL</a>);
<a name="l00277"></a>00277             }
<a name="l00278"></a>00278             <a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a56c3c47193df39f15ebd5ff960d273d0">push</a>(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq);
<a name="l00279"></a>00279             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#ade161f34c32816ff4ae162ce9d588e03">txbytes</a> += <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a78b3b9fbac23ea6b1405b68f1ca8046c">dram_atom_size</a>; 
<a name="l00280"></a>00280             <a class="code" href="classdram__t.html#a7b177711f409f7dcb30793599e7a944b">CCDc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#aea4f9503ca5e577eae352f5f9b5f0fe8">tCCD</a>;
<a name="l00281"></a>00281             <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[grp]-&gt;<a class="code" href="structbankgrp__t.html#ace2501e6e411388dc9e1a046465c3bf7">CCDLc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a9f698c65b9c0a434b49b37288d78bba8">tCCDL</a>;
<a name="l00282"></a>00282             <a class="code" href="classdram__t.html#a60c19905c01f3ba73853b10033b61fd8">RTWc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a88f558a74355bcbfd393b4419796f751">tRTW</a>;
<a name="l00283"></a>00283             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a6db129e32523cd23c70689b92c599987">RTPc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a1e2790f6b96fbfefc8bbc32617671cf3">BL</a>/<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a8967282309ea18da15a98e32c78688ed">data_command_freq_ratio</a>;
<a name="l00284"></a>00284             <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[grp]-&gt;<a class="code" href="structbankgrp__t.html#a31c3f61330fdb61b46899a63e474960d">RTPLc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a6430136d0fd9fda5e5d29041d50601fc">tRTPL</a>;
<a name="l00285"></a>00285             issued = <span class="keyword">true</span>;
<a name="l00286"></a>00286             <a class="code" href="classdram__t.html#af7599fc4cc513e4a7a376afccb5800f2">n_rd</a>++;
<a name="l00287"></a>00287             <a class="code" href="classdram__t.html#a1c405d567c45fcbebbabff64b803af18">bwutil</a> += <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a1e2790f6b96fbfefc8bbc32617671cf3">BL</a>/<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a8967282309ea18da15a98e32c78688ed">data_command_freq_ratio</a>;
<a name="l00288"></a>00288             <a class="code" href="classdram__t.html#af35797990631e1ea450e8abf4e2a4b63">bwutil_partial</a> += <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a1e2790f6b96fbfefc8bbc32617671cf3">BL</a>/<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a8967282309ea18da15a98e32c78688ed">data_command_freq_ratio</a>;
<a name="l00289"></a>00289             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a442b5dd9e64b6be4089cda23978cab53">n_access</a>++;
<a name="l00290"></a>00290 <span class="preprocessor">#ifdef DRAM_VERIFY</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span>            PRINT_CYCLE=1;
<a name="l00292"></a>00292             printf(<span class="stringliteral">&quot;\tRD  Bk:%d Row:%03x Col:%03x \n&quot;</span>,
<a name="l00293"></a>00293                    j, <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;curr_row,
<a name="l00294"></a>00294                    <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq-&gt;col + <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#ade161f34c32816ff4ae162ce9d588e03">txbytes</a> - <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a78b3b9fbac23ea6b1405b68f1ca8046c">dram_atom_size</a>);
<a name="l00295"></a>00295 <span class="preprocessor">#endif            </span>
<a name="l00296"></a>00296 <span class="preprocessor"></span>            <span class="comment">// transfer done</span>
<a name="l00297"></a>00297             <span class="keywordflow">if</span> ( !(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq-&gt;txbytes &lt; <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#a27176065b6590b5847838c0745734abc">nbytes</a>) ) {
<a name="l00298"></a>00298                <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a> = NULL;
<a name="l00299"></a>00299             }
<a name="l00300"></a>00300          } <span class="keywordflow">else</span>
<a name="l00301"></a>00301             <span class="comment">// correct row activated for a WRITE</span>
<a name="l00302"></a>00302             <span class="keywordflow">if</span> ( !issued &amp;&amp; !<a class="code" href="classdram__t.html#a7b177711f409f7dcb30793599e7a944b">CCDc</a> &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCDWRc &amp;&amp;
<a name="l00303"></a>00303                  !(<a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[grp]-&gt;CCDLc) &amp;&amp;
<a name="l00304"></a>00304                  (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;curr_row == <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq-&gt;row)  &amp;&amp; 
<a name="l00305"></a>00305                  (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#ab9e55ac03c519c639f49a19bf7f000de">rw</a> == WRITE) &amp;&amp; (<a class="code" href="classdram__t.html#a60c19905c01f3ba73853b10033b61fd8">RTWc</a> == 0 )  &amp;&amp;
<a name="l00306"></a>00306                  (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a4271d0d2473be94d749771817d03e62e">state</a> == BANK_ACTIVE) &amp;&amp;
<a name="l00307"></a>00307                  !<a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a>-&gt;<a class="code" href="classfifo__pipeline.html#aac7a16c9350c4c9d4cd75dfb26c9e64c">full</a>() ) {
<a name="l00308"></a>00308             <span class="keywordflow">if</span> (<a class="code" href="classdram__t.html#a59994dd82c5dcb5ca07d8b2e2b55d0c6">rw</a>==READ) {
<a name="l00309"></a>00309                <a class="code" href="classdram__t.html#a59994dd82c5dcb5ca07d8b2e2b55d0c6">rw</a>=WRITE;
<a name="l00310"></a>00310                <a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a29dc1d590f284487a6c41c73a4bba15c">set_min_length</a>(<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a48e96cf5ff1f74aa3198d9b635f8e9cd">WL</a>);
<a name="l00311"></a>00311             }
<a name="l00312"></a>00312             <a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a56c3c47193df39f15ebd5ff960d273d0">push</a>(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq);
<a name="l00313"></a>00313 
<a name="l00314"></a>00314             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#ade161f34c32816ff4ae162ce9d588e03">txbytes</a> += <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a78b3b9fbac23ea6b1405b68f1ca8046c">dram_atom_size</a>; 
<a name="l00315"></a>00315             <a class="code" href="classdram__t.html#a7b177711f409f7dcb30793599e7a944b">CCDc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#aea4f9503ca5e577eae352f5f9b5f0fe8">tCCD</a>;
<a name="l00316"></a>00316             <a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[grp]-&gt;<a class="code" href="structbankgrp__t.html#ace2501e6e411388dc9e1a046465c3bf7">CCDLc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a9f698c65b9c0a434b49b37288d78bba8">tCCDL</a>;
<a name="l00317"></a>00317             <a class="code" href="classdram__t.html#a34a02953da3e45bb86afee0a5efb0484">WTRc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a4ec25c0b4d3dad869314e8573224473f">tWTR</a>; 
<a name="l00318"></a>00318             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a467d22f525616575ceb13ef01e63d8a0">WTPc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#ad6a254e02d2b192e27946b6c518ad947">tWTP</a>; 
<a name="l00319"></a>00319             issued = <span class="keyword">true</span>;
<a name="l00320"></a>00320             <a class="code" href="classdram__t.html#a0b754f0cc29b2921ff9dac08ef57f6bf">n_wr</a>++;
<a name="l00321"></a>00321             <a class="code" href="classdram__t.html#a1c405d567c45fcbebbabff64b803af18">bwutil</a> += <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a1e2790f6b96fbfefc8bbc32617671cf3">BL</a>/<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a8967282309ea18da15a98e32c78688ed">data_command_freq_ratio</a>;
<a name="l00322"></a>00322             <a class="code" href="classdram__t.html#af35797990631e1ea450e8abf4e2a4b63">bwutil_partial</a> += <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a1e2790f6b96fbfefc8bbc32617671cf3">BL</a>/<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a8967282309ea18da15a98e32c78688ed">data_command_freq_ratio</a>;
<a name="l00323"></a>00323 <span class="preprocessor">#ifdef DRAM_VERIFY</span>
<a name="l00324"></a>00324 <span class="preprocessor"></span>            PRINT_CYCLE=1;
<a name="l00325"></a>00325             printf(<span class="stringliteral">&quot;\tWR  Bk:%d Row:%03x Col:%03x \n&quot;</span>,
<a name="l00326"></a>00326                    j, <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;curr_row, 
<a name="l00327"></a>00327                    <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq-&gt;col + <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#ade161f34c32816ff4ae162ce9d588e03">txbytes</a> - <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a78b3b9fbac23ea6b1405b68f1ca8046c">dram_atom_size</a>);
<a name="l00328"></a>00328 <span class="preprocessor">#endif  </span>
<a name="l00329"></a>00329 <span class="preprocessor"></span>            <span class="comment">// transfer done </span>
<a name="l00330"></a>00330             <span class="keywordflow">if</span> ( !(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq-&gt;txbytes &lt; <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#a27176065b6590b5847838c0745734abc">nbytes</a>) ) {
<a name="l00331"></a>00331                <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a> = NULL;
<a name="l00332"></a>00332             }
<a name="l00333"></a>00333          }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335          <span class="keywordflow">else</span>
<a name="l00336"></a>00336             <span class="comment">// bank is idle</span>
<a name="l00337"></a>00337             <span class="keywordflow">if</span> ( !issued &amp;&amp; !<a class="code" href="classdram__t.html#a87960e2058638c0fecd71b6bbfcd3abd">RRDc</a> &amp;&amp; 
<a name="l00338"></a>00338                  (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;state == BANK_IDLE) &amp;&amp;
<a name="l00339"></a>00339                  !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RPc &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCc ) {
<a name="l00340"></a>00340 <span class="preprocessor">#ifdef DRAM_VERIFY</span>
<a name="l00341"></a>00341 <span class="preprocessor"></span>            PRINT_CYCLE=1;
<a name="l00342"></a>00342             printf(<span class="stringliteral">&quot;\tACT BK:%d NewRow:%03x From:%03x \n&quot;</span>,
<a name="l00343"></a>00343                    j,<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;mrq-&gt;row,<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a8b98f63dbd2d1e2f1136c7dba4583cd0">curr_row</a>);
<a name="l00344"></a>00344 <span class="preprocessor">#endif</span>
<a name="l00345"></a>00345 <span class="preprocessor"></span>            <span class="comment">// activate the row with current memory request </span>
<a name="l00346"></a>00346             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a8b98f63dbd2d1e2f1136c7dba4583cd0">curr_row</a> = <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#aa37cd939f5031135ba03a6a9bcd7d5de">row</a>;
<a name="l00347"></a>00347             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a4271d0d2473be94d749771817d03e62e">state</a> = BANK_ACTIVE;
<a name="l00348"></a>00348             <a class="code" href="classdram__t.html#a87960e2058638c0fecd71b6bbfcd3abd">RRDc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#ab723b2fd856475f0e5ce4d79432c6542">tRRD</a>;
<a name="l00349"></a>00349             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ab7278539a6c11579fdb870ff01176576">RCDc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#ab8f634ab7d4868cde02dcbd27272ea6a">tRCD</a>;
<a name="l00350"></a>00350             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a4e91eba8aff24c6767c4eb243dfd5a12">RCDWRc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a2951c4f82cd569d99995963634cb1643">tRCDWR</a>;
<a name="l00351"></a>00351             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a1b8855659811c6ca1d9de0986bf30827">RASc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a6d65848a93f7695b2ca40854e10e5f37">tRAS</a>;
<a name="l00352"></a>00352             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a97f489753fc362377ccf2f00efcf5582">RCc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a31e052a3ea47bb53223417afd69e070a">tRC</a>;
<a name="l00353"></a>00353             <a class="code" href="classdram__t.html#aebe0ae69b84b5ee1665ae11117348b2a">prio</a> = (j + 1) % <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;
<a name="l00354"></a>00354             issued = <span class="keyword">true</span>;
<a name="l00355"></a>00355             <a class="code" href="classdram__t.html#a4d2733626a32b05eae69ca49da91791f">n_act_partial</a>++;
<a name="l00356"></a>00356             <a class="code" href="classdram__t.html#a53febc1cad0d446b079a2ff94f021a5a">n_act</a>++;
<a name="l00357"></a>00357          }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359          <span class="keywordflow">else</span>
<a name="l00360"></a>00360             <span class="comment">// different row activated</span>
<a name="l00361"></a>00361             <span class="keywordflow">if</span> ( (!issued) &amp;&amp; 
<a name="l00362"></a>00362                  (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a8b98f63dbd2d1e2f1136c7dba4583cd0">curr_row</a> != <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#aa37cd939f5031135ba03a6a9bcd7d5de">row</a>) &amp;&amp;
<a name="l00363"></a>00363                  (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;state == BANK_ACTIVE) &amp;&amp; 
<a name="l00364"></a>00364                  (!<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a1b8855659811c6ca1d9de0986bf30827">RASc</a> &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a467d22f525616575ceb13ef01e63d8a0">WTPc</a> &amp;&amp; 
<a name="l00365"></a>00365                   !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a6db129e32523cd23c70689b92c599987">RTPc</a> &amp;&amp;
<a name="l00366"></a>00366                   !<a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[grp]-&gt;<a class="code" href="structbankgrp__t.html#a31c3f61330fdb61b46899a63e474960d">RTPLc</a>) ) {
<a name="l00367"></a>00367             <span class="comment">// make the bank idle again</span>
<a name="l00368"></a>00368             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a4271d0d2473be94d749771817d03e62e">state</a> = BANK_IDLE;
<a name="l00369"></a>00369             <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a1323cd0652cce6dac9e4e70f7a2bd5b5">RPc</a> = <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a5e1836a07b0b645f4cb192e3b20e7c02">tRP</a>;
<a name="l00370"></a>00370             <a class="code" href="classdram__t.html#aebe0ae69b84b5ee1665ae11117348b2a">prio</a> = (j + 1) % <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;
<a name="l00371"></a>00371             issued = <span class="keyword">true</span>;
<a name="l00372"></a>00372             <a class="code" href="classdram__t.html#a4d4dc5cc2088ac90ffbb1b450ad34559">n_pre</a>++;
<a name="l00373"></a>00373             <a class="code" href="classdram__t.html#afa1a0ee6ba3a83314992dba753a179e4">n_pre_partial</a>++;
<a name="l00374"></a>00374 #ifdef DRAM_VERIFY
<a name="l00375"></a>00375             PRINT_CYCLE=1;
<a name="l00376"></a>00376             printf(<span class="stringliteral">&quot;\tPRE BK:%d Row:%03x \n&quot;</span>, j,<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;curr_row);
<a name="l00377"></a>00377 <span class="preprocessor">#endif</span>
<a name="l00378"></a>00378 <span class="preprocessor"></span>         }
<a name="l00379"></a>00379       } <span class="keywordflow">else</span> {
<a name="l00380"></a>00380          <span class="keywordflow">if</span> (!<a class="code" href="classdram__t.html#a7b177711f409f7dcb30793599e7a944b">CCDc</a> &amp;&amp; !<a class="code" href="classdram__t.html#a87960e2058638c0fecd71b6bbfcd3abd">RRDc</a> &amp;&amp; !<a class="code" href="classdram__t.html#a60c19905c01f3ba73853b10033b61fd8">RTWc</a> &amp;&amp; !<a class="code" href="classdram__t.html#a34a02953da3e45bb86afee0a5efb0484">WTRc</a> &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCDc &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RASc
<a name="l00381"></a>00381              &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCc &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RPc  &amp;&amp; !<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCDWRc) k--;
<a name="l00382"></a>00382          <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;<a class="code" href="structbank__t.html#a351751b5a91835d2a3abad6bbeca5961">n_idle</a>++;
<a name="l00383"></a>00383       }
<a name="l00384"></a>00384    }
<a name="l00385"></a>00385    <span class="keywordflow">if</span> (!issued) {
<a name="l00386"></a>00386       <a class="code" href="classdram__t.html#a1e74a7d93bd4c33f2226ad7eae943973">n_nop</a>++;
<a name="l00387"></a>00387       <a class="code" href="classdram__t.html#a4c9eec005e028644c30d5aeef0ad78eb">n_nop_partial</a>++;
<a name="l00388"></a>00388 <span class="preprocessor">#ifdef DRAM_VIEWCMD</span>
<a name="l00389"></a>00389 <span class="preprocessor"></span>      printf(<span class="stringliteral">&quot;\tNOP                        &quot;</span>);
<a name="l00390"></a>00390 <span class="preprocessor">#endif</span>
<a name="l00391"></a>00391 <span class="preprocessor"></span>   }
<a name="l00392"></a>00392    <span class="keywordflow">if</span> (k) {
<a name="l00393"></a>00393       <a class="code" href="classdram__t.html#abf19a1f7be3d99008258f90c530daf73">n_activity</a>++;
<a name="l00394"></a>00394       <a class="code" href="classdram__t.html#aeb3e2780e5b4c56d07173036acc35c9d">n_activity_partial</a>++;
<a name="l00395"></a>00395    }
<a name="l00396"></a>00396    <a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a>++;
<a name="l00397"></a>00397    <a class="code" href="classdram__t.html#a8f7a7c13800554ff7b922dc322ee8fac">n_cmd_partial</a>++;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399    <span class="comment">// decrements counters once for each time dram_issueCMD is called</span>
<a name="l00400"></a>00400    DEC2ZERO(<a class="code" href="classdram__t.html#a87960e2058638c0fecd71b6bbfcd3abd">RRDc</a>);
<a name="l00401"></a>00401    DEC2ZERO(<a class="code" href="classdram__t.html#a7b177711f409f7dcb30793599e7a944b">CCDc</a>);
<a name="l00402"></a>00402    DEC2ZERO(<a class="code" href="classdram__t.html#a60c19905c01f3ba73853b10033b61fd8">RTWc</a>);
<a name="l00403"></a>00403    DEC2ZERO(<a class="code" href="classdram__t.html#a34a02953da3e45bb86afee0a5efb0484">WTRc</a>);
<a name="l00404"></a>00404    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j=0;j&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;j++) {
<a name="l00405"></a>00405       DEC2ZERO(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCDc);
<a name="l00406"></a>00406       DEC2ZERO(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RASc);
<a name="l00407"></a>00407       DEC2ZERO(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCc);
<a name="l00408"></a>00408       DEC2ZERO(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RPc);
<a name="l00409"></a>00409       DEC2ZERO(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RCDWRc);
<a name="l00410"></a>00410       DEC2ZERO(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;WTPc);
<a name="l00411"></a>00411       DEC2ZERO(<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[j]-&gt;RTPc);
<a name="l00412"></a>00412    }
<a name="l00413"></a>00413    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j=0; j&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a09eed581d308d1b934c8f92a914297b5">nbkgrp</a>; j++) {
<a name="l00414"></a>00414        DEC2ZERO(<a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[j]-&gt;CCDLc);
<a name="l00415"></a>00415        DEC2ZERO(<a class="code" href="classdram__t.html#adef44f6ee22aef220ff8b563a3fc3422">bkgrp</a>[j]-&gt;RTPLc);
<a name="l00416"></a>00416    }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 <span class="preprocessor">#ifdef DRAM_VISUALIZE</span>
<a name="l00419"></a>00419 <span class="preprocessor"></span>   <a class="code" href="classdram__t.html#ae100d76de65d253a994eb9e9267ec440">visualize</a>();
<a name="l00420"></a>00420 <span class="preprocessor">#endif</span>
<a name="l00421"></a>00421 <span class="preprocessor"></span>}
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 <span class="comment">//if mrq is being serviced by dram, gets popped after CL latency fulfilled</span>
<a name="l00424"></a><a class="code" href="classdram__t.html#a9747fffbdae1c6f76fdea438c79ee50b">00424</a> <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a>* <a class="code" href="classdram__t.html#a9747fffbdae1c6f76fdea438c79ee50b">dram_t::return_queue_pop</a>() 
<a name="l00425"></a>00425 {
<a name="l00426"></a>00426     <span class="keywordflow">return</span> <a class="code" href="classdram__t.html#ac6eeb6558590765774602553cc50cf6a">returnq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a88ff57f90f79dc1e7280f8d4d469c949">pop</a>();
<a name="l00427"></a>00427 }
<a name="l00428"></a>00428 
<a name="l00429"></a><a class="code" href="classdram__t.html#ab3d768bb6fbcc2e29413c1f056e74ea5">00429</a> <span class="keyword">class </span><a class="code" href="classmem__fetch.html">mem_fetch</a>* <a class="code" href="classdram__t.html#ab3d768bb6fbcc2e29413c1f056e74ea5">dram_t::return_queue_top</a>() 
<a name="l00430"></a>00430 {
<a name="l00431"></a>00431     <span class="keywordflow">return</span> <a class="code" href="classdram__t.html#ac6eeb6558590765774602553cc50cf6a">returnq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a7ef9a28fa0802ec9569a97ba240bd7f3">top</a>();
<a name="l00432"></a>00432 }
<a name="l00433"></a>00433 
<a name="l00434"></a><a class="code" href="classdram__t.html#a6fe9727ef2494c389e95a8264d1a3891">00434</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#a6fe9727ef2494c389e95a8264d1a3891">dram_t::print</a>( FILE* simFile)<span class="keyword"> const</span>
<a name="l00435"></a>00435 <span class="keyword"></span>{
<a name="l00436"></a>00436    <span class="keywordtype">unsigned</span> i;
<a name="l00437"></a>00437    fprintf(simFile,<span class="stringliteral">&quot;DRAM[%d]: %d bks, busW=%d BL=%d CL=%d, &quot;</span>, 
<a name="l00438"></a>00438            <span class="keywordtype">id</span>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a00e57442129fe1ac62079a5f94c325a5">busW</a>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a1e2790f6b96fbfefc8bbc32617671cf3">BL</a>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a6398ae70b92a141ceefbdadb3092fa90">CL</a> );
<a name="l00439"></a>00439    fprintf(simFile,<span class="stringliteral">&quot;tRRD=%d tCCD=%d, tRCD=%d tRAS=%d tRP=%d tRC=%d\n&quot;</span>,
<a name="l00440"></a>00440            <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#aea4f9503ca5e577eae352f5f9b5f0fe8">tCCD</a>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#ab723b2fd856475f0e5ce4d79432c6542">tRRD</a>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#ab8f634ab7d4868cde02dcbd27272ea6a">tRCD</a>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a6d65848a93f7695b2ca40854e10e5f37">tRAS</a>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a5e1836a07b0b645f4cb192e3b20e7c02">tRP</a>, <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a31e052a3ea47bb53223417afd69e070a">tRC</a> );
<a name="l00441"></a>00441    fprintf(simFile,<span class="stringliteral">&quot;n_cmd=%d n_nop=%d n_act=%d n_pre=%d n_req=%d n_rd=%d n_write=%d bw_util=%.4g\n&quot;</span>,
<a name="l00442"></a>00442            <a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a>, <a class="code" href="classdram__t.html#a1e74a7d93bd4c33f2226ad7eae943973">n_nop</a>, <a class="code" href="classdram__t.html#a53febc1cad0d446b079a2ff94f021a5a">n_act</a>, <a class="code" href="classdram__t.html#a4d4dc5cc2088ac90ffbb1b450ad34559">n_pre</a>, <a class="code" href="classdram__t.html#aac2886407cdd226b50e04a09273802c5">n_req</a>, <a class="code" href="classdram__t.html#af7599fc4cc513e4a7a376afccb5800f2">n_rd</a>, <a class="code" href="classdram__t.html#a0b754f0cc29b2921ff9dac08ef57f6bf">n_wr</a>,
<a name="l00443"></a>00443            (<span class="keywordtype">float</span>)<a class="code" href="classdram__t.html#a1c405d567c45fcbebbabff64b803af18">bwutil</a>/<a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a>);
<a name="l00444"></a>00444    fprintf(simFile,<span class="stringliteral">&quot;n_activity=%d dram_eff=%.4g\n&quot;</span>,
<a name="l00445"></a>00445            <a class="code" href="classdram__t.html#abf19a1f7be3d99008258f90c530daf73">n_activity</a>, (<span class="keywordtype">float</span>)<a class="code" href="classdram__t.html#a1c405d567c45fcbebbabff64b803af18">bwutil</a>/<a class="code" href="classdram__t.html#abf19a1f7be3d99008258f90c530daf73">n_activity</a>);
<a name="l00446"></a>00446    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;i++) {
<a name="l00447"></a>00447       fprintf(simFile, <span class="stringliteral">&quot;bk%d: %da %di &quot;</span>,i,<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;n_access,<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;n_idle);
<a name="l00448"></a>00448    }
<a name="l00449"></a>00449    fprintf(simFile, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00450"></a>00450    fprintf(simFile, <span class="stringliteral">&quot;dram_util_bins:&quot;</span>);
<a name="l00451"></a>00451    <span class="keywordflow">for</span> (i=0;i&lt;10;i++) fprintf(simFile, <span class="stringliteral">&quot; %d&quot;</span>, <a class="code" href="classdram__t.html#a37b132f685ee61531a0a2725341007d9">dram_util_bins</a>[i]);
<a name="l00452"></a>00452    fprintf(simFile, <span class="stringliteral">&quot;\ndram_eff_bins:&quot;</span>);
<a name="l00453"></a>00453    <span class="keywordflow">for</span> (i=0;i&lt;10;i++) fprintf(simFile, <span class="stringliteral">&quot; %d&quot;</span>, <a class="code" href="classdram__t.html#a8b725a9bf37a9d9973c5386e2ab258e8">dram_eff_bins</a>[i]);
<a name="l00454"></a>00454    fprintf(simFile, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00455"></a>00455    <span class="keywordflow">if</span>(<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#a421670cf616901c81fb4635b08f95906">scheduler_type</a>== <a class="code" href="gpu-sim_8h.html#ad4d27d098cea5019101194f61d306ebaaa71a147cbd849f25be0765d23d7b020a">DRAM_FRFCFS</a>) 
<a name="l00456"></a>00456        fprintf(simFile, <span class="stringliteral">&quot;mrqq: max=%d avg=%g\n&quot;</span>, <a class="code" href="classdram__t.html#ae6962c3874d36f252d7dab64973bc774">max_mrqs</a>, (<span class="keywordtype">float</span>)<a class="code" href="classdram__t.html#a78c6b5af2da939c91f605355223db592">ave_mrqs</a>/<a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a>);
<a name="l00457"></a>00457 }
<a name="l00458"></a>00458 
<a name="l00459"></a><a class="code" href="classdram__t.html#ae100d76de65d253a994eb9e9267ec440">00459</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#ae100d76de65d253a994eb9e9267ec440">dram_t::visualize</a>()<span class="keyword"> const</span>
<a name="l00460"></a>00460 <span class="keyword"></span>{
<a name="l00461"></a>00461    printf(<span class="stringliteral">&quot;RRDc=%d CCDc=%d mrqq.Length=%d rwq.Length=%d\n&quot;</span>, 
<a name="l00462"></a>00462           <a class="code" href="classdram__t.html#a87960e2058638c0fecd71b6bbfcd3abd">RRDc</a>, <a class="code" href="classdram__t.html#a7b177711f409f7dcb30793599e7a944b">CCDc</a>, <a class="code" href="classdram__t.html#ab5a63523ee0f4452547e052ff05d1145">mrqq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>(),<a class="code" href="classdram__t.html#a6ddc1b9fe4783019a4ac155a0b4814b3">rwq</a>-&gt;<a class="code" href="classfifo__pipeline.html#a0a1410a1c4196ffd66fd29895f59f35d">get_length</a>());
<a name="l00463"></a>00463    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;<a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>;i++) {
<a name="l00464"></a>00464       printf(<span class="stringliteral">&quot;BK%d: state=%c curr_row=%03x, %2d %2d %2d %2d %p &quot;</span>, 
<a name="l00465"></a>00465              i, <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;state, <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;curr_row,
<a name="l00466"></a>00466              <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;RCDc, <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;RASc,
<a name="l00467"></a>00467              <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;RPc, <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;RCc,
<a name="l00468"></a>00468              <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;mrq );
<a name="l00469"></a>00469       <span class="keywordflow">if</span> (<a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;mrq)
<a name="l00470"></a>00470          printf(<span class="stringliteral">&quot;txf: %d %d&quot;</span>, <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;mrq-&gt;nbytes, <a class="code" href="classdram__t.html#a829507a31216245e6243eaa322cc3819">bk</a>[i]-&gt;<a class="code" href="structbank__t.html#ace226be8fbfe86157a88cd3df817eea2">mrq</a>-&gt;<a class="code" href="classdram__req__t.html#ade161f34c32816ff4ae162ce9d588e03">txbytes</a>);
<a name="l00471"></a>00471       printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00472"></a>00472    }
<a name="l00473"></a>00473    <span class="keywordflow">if</span> ( <a class="code" href="classdram__t.html#a129e90fd7a1141cbad2c6f25139610b8">m_frfcfs_scheduler</a> ) 
<a name="l00474"></a>00474       <a class="code" href="classdram__t.html#a129e90fd7a1141cbad2c6f25139610b8">m_frfcfs_scheduler</a>-&gt;<a class="code" href="classfrfcfs__scheduler.html#abc8a30a389d6262bce4ef06981bc1f81">print</a>(stdout);
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="classdram__t.html#ad273dace86285cea84b41936ad0ca76e">00477</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#ad273dace86285cea84b41936ad0ca76e">dram_t::print_stat</a>( FILE* simFile ) 
<a name="l00478"></a>00478 {
<a name="l00479"></a>00479    fprintf(simFile,<span class="stringliteral">&quot;DRAM (%d): n_cmd=%d n_nop=%d n_act=%d n_pre=%d n_req=%d n_rd=%d n_write=%d bw_util=%.4g &quot;</span>,
<a name="l00480"></a>00480            <span class="keywordtype">id</span>, <a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a>, <a class="code" href="classdram__t.html#a1e74a7d93bd4c33f2226ad7eae943973">n_nop</a>, <a class="code" href="classdram__t.html#a53febc1cad0d446b079a2ff94f021a5a">n_act</a>, <a class="code" href="classdram__t.html#a4d4dc5cc2088ac90ffbb1b450ad34559">n_pre</a>, <a class="code" href="classdram__t.html#aac2886407cdd226b50e04a09273802c5">n_req</a>, <a class="code" href="classdram__t.html#af7599fc4cc513e4a7a376afccb5800f2">n_rd</a>, <a class="code" href="classdram__t.html#a0b754f0cc29b2921ff9dac08ef57f6bf">n_wr</a>,
<a name="l00481"></a>00481            (<span class="keywordtype">float</span>)<a class="code" href="classdram__t.html#a1c405d567c45fcbebbabff64b803af18">bwutil</a>/<a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a>);
<a name="l00482"></a>00482    fprintf(simFile, <span class="stringliteral">&quot;mrqq: %d %.4g mrqsmax=%d &quot;</span>, <a class="code" href="classdram__t.html#ae6962c3874d36f252d7dab64973bc774">max_mrqs</a>, (<span class="keywordtype">float</span>)<a class="code" href="classdram__t.html#a78c6b5af2da939c91f605355223db592">ave_mrqs</a>/<a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a>, <a class="code" href="classdram__t.html#a936cd29e518a0e1a704e85c06df20168">max_mrqs_temp</a>);
<a name="l00483"></a>00483    fprintf(simFile, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00484"></a>00484    fprintf(simFile, <span class="stringliteral">&quot;dram_util_bins:&quot;</span>);
<a name="l00485"></a>00485    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;10;i++) fprintf(simFile, <span class="stringliteral">&quot; %d&quot;</span>, <a class="code" href="classdram__t.html#a37b132f685ee61531a0a2725341007d9">dram_util_bins</a>[i]);
<a name="l00486"></a>00486    fprintf(simFile, <span class="stringliteral">&quot;\ndram_eff_bins:&quot;</span>);
<a name="l00487"></a>00487    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0;i&lt;10;i++) fprintf(simFile, <span class="stringliteral">&quot; %d&quot;</span>, <a class="code" href="classdram__t.html#a8b725a9bf37a9d9973c5386e2ab258e8">dram_eff_bins</a>[i]);
<a name="l00488"></a>00488    fprintf(simFile, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00489"></a>00489    <a class="code" href="classdram__t.html#a936cd29e518a0e1a704e85c06df20168">max_mrqs_temp</a> = 0;
<a name="l00490"></a>00490 }
<a name="l00491"></a>00491 
<a name="l00492"></a><a class="code" href="classdram__t.html#abca0a824f3b569d7714207f79a6191ca">00492</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#abca0a824f3b569d7714207f79a6191ca">dram_t::visualizer_print</a>( gzFile visualizer_file )
<a name="l00493"></a>00493 {
<a name="l00494"></a>00494    <span class="comment">// dram specific statistics</span>
<a name="l00495"></a>00495    gzprintf(visualizer_file,<span class="stringliteral">&quot;dramncmd: %u %u\n&quot;</span>,<span class="keywordtype">id</span>, <a class="code" href="classdram__t.html#a8f7a7c13800554ff7b922dc322ee8fac">n_cmd_partial</a>);  
<a name="l00496"></a>00496    gzprintf(visualizer_file,<span class="stringliteral">&quot;dramnop: %u %u\n&quot;</span>,<span class="keywordtype">id</span>,<a class="code" href="classdram__t.html#a4c9eec005e028644c30d5aeef0ad78eb">n_nop_partial</a>);
<a name="l00497"></a>00497    gzprintf(visualizer_file,<span class="stringliteral">&quot;dramnact: %u %u\n&quot;</span>,<span class="keywordtype">id</span>,<a class="code" href="classdram__t.html#a4d2733626a32b05eae69ca49da91791f">n_act_partial</a>);
<a name="l00498"></a>00498    gzprintf(visualizer_file,<span class="stringliteral">&quot;dramnpre: %u %u\n&quot;</span>,<span class="keywordtype">id</span>,<a class="code" href="classdram__t.html#afa1a0ee6ba3a83314992dba753a179e4">n_pre_partial</a>);
<a name="l00499"></a>00499    gzprintf(visualizer_file,<span class="stringliteral">&quot;dramnreq: %u %u\n&quot;</span>,<span class="keywordtype">id</span>,<a class="code" href="classdram__t.html#aa71aa891be3c4feba96242aa4fbbd5b0">n_req_partial</a>);
<a name="l00500"></a>00500    gzprintf(visualizer_file,<span class="stringliteral">&quot;dramavemrqs: %u %u\n&quot;</span>,<span class="keywordtype">id</span>,
<a name="l00501"></a>00501             <a class="code" href="classdram__t.html#a8f7a7c13800554ff7b922dc322ee8fac">n_cmd_partial</a>?(<a class="code" href="classdram__t.html#ab5e75ab051a2ee58c466ae451cccb503">ave_mrqs_partial</a>/<a class="code" href="classdram__t.html#a8f7a7c13800554ff7b922dc322ee8fac">n_cmd_partial</a> ):0);
<a name="l00502"></a>00502 
<a name="l00503"></a>00503    <span class="comment">// utilization and efficiency</span>
<a name="l00504"></a>00504    gzprintf(visualizer_file,<span class="stringliteral">&quot;dramutil: %u %u\n&quot;</span>,  
<a name="l00505"></a>00505             <span class="keywordtype">id</span>,<a class="code" href="classdram__t.html#a8f7a7c13800554ff7b922dc322ee8fac">n_cmd_partial</a>?100*<a class="code" href="classdram__t.html#af35797990631e1ea450e8abf4e2a4b63">bwutil_partial</a>/<a class="code" href="classdram__t.html#a8f7a7c13800554ff7b922dc322ee8fac">n_cmd_partial</a>:0);
<a name="l00506"></a>00506    gzprintf(visualizer_file,<span class="stringliteral">&quot;drameff: %u %u\n&quot;</span>, 
<a name="l00507"></a>00507             <span class="keywordtype">id</span>,<a class="code" href="classdram__t.html#aeb3e2780e5b4c56d07173036acc35c9d">n_activity_partial</a>?100*<a class="code" href="classdram__t.html#af35797990631e1ea450e8abf4e2a4b63">bwutil_partial</a>/<a class="code" href="classdram__t.html#aeb3e2780e5b4c56d07173036acc35c9d">n_activity_partial</a>:0);
<a name="l00508"></a>00508 
<a name="l00509"></a>00509    <span class="comment">// reset for next interval</span>
<a name="l00510"></a>00510    <a class="code" href="classdram__t.html#af35797990631e1ea450e8abf4e2a4b63">bwutil_partial</a> = 0;
<a name="l00511"></a>00511    <a class="code" href="classdram__t.html#aeb3e2780e5b4c56d07173036acc35c9d">n_activity_partial</a> = 0;
<a name="l00512"></a>00512    <a class="code" href="classdram__t.html#ab5e75ab051a2ee58c466ae451cccb503">ave_mrqs_partial</a> = 0; 
<a name="l00513"></a>00513    <a class="code" href="classdram__t.html#a8f7a7c13800554ff7b922dc322ee8fac">n_cmd_partial</a> = 0;
<a name="l00514"></a>00514    <a class="code" href="classdram__t.html#a4c9eec005e028644c30d5aeef0ad78eb">n_nop_partial</a> = 0;
<a name="l00515"></a>00515    <a class="code" href="classdram__t.html#a4d2733626a32b05eae69ca49da91791f">n_act_partial</a> = 0;
<a name="l00516"></a>00516    <a class="code" href="classdram__t.html#afa1a0ee6ba3a83314992dba753a179e4">n_pre_partial</a> = 0;
<a name="l00517"></a>00517    <a class="code" href="classdram__t.html#aa71aa891be3c4feba96242aa4fbbd5b0">n_req_partial</a> = 0;
<a name="l00518"></a>00518 
<a name="l00519"></a>00519    <span class="comment">// dram access type classification</span>
<a name="l00520"></a>00520    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; <a class="code" href="classdram__t.html#af268cba4abb1299e5d35156cd203355b">m_config</a>-&gt;<a class="code" href="structmemory__config.html#af343882efa10cbb359bfbc759a745770">nbk</a>; j++) {
<a name="l00521"></a>00521       gzprintf(visualizer_file,<span class="stringliteral">&quot;dramglobal_acc_r: %u %u %u\n&quot;</span>, <span class="keywordtype">id</span>, j, 
<a name="l00522"></a>00522                <a class="code" href="classdram__t.html#a61d276d9bc31582b916ee271d6b41bbb">m_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#a1fde485bbebfa67dbf134e687291834a">mem_access_type_stats</a>[GLOBAL_ACC_R][<span class="keywordtype">id</span>][j]);
<a name="l00523"></a>00523       gzprintf(visualizer_file,<span class="stringliteral">&quot;dramglobal_acc_w: %u %u %u\n&quot;</span>, <span class="keywordtype">id</span>, j, 
<a name="l00524"></a>00524                <a class="code" href="classdram__t.html#a61d276d9bc31582b916ee271d6b41bbb">m_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#a1fde485bbebfa67dbf134e687291834a">mem_access_type_stats</a>[GLOBAL_ACC_W][<span class="keywordtype">id</span>][j]);
<a name="l00525"></a>00525       gzprintf(visualizer_file,<span class="stringliteral">&quot;dramlocal_acc_r: %u %u %u\n&quot;</span>, <span class="keywordtype">id</span>, j, 
<a name="l00526"></a>00526                <a class="code" href="classdram__t.html#a61d276d9bc31582b916ee271d6b41bbb">m_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#a1fde485bbebfa67dbf134e687291834a">mem_access_type_stats</a>[LOCAL_ACC_R][<span class="keywordtype">id</span>][j]);
<a name="l00527"></a>00527       gzprintf(visualizer_file,<span class="stringliteral">&quot;dramlocal_acc_w: %u %u %u\n&quot;</span>, <span class="keywordtype">id</span>, j, 
<a name="l00528"></a>00528                <a class="code" href="classdram__t.html#a61d276d9bc31582b916ee271d6b41bbb">m_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#a1fde485bbebfa67dbf134e687291834a">mem_access_type_stats</a>[LOCAL_ACC_W][<span class="keywordtype">id</span>][j]);
<a name="l00529"></a>00529       gzprintf(visualizer_file,<span class="stringliteral">&quot;dramconst_acc_r: %u %u %u\n&quot;</span>, <span class="keywordtype">id</span>, j, 
<a name="l00530"></a>00530                <a class="code" href="classdram__t.html#a61d276d9bc31582b916ee271d6b41bbb">m_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#a1fde485bbebfa67dbf134e687291834a">mem_access_type_stats</a>[CONST_ACC_R][<span class="keywordtype">id</span>][j]);
<a name="l00531"></a>00531       gzprintf(visualizer_file,<span class="stringliteral">&quot;dramtexture_acc_r: %u %u %u\n&quot;</span>, <span class="keywordtype">id</span>, j, 
<a name="l00532"></a>00532                <a class="code" href="classdram__t.html#a61d276d9bc31582b916ee271d6b41bbb">m_stats</a>-&gt;<a class="code" href="classmemory__stats__t.html#a1fde485bbebfa67dbf134e687291834a">mem_access_type_stats</a>[TEXTURE_ACC_R][<span class="keywordtype">id</span>][j]);
<a name="l00533"></a>00533    }
<a name="l00534"></a>00534 }
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 
<a name="l00537"></a><a class="code" href="classdram__t.html#ab4076288026b452af1b422b7ff8b01ea">00537</a> <span class="keywordtype">void</span> <a class="code" href="classdram__t.html#ab4076288026b452af1b422b7ff8b01ea">dram_t::set_dram_power_stats</a>(  <span class="keywordtype">unsigned</span> &amp;cmd,
<a name="l00538"></a>00538                                     <span class="keywordtype">unsigned</span> &amp;<a class="code" href="arch__const_8h.html#a239d6875038959e0516bb05d3dd1e8fc">activity</a>,
<a name="l00539"></a>00539                                     <span class="keywordtype">unsigned</span> &amp;nop,
<a name="l00540"></a>00540                                     <span class="keywordtype">unsigned</span> &amp;act,
<a name="l00541"></a>00541                                     <span class="keywordtype">unsigned</span> &amp;pre,
<a name="l00542"></a>00542                                     <span class="keywordtype">unsigned</span> &amp;rd,
<a name="l00543"></a>00543                                     <span class="keywordtype">unsigned</span> &amp;wr,
<a name="l00544"></a>00544                                     <span class="keywordtype">unsigned</span> &amp;req)<span class="keyword"> const</span>{
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     <span class="comment">// Point power performance counters to low-level DRAM counters</span>
<a name="l00547"></a>00547     cmd = <a class="code" href="classdram__t.html#a3e278766b76f641a2b82562e874dde76">n_cmd</a>;
<a name="l00548"></a>00548     activity = <a class="code" href="classdram__t.html#abf19a1f7be3d99008258f90c530daf73">n_activity</a>;
<a name="l00549"></a>00549     nop = <a class="code" href="classdram__t.html#a1e74a7d93bd4c33f2226ad7eae943973">n_nop</a>;
<a name="l00550"></a>00550     act = <a class="code" href="classdram__t.html#a53febc1cad0d446b079a2ff94f021a5a">n_act</a>;
<a name="l00551"></a>00551     pre = <a class="code" href="classdram__t.html#a4d4dc5cc2088ac90ffbb1b450ad34559">n_pre</a>;
<a name="l00552"></a>00552     rd = <a class="code" href="classdram__t.html#af7599fc4cc513e4a7a376afccb5800f2">n_rd</a>;
<a name="l00553"></a>00553     wr = <a class="code" href="classdram__t.html#a0b754f0cc29b2921ff9dac08ef57f6bf">n_wr</a>;
<a name="l00554"></a>00554     req = <a class="code" href="classdram__t.html#aac2886407cdd226b50e04a09273802c5">n_req</a>;
<a name="l00555"></a>00555 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 13 May 2014 for GPGPU-Sim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
